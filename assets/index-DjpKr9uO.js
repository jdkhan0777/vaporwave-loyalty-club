var vw=t=>{throw TypeError(t)};var w1=(t,e,n)=>e.has(t)||vw("Cannot "+n);var ue=(t,e,n)=>(w1(t,e,"read from private field"),n?n.call(t):e.get(t)),vt=(t,e,n)=>e.has(t)?vw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(w1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Jn=(t,e,n)=>(w1(t,e,"access private method"),n);var Jh=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return ue(t,e,r)}});function uE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hE={exports:{}},c0={},dE={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=Symbol.for("react.element"),l3=Symbol.for("react.portal"),c3=Symbol.for("react.fragment"),u3=Symbol.for("react.strict_mode"),h3=Symbol.for("react.profiler"),d3=Symbol.for("react.provider"),f3=Symbol.for("react.context"),g3=Symbol.for("react.forward_ref"),p3=Symbol.for("react.suspense"),m3=Symbol.for("react.memo"),y3=Symbol.for("react.lazy"),Ew=Symbol.iterator;function w3(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var fE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,pE={};function _c(t,e,n){this.props=t,this.context=e,this.refs=pE,this.updater=n||fE}_c.prototype.isReactComponent={};_c.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_c.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mE(){}mE.prototype=_c.prototype;function nm(t,e,n){this.props=t,this.context=e,this.refs=pE,this.updater=n||fE}var rm=nm.prototype=new mE;rm.constructor=nm;gE(rm,_c.prototype);rm.isPureReactComponent=!0;var _w=Array.isArray,yE=Object.prototype.hasOwnProperty,im={current:null},wE={key:!0,ref:!0,__self:!0,__source:!0};function xE(t,e,n){var r,i={},o=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)yE.call(e,r)&&!wE.hasOwnProperty(r)&&(i[r]=e[r]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var g=Array(d),p=0;p<d;p++)g[p]=arguments[p+2];i.children=g}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)i[r]===void 0&&(i[r]=d[r]);return{$$typeof:dh,type:t,key:o,ref:c,props:i,_owner:im.current}}function x3(t,e){return{$$typeof:dh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===dh}function v3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Aw=/\/+/g;function x1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v3(""+t.key):e.toString(36)}function Pd(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case dh:case l3:c=!0}}if(c)return c=t,i=i(c),t=r===""?"."+x1(c,0):r,_w(i)?(n="",t!=null&&(n=t.replace(Aw,"$&/")+"/"),Pd(i,e,n,"",function(p){return p})):i!=null&&(sm(i)&&(i=x3(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(Aw,"$&/")+"/")+t)),e.push(i)),1;if(c=0,r=r===""?".":r+":",_w(t))for(var d=0;d<t.length;d++){o=t[d];var g=r+x1(o,d);c+=Pd(o,e,n,g,i)}else if(g=w3(t),typeof g=="function")for(t=g.call(t),d=0;!(o=t.next()).done;)o=o.value,g=r+x1(o,d++),c+=Pd(o,e,n,g,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function ed(t,e,n){if(t==null)return t;var r=[],i=0;return Pd(t,r,"","",function(o){return e.call(n,o,i++)}),r}function E3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Er={current:null},Od={transition:null},_3={ReactCurrentDispatcher:Er,ReactCurrentBatchConfig:Od,ReactCurrentOwner:im};function vE(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:ed,forEach:function(t,e,n){ed(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ed(t,function(){e++}),e},toArray:function(t){return ed(t,function(e){return e})||[]},only:function(t){if(!sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=_c;tt.Fragment=c3;tt.Profiler=h3;tt.PureComponent=nm;tt.StrictMode=u3;tt.Suspense=p3;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_3;tt.act=vE;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gE({},t.props),i=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=im.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(g in e)yE.call(e,g)&&!wE.hasOwnProperty(g)&&(r[g]=e[g]===void 0&&d!==void 0?d[g]:e[g])}var g=arguments.length-2;if(g===1)r.children=n;else if(1<g){d=Array(g);for(var p=0;p<g;p++)d[p]=arguments[p+2];r.children=d}return{$$typeof:dh,type:t.type,key:i,ref:o,props:r,_owner:c}};tt.createContext=function(t){return t={$$typeof:f3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:d3,_context:t},t.Consumer=t};tt.createElement=xE;tt.createFactory=function(t){var e=xE.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:g3,render:t}};tt.isValidElement=sm;tt.lazy=function(t){return{$$typeof:y3,_payload:{_status:-1,_result:t},_init:E3}};tt.memo=function(t,e){return{$$typeof:m3,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=Od.transition;Od.transition={};try{t()}finally{Od.transition=e}};tt.unstable_act=vE;tt.useCallback=function(t,e){return Er.current.useCallback(t,e)};tt.useContext=function(t){return Er.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return Er.current.useDeferredValue(t)};tt.useEffect=function(t,e){return Er.current.useEffect(t,e)};tt.useId=function(){return Er.current.useId()};tt.useImperativeHandle=function(t,e,n){return Er.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return Er.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return Er.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return Er.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return Er.current.useReducer(t,e,n)};tt.useRef=function(t){return Er.current.useRef(t)};tt.useState=function(t){return Er.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return Er.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return Er.current.useTransition()};tt.version="18.3.1";dE.exports=tt;var W=dE.exports;const we=tm(W),A3=uE({__proto__:null,default:we},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3=W,I3=Symbol.for("react.element"),T3=Symbol.for("react.fragment"),S3=Object.prototype.hasOwnProperty,b3=C3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R3={key:!0,ref:!0,__self:!0,__source:!0};function EE(t,e,n){var r,i={},o=null,c=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)S3.call(e,r)&&!R3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:I3,type:t,key:o,ref:c,props:i,_owner:b3.current}}c0.Fragment=T3;c0.jsx=EE;c0.jsxs=EE;hE.exports=c0;var z=hE.exports,_E={exports:{}},ri={},AE={exports:{}},CE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,fe){var Te=re.length;re.push(fe);e:for(;0<Te;){var Se=Te-1>>>1,Ce=re[Se];if(0<i(Ce,fe))re[Se]=fe,re[Te]=Ce,Te=Se;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var fe=re[0],Te=re.pop();if(Te!==fe){re[0]=Te;e:for(var Se=0,Ce=re.length,De=Ce>>>1;Se<De;){var Ke=2*(Se+1)-1,$t=re[Ke],Ee=Ke+1,pn=re[Ee];if(0>i($t,Te))Ee<Ce&&0>i(pn,$t)?(re[Se]=pn,re[Ee]=Te,Se=Ee):(re[Se]=$t,re[Ke]=Te,Se=Ke);else if(Ee<Ce&&0>i(pn,Te))re[Se]=pn,re[Ee]=Te,Se=Ee;else break e}}return fe}function i(re,fe){var Te=re.sortIndex-fe.sortIndex;return Te!==0?Te:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var g=[],p=[],x=1,E=null,_=3,I=!1,D=!1,b=!1,F=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(re){for(var fe=n(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=re)r(p),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=n(p)}}function U(re){if(b=!1,O(re),!D)if(n(g)!==null)D=!0,Ie(Y);else{var fe=n(p);fe!==null&&ye(U,fe.startTime-re)}}function Y(re,fe){D=!1,b&&(b=!1,R(M),M=-1),I=!0;var Te=_;try{for(O(fe),E=n(g);E!==null&&(!(E.expirationTime>fe)||re&&!X());){var Se=E.callback;if(typeof Se=="function"){E.callback=null,_=E.priorityLevel;var Ce=Se(E.expirationTime<=fe);fe=t.unstable_now(),typeof Ce=="function"?E.callback=Ce:E===n(g)&&r(g),O(fe)}else r(g);E=n(g)}if(E!==null)var De=!0;else{var Ke=n(p);Ke!==null&&ye(U,Ke.startTime-fe),De=!1}return De}finally{E=null,_=Te,I=!1}}var Z=!1,k=null,M=-1,L=5,G=-1;function X(){return!(t.unstable_now()-G<L)}function $(){if(k!==null){var re=t.unstable_now();G=re;var fe=!0;try{fe=k(!0,re)}finally{fe?j():(Z=!1,k=null)}}else Z=!1}var j;if(typeof S=="function")j=function(){S($)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,J=he.port2;he.port1.onmessage=$,j=function(){J.postMessage(null)}}else j=function(){F($,0)};function Ie(re){k=re,Z||(Z=!0,j())}function ye(re,fe){M=F(function(){re(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){D||I||(D=!0,Ie(Y))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(g)},t.unstable_next=function(re){switch(_){case 1:case 2:case 3:var fe=3;break;default:fe=_}var Te=_;_=fe;try{return re()}finally{_=Te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Te=_;_=re;try{return fe()}finally{_=Te}},t.unstable_scheduleCallback=function(re,fe,Te){var Se=t.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Se+Te:Se):Te=Se,re){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Te+Ce,re={id:x++,callback:fe,priorityLevel:re,startTime:Te,expirationTime:Ce,sortIndex:-1},Te>Se?(re.sortIndex=Te,e(p,re),n(g)===null&&re===n(p)&&(b?(R(M),M=-1):b=!0,ye(U,Te-Se))):(re.sortIndex=Ce,e(g,re),D||I||(D=!0,Ie(Y))),re},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(re){var fe=_;return function(){var Te=_;_=fe;try{return re.apply(this,arguments)}finally{_=Te}}}})(CE);AE.exports=CE;var N3=AE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P3=W,ni=N3;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IE=new Set,Ru={};function tl(t,e){rc(t,e),rc(t+"Capture",e)}function rc(t,e){for(Ru[t]=e,t=0;t<e.length;t++)IE.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pg=Object.prototype.hasOwnProperty,O3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cw={},Iw={};function D3(t){return pg.call(Iw,t)?!0:pg.call(Cw,t)?!1:O3.test(t)?Iw[t]=!0:(Cw[t]=!0,!1)}function k3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M3(t,e,n,r){if(e===null||typeof e>"u"||k3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _r(t,e,n,r,i,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var $n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$n[t]=new _r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$n[e]=new _r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$n[t]=new _r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$n[t]=new _r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$n[t]=new _r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$n[t]=new _r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$n[t]=new _r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$n[t]=new _r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$n[t]=new _r(t,5,!1,t.toLowerCase(),null,!1,!1)});var om=/[\-:]([a-z])/g;function am(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(om,am);$n[e]=new _r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(om,am);$n[e]=new _r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(om,am);$n[e]=new _r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$n[t]=new _r(t,1,!1,t.toLowerCase(),null,!1,!1)});$n.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$n[t]=new _r(t,1,!1,t.toLowerCase(),null,!0,!0)});function lm(t,e,n,r){var i=$n.hasOwnProperty(e)?$n[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M3(e,n,i,r)&&(n=null),r||i===null?D3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ws=P3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),vl=Symbol.for("react.portal"),El=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),SE=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),yg=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),hm=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),bE=Symbol.for("react.offscreen"),Tw=Symbol.iterator;function Wc(t){return t===null||typeof t!="object"?null:(t=Tw&&t[Tw]||t["@@iterator"],typeof t=="function"?t:null)}var en=Object.assign,v1;function eu(t){if(v1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);v1=e&&e[1]||""}return`
`+v1+t}var E1=!1;function _1(t,e){if(!t||E1)return"";E1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),c=i.length-1,d=o.length-1;1<=c&&0<=d&&i[c]!==o[d];)d--;for(;1<=c&&0<=d;c--,d--)if(i[c]!==o[d]){if(c!==1||d!==1)do if(c--,d--,0>d||i[c]!==o[d]){var g=`
`+i[c].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=c&&0<=d);break}}}finally{E1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eu(t):""}function L3(t){switch(t.tag){case 5:return eu(t.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return t=_1(t.type,!1),t;case 11:return t=_1(t.type.render,!1),t;case 1:return t=_1(t.type,!0),t;default:return""}}function xg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case El:return"Fragment";case vl:return"Portal";case mg:return"Profiler";case cm:return"StrictMode";case yg:return"Suspense";case wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SE:return(t.displayName||"Context")+".Consumer";case TE:return(t._context.displayName||"Context")+".Provider";case um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hm:return e=t.displayName||null,e!==null?e:xg(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return xg(t(e))}catch{}}return null}function F3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xg(e);case 8:return e===cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B3(t){var e=RE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nd(t){t._valueTracker||(t._valueTracker=B3(t))}function NE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return en({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Go(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PE(t,e){e=e.checked,e!=null&&lm(t,"checked",e,!1)}function Eg(t,e){PE(t,e);var n=Go(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_g(t,e.type,n):e.hasOwnProperty("defaultValue")&&_g(t,e.type,Go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _g(t,e,n){(e!=="number"||rf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tu=Array.isArray;function Ml(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Go(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ag(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return en({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(tu(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Go(n)}}function OE(t,e){var n=Go(e.value),r=Go(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rd,kE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V3=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(t){V3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uu[e]=uu[t]})});function ME(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uu.hasOwnProperty(t)&&uu[t]?(""+e).trim():e+"px"}function LE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ME(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var U3=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ig(t,e){if(e){if(U3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function Tg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sg=null;function dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bg=null,Ll=null,Fl=null;function Pw(t){if(t=ph(t)){if(typeof bg!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=g0(e),bg(t.stateNode,t.type,e))}}function FE(t){Ll?Fl?Fl.push(t):Fl=[t]:Ll=t}function BE(){if(Ll){var t=Ll,e=Fl;if(Fl=Ll=null,Pw(t),e)for(t=0;t<e.length;t++)Pw(e[t])}}function VE(t,e){return t(e)}function UE(){}var A1=!1;function jE(t,e,n){if(A1)return t(e,n);A1=!0;try{return VE(t,e,n)}finally{A1=!1,(Ll!==null||Fl!==null)&&(UE(),BE())}}function Pu(t,e){var n=t.stateNode;if(n===null)return null;var r=g0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var Rg=!1;if(Ds)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){Rg=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{Rg=!1}function j3(t,e,n,r,i,o,c,d,g){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(x){this.onError(x)}}var hu=!1,sf=null,of=!1,Ng=null,z3={onError:function(t){hu=!0,sf=t}};function H3(t,e,n,r,i,o,c,d,g){hu=!1,sf=null,j3.apply(z3,arguments)}function W3(t,e,n,r,i,o,c,d,g){if(H3.apply(this,arguments),hu){if(hu){var p=sf;hu=!1,sf=null}else throw Error(ge(198));of||(of=!0,Ng=p)}}function nl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ow(t){if(nl(t)!==t)throw Error(ge(188))}function G3(t){var e=t.alternate;if(!e){if(e=nl(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ow(i),t;if(o===r)return Ow(i),e;o=o.sibling}throw Error(ge(188))}if(n.return!==r.return)n=i,r=o;else{for(var c=!1,d=i.child;d;){if(d===n){c=!0,n=i,r=o;break}if(d===r){c=!0,r=i,n=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===n){c=!0,n=o,r=i;break}if(d===r){c=!0,r=o,n=i;break}d=d.sibling}if(!c)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function HE(t){return t=G3(t),t!==null?WE(t):null}function WE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WE(t);if(e!==null)return e;t=t.sibling}return null}var GE=ni.unstable_scheduleCallback,Dw=ni.unstable_cancelCallback,q3=ni.unstable_shouldYield,$3=ni.unstable_requestPaint,fn=ni.unstable_now,X3=ni.unstable_getCurrentPriorityLevel,fm=ni.unstable_ImmediatePriority,qE=ni.unstable_UserBlockingPriority,af=ni.unstable_NormalPriority,K3=ni.unstable_LowPriority,$E=ni.unstable_IdlePriority,u0=null,ns=null;function Y3(t){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(u0,t,void 0,(t.current.flags&128)===128)}catch{}}var Oi=Math.clz32?Math.clz32:J3,Q3=Math.log,Z3=Math.LN2;function J3(t){return t>>>=0,t===0?32:31-(Q3(t)/Z3|0)|0}var id=64,sd=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,c=n&268435455;if(c!==0){var d=c&~i;d!==0?r=nu(d):(o&=c,o!==0&&(r=nu(o)))}else c=n&~i,c!==0?r=nu(c):o!==0&&(r=nu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Oi(e),i=1<<n,r|=t[n],e&=~i;return r}function eb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Oi(o),d=1<<c,g=i[c];g===-1?(!(d&n)||d&r)&&(i[c]=eb(d,e)):g<=e&&(t.expiredLanes|=d),o&=~d}}function Pg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XE(){var t=id;return id<<=1,!(id&4194240)&&(id=64),t}function C1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Oi(e),t[e]=n}function nb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Oi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Oi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var At=0;function KE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YE,pm,QE,ZE,JE,Og=!1,od=[],No=null,Po=null,Oo=null,Ou=new Map,Du=new Map,fo=[],rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kw(t,e){switch(t){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Ou.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(e.pointerId)}}function qc(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ph(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ib(t,e,n,r,i){switch(e){case"focusin":return No=qc(No,t,e,n,r,i),!0;case"dragenter":return Po=qc(Po,t,e,n,r,i),!0;case"mouseover":return Oo=qc(Oo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ou.set(o,qc(Ou.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Du.set(o,qc(Du.get(o)||null,t,e,n,r,i)),!0}return!1}function e_(t){var e=Na(t.target);if(e!==null){var n=nl(e);if(n!==null){if(e=n.tag,e===13){if(e=zE(n),e!==null){t.blockedOn=e,JE(t.priority,function(){QE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sg=r,n.target.dispatchEvent(r),Sg=null}else return e=ph(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function Mw(t,e,n){Dd(t)&&n.delete(e)}function sb(){Og=!1,No!==null&&Dd(No)&&(No=null),Po!==null&&Dd(Po)&&(Po=null),Oo!==null&&Dd(Oo)&&(Oo=null),Ou.forEach(Mw),Du.forEach(Mw)}function $c(t,e){t.blockedOn===e&&(t.blockedOn=null,Og||(Og=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,sb)))}function ku(t){function e(i){return $c(i,t)}if(0<od.length){$c(od[0],t);for(var n=1;n<od.length;n++){var r=od[n];r.blockedOn===t&&(r.blockedOn=null)}}for(No!==null&&$c(No,t),Po!==null&&$c(Po,t),Oo!==null&&$c(Oo,t),Ou.forEach(e),Du.forEach(e),n=0;n<fo.length;n++)r=fo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fo.length&&(n=fo[0],n.blockedOn===null);)e_(n),n.blockedOn===null&&fo.shift()}var Bl=Ws.ReactCurrentBatchConfig,cf=!0;function ob(t,e,n,r){var i=At,o=Bl.transition;Bl.transition=null;try{At=1,mm(t,e,n,r)}finally{At=i,Bl.transition=o}}function ab(t,e,n,r){var i=At,o=Bl.transition;Bl.transition=null;try{At=4,mm(t,e,n,r)}finally{At=i,Bl.transition=o}}function mm(t,e,n,r){if(cf){var i=Dg(t,e,n,r);if(i===null)k1(t,e,r,uf,n),kw(t,r);else if(ib(i,t,e,n,r))r.stopPropagation();else if(kw(t,r),e&4&&-1<rb.indexOf(t)){for(;i!==null;){var o=ph(i);if(o!==null&&YE(o),o=Dg(t,e,n,r),o===null&&k1(t,e,r,uf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else k1(t,e,r,null,n)}}var uf=null;function Dg(t,e,n,r){if(uf=null,t=dm(r),t=Na(t),t!==null)if(e=nl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uf=t,null}function t_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X3()){case fm:return 1;case qE:return 4;case af:case K3:return 16;case $E:return 536870912;default:return 16}default:return 16}}var Io=null,ym=null,kd=null;function n_(){if(kd)return kd;var t,e=ym,n=e.length,r,i="value"in Io?Io.value:Io.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===i[o-r];r++);return kd=i.slice(t,1<r?1-r:void 0)}function Md(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ad(){return!0}function Lw(){return!1}function ii(t){function e(n,r,i,o,c){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ad:Lw,this.isPropagationStopped=Lw,this}return en(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var Ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wm=ii(Ac),gh=en({},Ac,{view:0,detail:0}),lb=ii(gh),I1,T1,Xc,h0=en({},gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xc&&(Xc&&t.type==="mousemove"?(I1=t.screenX-Xc.screenX,T1=t.screenY-Xc.screenY):T1=I1=0,Xc=t),I1)},movementY:function(t){return"movementY"in t?t.movementY:T1}}),Fw=ii(h0),cb=en({},h0,{dataTransfer:0}),ub=ii(cb),hb=en({},gh,{relatedTarget:0}),S1=ii(hb),db=en({},Ac,{animationName:0,elapsedTime:0,pseudoElement:0}),fb=ii(db),gb=en({},Ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pb=ii(gb),mb=en({},Ac,{data:0}),Bw=ii(mb),yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xb[t])?!!e[t]:!1}function xm(){return vb}var Eb=en({},gh,{key:function(t){if(t.key){var e=yb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Md(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xm,charCode:function(t){return t.type==="keypress"?Md(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Md(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_b=ii(Eb),Ab=en({},h0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vw=ii(Ab),Cb=en({},gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xm}),Ib=ii(Cb),Tb=en({},Ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sb=ii(Tb),bb=en({},h0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=ii(bb),Nb=[9,13,27,32],vm=Ds&&"CompositionEvent"in window,du=null;Ds&&"documentMode"in document&&(du=document.documentMode);var Pb=Ds&&"TextEvent"in window&&!du,r_=Ds&&(!vm||du&&8<du&&11>=du),Uw=" ",jw=!1;function i_(t,e){switch(t){case"keyup":return Nb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _l=!1;function Ob(t,e){switch(t){case"compositionend":return s_(e);case"keypress":return e.which!==32?null:(jw=!0,Uw);case"textInput":return t=e.data,t===Uw&&jw?null:t;default:return null}}function Db(t,e){if(_l)return t==="compositionend"||!vm&&i_(t,e)?(t=n_(),kd=ym=Io=null,_l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r_&&e.locale!=="ko"?null:e.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kb[t.type]:e==="textarea"}function o_(t,e,n,r){FE(r),e=hf(e,"onChange"),0<e.length&&(n=new wm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fu=null,Mu=null;function Mb(t){y_(t,0)}function d0(t){var e=Il(t);if(NE(e))return t}function Lb(t,e){if(t==="change")return e}var a_=!1;if(Ds){var b1;if(Ds){var R1="oninput"in document;if(!R1){var Hw=document.createElement("div");Hw.setAttribute("oninput","return;"),R1=typeof Hw.oninput=="function"}b1=R1}else b1=!1;a_=b1&&(!document.documentMode||9<document.documentMode)}function Ww(){fu&&(fu.detachEvent("onpropertychange",l_),Mu=fu=null)}function l_(t){if(t.propertyName==="value"&&d0(Mu)){var e=[];o_(e,Mu,t,dm(t)),jE(Mb,e)}}function Fb(t,e,n){t==="focusin"?(Ww(),fu=e,Mu=n,fu.attachEvent("onpropertychange",l_)):t==="focusout"&&Ww()}function Bb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return d0(Mu)}function Vb(t,e){if(t==="click")return d0(e)}function Ub(t,e){if(t==="input"||t==="change")return d0(e)}function jb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ki=typeof Object.is=="function"?Object.is:jb;function Lu(t,e){if(ki(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pg.call(e,i)||!ki(t[i],e[i]))return!1}return!0}function Gw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qw(t,e){var n=Gw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gw(n)}}function c_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?c_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function u_(){for(var t=window,e=rf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rf(t.document)}return e}function Em(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zb(t){var e=u_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&c_(n.ownerDocument.documentElement,n)){if(r!==null&&Em(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=qw(n,o);var c=qw(n,r);i&&c&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hb=Ds&&"documentMode"in document&&11>=document.documentMode,Al=null,kg=null,gu=null,Mg=!1;function $w(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mg||Al==null||Al!==rf(r)||(r=Al,"selectionStart"in r&&Em(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gu&&Lu(gu,r)||(gu=r,r=hf(kg,"onSelect"),0<r.length&&(e=new wm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Al)))}function ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cl={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},N1={},h_={};Ds&&(h_=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function f0(t){if(N1[t])return N1[t];if(!Cl[t])return t;var e=Cl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in h_)return N1[t]=e[n];return t}var d_=f0("animationend"),f_=f0("animationiteration"),g_=f0("animationstart"),p_=f0("transitionend"),m_=new Map,Xw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(t,e){m_.set(t,e),tl(e,[t])}for(var P1=0;P1<Xw.length;P1++){var O1=Xw[P1],Wb=O1.toLowerCase(),Gb=O1[0].toUpperCase()+O1.slice(1);sa(Wb,"on"+Gb)}sa(d_,"onAnimationEnd");sa(f_,"onAnimationIteration");sa(g_,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(p_,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function Kw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W3(r,e,void 0,t),t.currentTarget=null}function y_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var c=r.length-1;0<=c;c--){var d=r[c],g=d.instance,p=d.currentTarget;if(d=d.listener,g!==o&&i.isPropagationStopped())break e;Kw(i,d,p),o=g}else for(c=0;c<r.length;c++){if(d=r[c],g=d.instance,p=d.currentTarget,d=d.listener,g!==o&&i.isPropagationStopped())break e;Kw(i,d,p),o=g}}}if(of)throw t=Ng,of=!1,Ng=null,t}function jt(t,e){var n=e[Ug];n===void 0&&(n=e[Ug]=new Set);var r=t+"__bubble";n.has(r)||(w_(e,t,2,!1),n.add(r))}function D1(t,e,n){var r=0;e&&(r|=4),w_(n,t,r,e)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Fu(t){if(!t[cd]){t[cd]=!0,IE.forEach(function(n){n!=="selectionchange"&&(qb.has(n)||D1(n,!1,t),D1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cd]||(e[cd]=!0,D1("selectionchange",!1,e))}}function w_(t,e,n,r){switch(t_(e)){case 1:var i=ob;break;case 4:i=ab;break;default:i=mm}n=i.bind(null,e,n,t),i=void 0,!Rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function k1(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(c===4)for(c=r.return;c!==null;){var g=c.tag;if((g===3||g===4)&&(g=c.stateNode.containerInfo,g===i||g.nodeType===8&&g.parentNode===i))return;c=c.return}for(;d!==null;){if(c=Na(d),c===null)return;if(g=c.tag,g===5||g===6){r=o=c;continue e}d=d.parentNode}}r=r.return}jE(function(){var p=o,x=dm(n),E=[];e:{var _=m_.get(t);if(_!==void 0){var I=wm,D=t;switch(t){case"keypress":if(Md(n)===0)break e;case"keydown":case"keyup":I=_b;break;case"focusin":D="focus",I=S1;break;case"focusout":D="blur",I=S1;break;case"beforeblur":case"afterblur":I=S1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Fw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Ib;break;case d_:case f_:case g_:I=fb;break;case p_:I=Sb;break;case"scroll":I=lb;break;case"wheel":I=Rb;break;case"copy":case"cut":case"paste":I=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Vw}var b=(e&4)!==0,F=!b&&t==="scroll",R=b?_!==null?_+"Capture":null:_;b=[];for(var S=p,O;S!==null;){O=S;var U=O.stateNode;if(O.tag===5&&U!==null&&(O=U,R!==null&&(U=Pu(S,R),U!=null&&b.push(Bu(S,U,O)))),F)break;S=S.return}0<b.length&&(_=new I(_,D,null,n,x),E.push({event:_,listeners:b}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==Sg&&(D=n.relatedTarget||n.fromElement)&&(Na(D)||D[ks]))break e;if((I||_)&&(_=x.window===x?x:(_=x.ownerDocument)?_.defaultView||_.parentWindow:window,I?(D=n.relatedTarget||n.toElement,I=p,D=D?Na(D):null,D!==null&&(F=nl(D),D!==F||D.tag!==5&&D.tag!==6)&&(D=null)):(I=null,D=p),I!==D)){if(b=Fw,U="onMouseLeave",R="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(b=Vw,U="onPointerLeave",R="onPointerEnter",S="pointer"),F=I==null?_:Il(I),O=D==null?_:Il(D),_=new b(U,S+"leave",I,n,x),_.target=F,_.relatedTarget=O,U=null,Na(x)===p&&(b=new b(R,S+"enter",D,n,x),b.target=O,b.relatedTarget=F,U=b),F=U,I&&D)t:{for(b=I,R=D,S=0,O=b;O;O=gl(O))S++;for(O=0,U=R;U;U=gl(U))O++;for(;0<S-O;)b=gl(b),S--;for(;0<O-S;)R=gl(R),O--;for(;S--;){if(b===R||R!==null&&b===R.alternate)break t;b=gl(b),R=gl(R)}b=null}else b=null;I!==null&&Yw(E,_,I,b,!1),D!==null&&F!==null&&Yw(E,F,D,b,!0)}}e:{if(_=p?Il(p):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var Y=Lb;else if(zw(_))if(a_)Y=Ub;else{Y=Bb;var Z=Fb}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(Y=Vb);if(Y&&(Y=Y(t,p))){o_(E,Y,n,x);break e}Z&&Z(t,_,p),t==="focusout"&&(Z=_._wrapperState)&&Z.controlled&&_.type==="number"&&_g(_,"number",_.value)}switch(Z=p?Il(p):window,t){case"focusin":(zw(Z)||Z.contentEditable==="true")&&(Al=Z,kg=p,gu=null);break;case"focusout":gu=kg=Al=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,$w(E,n,x);break;case"selectionchange":if(Hb)break;case"keydown":case"keyup":$w(E,n,x)}var k;if(vm)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else _l?i_(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(r_&&n.locale!=="ko"&&(_l||M!=="onCompositionStart"?M==="onCompositionEnd"&&_l&&(k=n_()):(Io=x,ym="value"in Io?Io.value:Io.textContent,_l=!0)),Z=hf(p,M),0<Z.length&&(M=new Bw(M,t,null,n,x),E.push({event:M,listeners:Z}),k?M.data=k:(k=s_(n),k!==null&&(M.data=k)))),(k=Pb?Ob(t,n):Db(t,n))&&(p=hf(p,"onBeforeInput"),0<p.length&&(x=new Bw("onBeforeInput","beforeinput",null,n,x),E.push({event:x,listeners:p}),x.data=k))}y_(E,e)})}function Bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Pu(t,n),o!=null&&r.unshift(Bu(t,o,i)),o=Pu(t,e),o!=null&&r.push(Bu(t,o,i))),t=t.return}return r}function gl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yw(t,e,n,r,i){for(var o=e._reactName,c=[];n!==null&&n!==r;){var d=n,g=d.alternate,p=d.stateNode;if(g!==null&&g===r)break;d.tag===5&&p!==null&&(d=p,i?(g=Pu(n,o),g!=null&&c.unshift(Bu(n,g,d))):i||(g=Pu(n,o),g!=null&&c.push(Bu(n,g,d)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var $b=/\r\n?/g,Xb=/\u0000|\uFFFD/g;function Qw(t){return(typeof t=="string"?t:""+t).replace($b,`
`).replace(Xb,"")}function ud(t,e,n){if(e=Qw(e),Qw(t)!==e&&n)throw Error(ge(425))}function df(){}var Lg=null,Fg=null;function Bg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,Zw=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Zw<"u"?function(t){return Zw.resolve(null).then(t).catch(Qb)}:Vg;function Qb(t){setTimeout(function(){throw t})}function M1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ku(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ku(e)}function Do(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cc=Math.random().toString(36).slice(2),ts="__reactFiber$"+Cc,Vu="__reactProps$"+Cc,ks="__reactContainer$"+Cc,Ug="__reactEvents$"+Cc,Zb="__reactListeners$"+Cc,Jb="__reactHandles$"+Cc;function Na(t){var e=t[ts];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[ts]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jw(t);t!==null;){if(n=t[ts])return n;t=Jw(t)}return e}t=n,n=t.parentNode}return null}function ph(t){return t=t[ts]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Il(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function g0(t){return t[Vu]||null}var jg=[],Tl=-1;function oa(t){return{current:t}}function Ht(t){0>Tl||(t.current=jg[Tl],jg[Tl]=null,Tl--)}function Dt(t,e){Tl++,jg[Tl]=t.current,t.current=e}var qo={},or=oa(qo),Dr=oa(!1),za=qo;function ic(t,e){var n=t.type.contextTypes;if(!n)return qo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function ff(){Ht(Dr),Ht(or)}function e2(t,e,n){if(or.current!==qo)throw Error(ge(168));Dt(or,e),Dt(Dr,n)}function x_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ge(108,F3(t)||"Unknown",i));return en({},n,r)}function gf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qo,za=or.current,Dt(or,t),Dt(Dr,Dr.current),!0}function t2(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=x_(t,e,za),r.__reactInternalMemoizedMergedChildContext=t,Ht(Dr),Ht(or),Dt(or,t)):Ht(Dr),Dt(Dr,n)}var Ts=null,p0=!1,L1=!1;function v_(t){Ts===null?Ts=[t]:Ts.push(t)}function e4(t){p0=!0,v_(t)}function aa(){if(!L1&&Ts!==null){L1=!0;var t=0,e=At;try{var n=Ts;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ts=null,p0=!1}catch(i){throw Ts!==null&&(Ts=Ts.slice(t+1)),GE(fm,aa),i}finally{At=e,L1=!1}}return null}var Sl=[],bl=0,pf=null,mf=0,di=[],fi=0,Ha=null,Ss=1,bs="";function Sa(t,e){Sl[bl++]=mf,Sl[bl++]=pf,pf=t,mf=e}function E_(t,e,n){di[fi++]=Ss,di[fi++]=bs,di[fi++]=Ha,Ha=t;var r=Ss;t=bs;var i=32-Oi(r)-1;r&=~(1<<i),n+=1;var o=32-Oi(e)+i;if(30<o){var c=i-i%5;o=(r&(1<<c)-1).toString(32),r>>=c,i-=c,Ss=1<<32-Oi(e)+i|n<<i|r,bs=o+t}else Ss=1<<o|n<<i|r,bs=t}function _m(t){t.return!==null&&(Sa(t,1),E_(t,1,0))}function Am(t){for(;t===pf;)pf=Sl[--bl],Sl[bl]=null,mf=Sl[--bl],Sl[bl]=null;for(;t===Ha;)Ha=di[--fi],di[fi]=null,bs=di[--fi],di[fi]=null,Ss=di[--fi],di[fi]=null}var Zr=null,Yr=null,qt=!1,Ni=null;function __(t,e){var n=pi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function n2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Yr=Do(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ha!==null?{id:Ss,overflow:bs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zr=t,Yr=null,!0):!1;default:return!1}}function zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hg(t){if(qt){var e=Yr;if(e){var n=e;if(!n2(t,e)){if(zg(t))throw Error(ge(418));e=Do(n.nextSibling);var r=Zr;e&&n2(t,e)?__(r,n):(t.flags=t.flags&-4097|2,qt=!1,Zr=t)}}else{if(zg(t))throw Error(ge(418));t.flags=t.flags&-4097|2,qt=!1,Zr=t}}}function r2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function hd(t){if(t!==Zr)return!1;if(!qt)return r2(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bg(t.type,t.memoizedProps)),e&&(e=Yr)){if(zg(t))throw A_(),Error(ge(418));for(;e;)__(t,e),e=Do(e.nextSibling)}if(r2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yr=Do(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yr=null}}else Yr=Zr?Do(t.stateNode.nextSibling):null;return!0}function A_(){for(var t=Yr;t;)t=Do(t.nextSibling)}function sc(){Yr=Zr=null,qt=!1}function Cm(t){Ni===null?Ni=[t]:Ni.push(t)}var t4=Ws.ReactCurrentBatchConfig;function Kc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var d=i.refs;c===null?delete d[o]:d[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function dd(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i2(t){var e=t._init;return e(t._payload)}function C_(t){function e(R,S){if(t){var O=R.deletions;O===null?(R.deletions=[S],R.flags|=16):O.push(S)}}function n(R,S){if(!t)return null;for(;S!==null;)e(R,S),S=S.sibling;return null}function r(R,S){for(R=new Map;S!==null;)S.key!==null?R.set(S.key,S):R.set(S.index,S),S=S.sibling;return R}function i(R,S){return R=Fo(R,S),R.index=0,R.sibling=null,R}function o(R,S,O){return R.index=O,t?(O=R.alternate,O!==null?(O=O.index,O<S?(R.flags|=2,S):O):(R.flags|=2,S)):(R.flags|=1048576,S)}function c(R){return t&&R.alternate===null&&(R.flags|=2),R}function d(R,S,O,U){return S===null||S.tag!==6?(S=H1(O,R.mode,U),S.return=R,S):(S=i(S,O),S.return=R,S)}function g(R,S,O,U){var Y=O.type;return Y===El?x(R,S,O.props.children,U,O.key):S!==null&&(S.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===co&&i2(Y)===S.type)?(U=i(S,O.props),U.ref=Kc(R,S,O),U.return=R,U):(U=zd(O.type,O.key,O.props,null,R.mode,U),U.ref=Kc(R,S,O),U.return=R,U)}function p(R,S,O,U){return S===null||S.tag!==4||S.stateNode.containerInfo!==O.containerInfo||S.stateNode.implementation!==O.implementation?(S=W1(O,R.mode,U),S.return=R,S):(S=i(S,O.children||[]),S.return=R,S)}function x(R,S,O,U,Y){return S===null||S.tag!==7?(S=Ua(O,R.mode,U,Y),S.return=R,S):(S=i(S,O),S.return=R,S)}function E(R,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return S=H1(""+S,R.mode,O),S.return=R,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case td:return O=zd(S.type,S.key,S.props,null,R.mode,O),O.ref=Kc(R,null,S),O.return=R,O;case vl:return S=W1(S,R.mode,O),S.return=R,S;case co:var U=S._init;return E(R,U(S._payload),O)}if(tu(S)||Wc(S))return S=Ua(S,R.mode,O,null),S.return=R,S;dd(R,S)}return null}function _(R,S,O,U){var Y=S!==null?S.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:d(R,S,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case td:return O.key===Y?g(R,S,O,U):null;case vl:return O.key===Y?p(R,S,O,U):null;case co:return Y=O._init,_(R,S,Y(O._payload),U)}if(tu(O)||Wc(O))return Y!==null?null:x(R,S,O,U,null);dd(R,O)}return null}function I(R,S,O,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number")return R=R.get(O)||null,d(S,R,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case td:return R=R.get(U.key===null?O:U.key)||null,g(S,R,U,Y);case vl:return R=R.get(U.key===null?O:U.key)||null,p(S,R,U,Y);case co:var Z=U._init;return I(R,S,O,Z(U._payload),Y)}if(tu(U)||Wc(U))return R=R.get(O)||null,x(S,R,U,Y,null);dd(S,U)}return null}function D(R,S,O,U){for(var Y=null,Z=null,k=S,M=S=0,L=null;k!==null&&M<O.length;M++){k.index>M?(L=k,k=null):L=k.sibling;var G=_(R,k,O[M],U);if(G===null){k===null&&(k=L);break}t&&k&&G.alternate===null&&e(R,k),S=o(G,S,M),Z===null?Y=G:Z.sibling=G,Z=G,k=L}if(M===O.length)return n(R,k),qt&&Sa(R,M),Y;if(k===null){for(;M<O.length;M++)k=E(R,O[M],U),k!==null&&(S=o(k,S,M),Z===null?Y=k:Z.sibling=k,Z=k);return qt&&Sa(R,M),Y}for(k=r(R,k);M<O.length;M++)L=I(k,R,M,O[M],U),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?M:L.key),S=o(L,S,M),Z===null?Y=L:Z.sibling=L,Z=L);return t&&k.forEach(function(X){return e(R,X)}),qt&&Sa(R,M),Y}function b(R,S,O,U){var Y=Wc(O);if(typeof Y!="function")throw Error(ge(150));if(O=Y.call(O),O==null)throw Error(ge(151));for(var Z=Y=null,k=S,M=S=0,L=null,G=O.next();k!==null&&!G.done;M++,G=O.next()){k.index>M?(L=k,k=null):L=k.sibling;var X=_(R,k,G.value,U);if(X===null){k===null&&(k=L);break}t&&k&&X.alternate===null&&e(R,k),S=o(X,S,M),Z===null?Y=X:Z.sibling=X,Z=X,k=L}if(G.done)return n(R,k),qt&&Sa(R,M),Y;if(k===null){for(;!G.done;M++,G=O.next())G=E(R,G.value,U),G!==null&&(S=o(G,S,M),Z===null?Y=G:Z.sibling=G,Z=G);return qt&&Sa(R,M),Y}for(k=r(R,k);!G.done;M++,G=O.next())G=I(k,R,M,G.value,U),G!==null&&(t&&G.alternate!==null&&k.delete(G.key===null?M:G.key),S=o(G,S,M),Z===null?Y=G:Z.sibling=G,Z=G);return t&&k.forEach(function($){return e(R,$)}),qt&&Sa(R,M),Y}function F(R,S,O,U){if(typeof O=="object"&&O!==null&&O.type===El&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case td:e:{for(var Y=O.key,Z=S;Z!==null;){if(Z.key===Y){if(Y=O.type,Y===El){if(Z.tag===7){n(R,Z.sibling),S=i(Z,O.props.children),S.return=R,R=S;break e}}else if(Z.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===co&&i2(Y)===Z.type){n(R,Z.sibling),S=i(Z,O.props),S.ref=Kc(R,Z,O),S.return=R,R=S;break e}n(R,Z);break}else e(R,Z);Z=Z.sibling}O.type===El?(S=Ua(O.props.children,R.mode,U,O.key),S.return=R,R=S):(U=zd(O.type,O.key,O.props,null,R.mode,U),U.ref=Kc(R,S,O),U.return=R,R=U)}return c(R);case vl:e:{for(Z=O.key;S!==null;){if(S.key===Z)if(S.tag===4&&S.stateNode.containerInfo===O.containerInfo&&S.stateNode.implementation===O.implementation){n(R,S.sibling),S=i(S,O.children||[]),S.return=R,R=S;break e}else{n(R,S);break}else e(R,S);S=S.sibling}S=W1(O,R.mode,U),S.return=R,R=S}return c(R);case co:return Z=O._init,F(R,S,Z(O._payload),U)}if(tu(O))return D(R,S,O,U);if(Wc(O))return b(R,S,O,U);dd(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,S!==null&&S.tag===6?(n(R,S.sibling),S=i(S,O),S.return=R,R=S):(n(R,S),S=H1(O,R.mode,U),S.return=R,R=S),c(R)):n(R,S)}return F}var oc=C_(!0),I_=C_(!1),yf=oa(null),wf=null,Rl=null,Im=null;function Tm(){Im=Rl=wf=null}function Sm(t){var e=yf.current;Ht(yf),t._currentValue=e}function Wg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vl(t,e){wf=t,Im=Rl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Or=!0),t.firstContext=null)}function yi(t){var e=t._currentValue;if(Im!==t)if(t={context:t,memoizedValue:e,next:null},Rl===null){if(wf===null)throw Error(ge(308));Rl=t,wf.dependencies={lanes:0,firstContext:t}}else Rl=Rl.next=t;return e}var Pa=null;function bm(t){Pa===null?Pa=[t]:Pa.push(t)}function T_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ms(t,r)}function Ms(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var uo=!1;function Rm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ms(t,n)}return i=r.interleaved,i===null?(e.next=e,bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ms(t,n)}function Ld(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}function s2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xf(t,e,n,r){var i=t.updateQueue;uo=!1;var o=i.firstBaseUpdate,c=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var g=d,p=g.next;g.next=null,c===null?o=p:c.next=p,c=g;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==c&&(d===null?x.firstBaseUpdate=p:d.next=p,x.lastBaseUpdate=g))}if(o!==null){var E=i.baseState;c=0,x=p=g=null,d=o;do{var _=d.lane,I=d.eventTime;if((r&_)===_){x!==null&&(x=x.next={eventTime:I,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var D=t,b=d;switch(_=e,I=n,b.tag){case 1:if(D=b.payload,typeof D=="function"){E=D.call(I,E,_);break e}E=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=b.payload,_=typeof D=="function"?D.call(I,E,_):D,_==null)break e;E=en({},E,_);break e;case 2:uo=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[d]:_.push(d))}else I={eventTime:I,lane:_,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(p=x=I,g=E):x=x.next=I,c|=_;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;_=d,d=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(x===null&&(g=E),i.baseState=g,i.firstBaseUpdate=p,i.lastBaseUpdate=x,e=i.shared.interleaved,e!==null){i=e;do c|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ga|=c,t.lanes=c,t.memoizedState=E}}function o2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ge(191,i));i.call(r)}}}var mh={},rs=oa(mh),Uu=oa(mh),ju=oa(mh);function Oa(t){if(t===mh)throw Error(ge(174));return t}function Nm(t,e){switch(Dt(ju,e),Dt(Uu,t),Dt(rs,mh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}Ht(rs),Dt(rs,e)}function ac(){Ht(rs),Ht(Uu),Ht(ju)}function b_(t){Oa(ju.current);var e=Oa(rs.current),n=Cg(e,t.type);e!==n&&(Dt(Uu,t),Dt(rs,n))}function Pm(t){Uu.current===t&&(Ht(rs),Ht(Uu))}var Qt=oa(0);function vf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var F1=[];function Om(){for(var t=0;t<F1.length;t++)F1[t]._workInProgressVersionPrimary=null;F1.length=0}var Fd=Ws.ReactCurrentDispatcher,B1=Ws.ReactCurrentBatchConfig,Wa=0,Jt=null,Rn=null,Ln=null,Ef=!1,pu=!1,zu=0,n4=0;function er(){throw Error(ge(321))}function Dm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ki(t[n],e[n]))return!1;return!0}function km(t,e,n,r,i,o){if(Wa=o,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fd.current=t===null||t.memoizedState===null?o4:a4,t=n(r,i),pu){o=0;do{if(pu=!1,zu=0,25<=o)throw Error(ge(301));o+=1,Ln=Rn=null,e.updateQueue=null,Fd.current=l4,t=n(r,i)}while(pu)}if(Fd.current=_f,e=Rn!==null&&Rn.next!==null,Wa=0,Ln=Rn=Jt=null,Ef=!1,e)throw Error(ge(300));return t}function Mm(){var t=zu!==0;return zu=0,t}function Yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Jt.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function wi(){if(Rn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=Rn.next;var e=Ln===null?Jt.memoizedState:Ln.next;if(e!==null)Ln=e,Rn=t;else{if(t===null)throw Error(ge(310));Rn=t,t={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Ln===null?Jt.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function Hu(t,e){return typeof e=="function"?e(t):e}function V1(t){var e=wi(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=Rn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var c=i.next;i.next=o.next,o.next=c}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var d=c=null,g=null,p=o;do{var x=p.lane;if((Wa&x)===x)g!==null&&(g=g.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var E={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};g===null?(d=g=E,c=r):g=g.next=E,Jt.lanes|=x,Ga|=x}p=p.next}while(p!==null&&p!==o);g===null?c=r:g.next=d,ki(r,e.memoizedState)||(Or=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=g,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Jt.lanes|=o,Ga|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function U1(t){var e=wi(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var c=i=i.next;do o=t(o,c.action),c=c.next;while(c!==i);ki(o,e.memoizedState)||(Or=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function R_(){}function N_(t,e){var n=Jt,r=wi(),i=e(),o=!ki(r.memoizedState,i);if(o&&(r.memoizedState=i,Or=!0),r=r.queue,Lm(D_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,Wu(9,O_.bind(null,n,r,i,e),void 0,null),Bn===null)throw Error(ge(349));Wa&30||P_(n,e,i)}return i}function P_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O_(t,e,n,r){e.value=n,e.getSnapshot=r,k_(e)&&M_(t)}function D_(t,e,n){return n(function(){k_(e)&&M_(t)})}function k_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ki(t,n)}catch{return!0}}function M_(t){var e=Ms(t,1);e!==null&&Di(e,t,1,-1)}function a2(t){var e=Yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:t},e.queue=t,t=t.dispatch=s4.bind(null,Jt,t),[e.memoizedState,t]}function Wu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function L_(){return wi().memoizedState}function Bd(t,e,n,r){var i=Yi();Jt.flags|=t,i.memoizedState=Wu(1|e,n,void 0,r===void 0?null:r)}function m0(t,e,n,r){var i=wi();r=r===void 0?null:r;var o=void 0;if(Rn!==null){var c=Rn.memoizedState;if(o=c.destroy,r!==null&&Dm(r,c.deps)){i.memoizedState=Wu(e,n,o,r);return}}Jt.flags|=t,i.memoizedState=Wu(1|e,n,o,r)}function l2(t,e){return Bd(8390656,8,t,e)}function Lm(t,e){return m0(2048,8,t,e)}function F_(t,e){return m0(4,2,t,e)}function B_(t,e){return m0(4,4,t,e)}function V_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function U_(t,e,n){return n=n!=null?n.concat([t]):null,m0(4,4,V_.bind(null,e,t),n)}function Fm(){}function j_(t,e){var n=wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z_(t,e){var n=wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H_(t,e,n){return Wa&21?(ki(n,e)||(n=XE(),Jt.lanes|=n,Ga|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Or=!0),t.memoizedState=n)}function r4(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=B1.transition;B1.transition={};try{t(!1),e()}finally{At=n,B1.transition=r}}function W_(){return wi().memoizedState}function i4(t,e,n){var r=Lo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G_(t))q_(e,n);else if(n=T_(t,e,n,r),n!==null){var i=vr();Di(n,t,r,i),$_(n,e,r)}}function s4(t,e,n){var r=Lo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G_(t))q_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,d=o(c,n);if(i.hasEagerState=!0,i.eagerState=d,ki(d,c)){var g=e.interleaved;g===null?(i.next=i,bm(e)):(i.next=g.next,g.next=i),e.interleaved=i;return}}catch{}finally{}n=T_(t,e,i,r),n!==null&&(i=vr(),Di(n,t,r,i),$_(n,e,r))}}function G_(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function q_(t,e){pu=Ef=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}var _f={readContext:yi,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},o4={readContext:yi,useCallback:function(t,e){return Yi().memoizedState=[t,e===void 0?null:e],t},useContext:yi,useEffect:l2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4194308,4,V_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bd(4,2,t,e)},useMemo:function(t,e){var n=Yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=i4.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Yi();return t={current:t},e.memoizedState=t},useState:a2,useDebugValue:Fm,useDeferredValue:function(t){return Yi().memoizedState=t},useTransition:function(){var t=a2(!1),e=t[0];return t=r4.bind(null,t[1]),Yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,i=Yi();if(qt){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),Bn===null)throw Error(ge(349));Wa&30||P_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,l2(D_.bind(null,r,o,t),[t]),r.flags|=2048,Wu(9,O_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Yi(),e=Bn.identifierPrefix;if(qt){var n=bs,r=Ss;n=(r&~(1<<32-Oi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=n4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},a4={readContext:yi,useCallback:j_,useContext:yi,useEffect:Lm,useImperativeHandle:U_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:z_,useReducer:V1,useRef:L_,useState:function(){return V1(Hu)},useDebugValue:Fm,useDeferredValue:function(t){var e=wi();return H_(e,Rn.memoizedState,t)},useTransition:function(){var t=V1(Hu)[0],e=wi().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:N_,useId:W_,unstable_isNewReconciler:!1},l4={readContext:yi,useCallback:j_,useContext:yi,useEffect:Lm,useImperativeHandle:U_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:z_,useReducer:U1,useRef:L_,useState:function(){return U1(Hu)},useDebugValue:Fm,useDeferredValue:function(t){var e=wi();return Rn===null?e.memoizedState=t:H_(e,Rn.memoizedState,t)},useTransition:function(){var t=U1(Hu)[0],e=wi().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:N_,useId:W_,unstable_isNewReconciler:!1};function Ti(t,e){if(t&&t.defaultProps){e=en({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:en({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var y0={isMounted:function(t){return(t=t._reactInternals)?nl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Lo(t),o=Ps(r,i);o.payload=e,n!=null&&(o.callback=n),e=ko(t,o,i),e!==null&&(Di(e,t,i,r),Ld(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Lo(t),o=Ps(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ko(t,o,i),e!==null&&(Di(e,t,i,r),Ld(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vr(),r=Lo(t),i=Ps(n,r);i.tag=2,e!=null&&(i.callback=e),e=ko(t,i,r),e!==null&&(Di(e,t,r,n),Ld(e,t,r))}};function c2(t,e,n,r,i,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,c):e.prototype&&e.prototype.isPureReactComponent?!Lu(n,r)||!Lu(i,o):!0}function X_(t,e,n){var r=!1,i=qo,o=e.contextType;return typeof o=="object"&&o!==null?o=yi(o):(i=kr(e)?za:or.current,r=e.contextTypes,o=(r=r!=null)?ic(t,i):qo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function u2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&y0.enqueueReplaceState(e,e.state,null)}function qg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rm(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=yi(o):(o=kr(e)?za:or.current,i.context=ic(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gg(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&y0.enqueueReplaceState(i,i.state,null),xf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function lc(t,e){try{var n="",r=e;do n+=L3(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function j1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $g(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c4=typeof WeakMap=="function"?WeakMap:Map;function K_(t,e,n){n=Ps(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cf||(Cf=!0,rp=r),$g(t,e)},n}function Y_(t,e,n){n=Ps(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$g(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$g(t,e),typeof r!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function h2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=A4.bind(null,t,e,n),e.then(t,t))}function d2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ps(-1,1),e.tag=2,ko(n,e,1))),n.lanes|=1),t)}var u4=Ws.ReactCurrentOwner,Or=!1;function pr(t,e,n,r){e.child=t===null?I_(e,null,n,r):oc(e,t.child,n,r)}function g2(t,e,n,r,i){n=n.render;var o=e.ref;return Vl(e,i),r=km(t,e,n,r,o,i),n=Mm(),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ls(t,e,i)):(qt&&n&&_m(e),e.flags|=1,pr(t,e,r,i),e.child)}function p2(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Gm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Q_(t,e,o,r,i)):(t=zd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lu,n(c,r)&&t.ref===e.ref)return Ls(t,e,i)}return e.flags|=1,t=Fo(o,r),t.ref=e.ref,t.return=e,e.child=t}function Q_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Lu(o,r)&&t.ref===e.ref)if(Or=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Or=!0);else return e.lanes=t.lanes,Ls(t,e,i)}return Xg(t,e,n,r,i)}function Z_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Pl,$r),$r|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Pl,$r),$r|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Dt(Pl,$r),$r|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Dt(Pl,$r),$r|=r;return pr(t,e,i,n),e.child}function J_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xg(t,e,n,r,i){var o=kr(n)?za:or.current;return o=ic(e,o),Vl(e,i),n=km(t,e,n,r,o,i),r=Mm(),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ls(t,e,i)):(qt&&r&&_m(e),e.flags|=1,pr(t,e,n,i),e.child)}function m2(t,e,n,r,i){if(kr(n)){var o=!0;gf(e)}else o=!1;if(Vl(e,i),e.stateNode===null)Vd(t,e),X_(e,n,r),qg(e,n,r,i),r=!0;else if(t===null){var c=e.stateNode,d=e.memoizedProps;c.props=d;var g=c.context,p=n.contextType;typeof p=="object"&&p!==null?p=yi(p):(p=kr(n)?za:or.current,p=ic(e,p));var x=n.getDerivedStateFromProps,E=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function";E||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==r||g!==p)&&u2(e,c,r,p),uo=!1;var _=e.memoizedState;c.state=_,xf(e,r,c,i),g=e.memoizedState,d!==r||_!==g||Dr.current||uo?(typeof x=="function"&&(Gg(e,n,x,r),g=e.memoizedState),(d=uo||c2(e,n,d,r,_,g,p))?(E||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=g),c.props=r,c.state=g,c.context=p,r=d):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,S_(t,e),d=e.memoizedProps,p=e.type===e.elementType?d:Ti(e.type,d),c.props=p,E=e.pendingProps,_=c.context,g=n.contextType,typeof g=="object"&&g!==null?g=yi(g):(g=kr(n)?za:or.current,g=ic(e,g));var I=n.getDerivedStateFromProps;(x=typeof I=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==E||_!==g)&&u2(e,c,r,g),uo=!1,_=e.memoizedState,c.state=_,xf(e,r,c,i);var D=e.memoizedState;d!==E||_!==D||Dr.current||uo?(typeof I=="function"&&(Gg(e,n,I,r),D=e.memoizedState),(p=uo||c2(e,n,p,r,_,D,g)||!1)?(x||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,D,g),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,D,g)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),c.props=r,c.state=D,c.context=g,r=p):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Kg(t,e,n,r,o,i)}function Kg(t,e,n,r,i,o){J_(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return i&&t2(e,n,!1),Ls(t,e,o);r=e.stateNode,u4.current=e;var d=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=oc(e,t.child,null,o),e.child=oc(e,null,d,o)):pr(t,e,d,o),e.memoizedState=r.state,i&&t2(e,n,!0),e.child}function eA(t){var e=t.stateNode;e.pendingContext?e2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&e2(t,e.context,!1),Nm(t,e.containerInfo)}function y2(t,e,n,r,i){return sc(),Cm(i),e.flags|=256,pr(t,e,n,r),e.child}var Yg={dehydrated:null,treeContext:null,retryLane:0};function Qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function tA(t,e,n){var r=e.pendingProps,i=Qt.current,o=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(i&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Dt(Qt,i&1),t===null)return Hg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,o?(r=e.mode,o=e.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=v0(c,r,0,null),t=Ua(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Qg(n),e.memoizedState=Yg,t):Bm(e,c));if(i=t.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return h4(t,e,c,r,d,i,n);if(o){o=r.fallback,c=e.mode,i=t.child,d=i.sibling;var g={mode:"hidden",children:r.children};return!(c&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=g,e.deletions=null):(r=Fo(i,g),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=Fo(d,o):(o=Ua(o,c,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,c=t.child.memoizedState,c=c===null?Qg(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~n,e.memoizedState=Yg,r}return o=t.child,t=o.sibling,r=Fo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bm(t,e){return e=v0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fd(t,e,n,r){return r!==null&&Cm(r),oc(e,t.child,null,n),t=Bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h4(t,e,n,r,i,o,c){if(n)return e.flags&256?(e.flags&=-257,r=j1(Error(ge(422))),fd(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=v0({mode:"visible",children:r.children},i,0,null),o=Ua(o,i,c,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&oc(e,t.child,null,c),e.child.memoizedState=Qg(c),e.memoizedState=Yg,o);if(!(e.mode&1))return fd(t,e,c,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,o=Error(ge(419)),r=j1(o,r,void 0),fd(t,e,c,r)}if(d=(c&t.childLanes)!==0,Or||d){if(r=Bn,r!==null){switch(c&-c){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|c)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ms(t,i),Di(r,t,i,-1))}return Wm(),r=j1(Error(ge(421))),fd(t,e,c,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=C4.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Yr=Do(i.nextSibling),Zr=e,qt=!0,Ni=null,t!==null&&(di[fi++]=Ss,di[fi++]=bs,di[fi++]=Ha,Ss=t.id,bs=t.overflow,Ha=e),e=Bm(e,r.children),e.flags|=4096,e)}function w2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wg(t.return,e,n)}function z1(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function nA(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(pr(t,e,r.children,n),r=Qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w2(t,n,e);else if(t.tag===19)w2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Qt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),z1(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}z1(e,!0,n,null,o);break;case"together":z1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ga|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=Fo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function d4(t,e,n){switch(e.tag){case 3:eA(e),sc();break;case 5:b_(e);break;case 1:kr(e.type)&&gf(e);break;case 4:Nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Dt(yf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Qt,Qt.current&1),e.flags|=128,null):n&e.child.childLanes?tA(t,e,n):(Dt(Qt,Qt.current&1),t=Ls(t,e,n),t!==null?t.sibling:null);Dt(Qt,Qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dt(Qt,Qt.current),r)break;return null;case 22:case 23:return e.lanes=0,Z_(t,e,n)}return Ls(t,e,n)}var rA,Zg,iA,sA;rA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zg=function(){};iA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oa(rs.current);var o=null;switch(n){case"input":i=vg(t,i),r=vg(t,r),o=[];break;case"select":i=en({},i,{value:void 0}),r=en({},r,{value:void 0}),o=[];break;case"textarea":i=Ag(t,i),r=Ag(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=df)}Ig(n,r);var c;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var d=i[p];for(c in d)d.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ru.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var g=r[p];if(d=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&g!==d&&(g!=null||d!=null))if(p==="style")if(d){for(c in d)!d.hasOwnProperty(c)||g&&g.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in g)g.hasOwnProperty(c)&&d[c]!==g[c]&&(n||(n={}),n[c]=g[c])}else n||(o||(o=[]),o.push(p,n)),n=g;else p==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,d=d?d.__html:void 0,g!=null&&d!==g&&(o=o||[]).push(p,g)):p==="children"?typeof g!="string"&&typeof g!="number"||(o=o||[]).push(p,""+g):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ru.hasOwnProperty(p)?(g!=null&&p==="onScroll"&&jt("scroll",t),o||d===g||(o=[])):(o=o||[]).push(p,g))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};sA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yc(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f4(t,e,n){var r=e.pendingProps;switch(Am(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return kr(e.type)&&ff(),tr(e),null;case 3:return r=e.stateNode,ac(),Ht(Dr),Ht(or),Om(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ni!==null&&(op(Ni),Ni=null))),Zg(t,e),tr(e),null;case 5:Pm(e);var i=Oa(ju.current);if(n=e.type,t!==null&&e.stateNode!=null)iA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return tr(e),null}if(t=Oa(rs.current),hd(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ts]=e,r[Vu]=o,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(i=0;i<ru.length;i++)jt(ru[i],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":Sw(r,o),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jt("invalid",r);break;case"textarea":Rw(r,o),jt("invalid",r)}Ig(n,o),i=null;for(var c in o)if(o.hasOwnProperty(c)){var d=o[c];c==="children"?typeof d=="string"?r.textContent!==d&&(o.suppressHydrationWarning!==!0&&ud(r.textContent,d,t),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&ud(r.textContent,d,t),i=["children",""+d]):Ru.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&jt("scroll",r)}switch(n){case"input":nd(r),bw(r,o,!0);break;case"textarea":nd(r),Nw(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=df)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[ts]=e,t[Vu]=r,rA(t,e,!1,!1),e.stateNode=t;e:{switch(c=Tg(n,r),n){case"dialog":jt("cancel",t),jt("close",t),i=r;break;case"iframe":case"object":case"embed":jt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ru.length;i++)jt(ru[i],t);i=r;break;case"source":jt("error",t),i=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),i=r;break;case"details":jt("toggle",t),i=r;break;case"input":Sw(t,r),i=vg(t,r),jt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=en({},r,{value:void 0}),jt("invalid",t);break;case"textarea":Rw(t,r),i=Ag(t,r),jt("invalid",t);break;default:i=r}Ig(n,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var g=d[o];o==="style"?LE(t,g):o==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&kE(t,g)):o==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&Nu(t,g):typeof g=="number"&&Nu(t,""+g):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ru.hasOwnProperty(o)?g!=null&&o==="onScroll"&&jt("scroll",t):g!=null&&lm(t,o,g,c))}switch(n){case"input":nd(t),bw(t,r,!1);break;case"textarea":nd(t),Nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Go(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ml(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=df)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)sA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Oa(ju.current),Oa(rs.current),hd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ts]=e,(o=r.nodeValue!==n)&&(t=Zr,t!==null))switch(t.tag){case 3:ud(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ud(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ts]=e,e.stateNode=r}return tr(e),null;case 13:if(Ht(Qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&Yr!==null&&e.mode&1&&!(e.flags&128))A_(),sc(),e.flags|=98560,o=!1;else if(o=hd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ge(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ge(317));o[ts]=e}else sc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),o=!1}else Ni!==null&&(op(Ni),Ni=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?Pn===0&&(Pn=3):Wm())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return ac(),Zg(t,e),t===null&&Fu(e.stateNode.containerInfo),tr(e),null;case 10:return Sm(e.type._context),tr(e),null;case 17:return kr(e.type)&&ff(),tr(e),null;case 19:if(Ht(Qt),o=e.memoizedState,o===null)return tr(e),null;if(r=(e.flags&128)!==0,c=o.rendering,c===null)if(r)Yc(o,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=vf(t),c!==null){for(e.flags|=128,Yc(o,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Qt,Qt.current&1|2),e.child}t=t.sibling}o.tail!==null&&fn()>cc&&(e.flags|=128,r=!0,Yc(o,!1),e.lanes=4194304)}else{if(!r)if(t=vf(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!qt)return tr(e),null}else 2*fn()-o.renderingStartTime>cc&&n!==1073741824&&(e.flags|=128,r=!0,Yc(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(n=o.last,n!==null?n.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=fn(),e.sibling=null,n=Qt.current,Dt(Qt,r?n&1|2:n&1),e):(tr(e),null);case 22:case 23:return Hm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$r&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function g4(t,e){switch(Am(e),e.tag){case 1:return kr(e.type)&&ff(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ac(),Ht(Dr),Ht(or),Om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pm(e),null;case 13:if(Ht(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));sc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(Qt),null;case 4:return ac(),null;case 10:return Sm(e.type._context),null;case 22:case 23:return Hm(),null;case 24:return null;default:return null}}var gd=!1,sr=!1,p4=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function Jg(t,e,n){try{n()}catch(r){ln(t,e,r)}}var x2=!1;function m4(t,e){if(Lg=cf,t=u_(),Em(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,d=-1,g=-1,p=0,x=0,E=t,_=null;t:for(;;){for(var I;E!==n||i!==0&&E.nodeType!==3||(d=c+i),E!==o||r!==0&&E.nodeType!==3||(g=c+r),E.nodeType===3&&(c+=E.nodeValue.length),(I=E.firstChild)!==null;)_=E,E=I;for(;;){if(E===t)break t;if(_===n&&++p===i&&(d=c),_===o&&++x===r&&(g=c),(I=E.nextSibling)!==null)break;E=_,_=E.parentNode}E=I}n=d===-1||g===-1?null:{start:d,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fg={focusedElem:t,selectionRange:n},cf=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var b=D.memoizedProps,F=D.memoizedState,R=e.stateNode,S=R.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ti(e.type,b),F);R.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(U){ln(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return D=x2,x2=!1,D}function mu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Jg(e,n,o)}i=i.next}while(i!==r)}}function w0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ep(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oA(t){var e=t.alternate;e!==null&&(t.alternate=null,oA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ts],delete e[Vu],delete e[Ug],delete e[Zb],delete e[Jb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aA(t){return t.tag===5||t.tag===3||t.tag===4}function v2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=df));else if(r!==4&&(t=t.child,t!==null))for(tp(t,e,n),t=t.sibling;t!==null;)tp(t,e,n),t=t.sibling}function np(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(np(t,e,n),t=t.sibling;t!==null;)np(t,e,n),t=t.sibling}var Hn=null,Ri=!1;function ro(t,e,n){for(n=n.child;n!==null;)lA(t,e,n),n=n.sibling}function lA(t,e,n){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(u0,n)}catch{}switch(n.tag){case 5:sr||Nl(n,e);case 6:var r=Hn,i=Ri;Hn=null,ro(t,e,n),Hn=r,Ri=i,Hn!==null&&(Ri?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(Ri?(t=Hn,n=n.stateNode,t.nodeType===8?M1(t.parentNode,n):t.nodeType===1&&M1(t,n),ku(t)):M1(Hn,n.stateNode));break;case 4:r=Hn,i=Ri,Hn=n.stateNode.containerInfo,Ri=!0,ro(t,e,n),Hn=r,Ri=i;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&Jg(n,e,c),i=i.next}while(i!==r)}ro(t,e,n);break;case 1:if(!sr&&(Nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){ln(n,e,d)}ro(t,e,n);break;case 21:ro(t,e,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,ro(t,e,n),sr=r):ro(t,e,n);break;default:ro(t,e,n)}}function E2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p4),e.forEach(function(r){var i=I4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,c=e,d=c;e:for(;d!==null;){switch(d.tag){case 5:Hn=d.stateNode,Ri=!1;break e;case 3:Hn=d.stateNode.containerInfo,Ri=!0;break e;case 4:Hn=d.stateNode.containerInfo,Ri=!0;break e}d=d.return}if(Hn===null)throw Error(ge(160));lA(o,c,i),Hn=null,Ri=!1;var g=i.alternate;g!==null&&(g.return=null),i.return=null}catch(p){ln(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cA(e,t),e=e.sibling}function cA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ii(e,t),Ki(t),r&4){try{mu(3,t,t.return),w0(3,t)}catch(b){ln(t,t.return,b)}try{mu(5,t,t.return)}catch(b){ln(t,t.return,b)}}break;case 1:Ii(e,t),Ki(t),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(Ii(e,t),Ki(t),r&512&&n!==null&&Nl(n,n.return),t.flags&32){var i=t.stateNode;try{Nu(i,"")}catch(b){ln(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,c=n!==null?n.memoizedProps:o,d=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&PE(i,o),Tg(d,c);var p=Tg(d,o);for(c=0;c<g.length;c+=2){var x=g[c],E=g[c+1];x==="style"?LE(i,E):x==="dangerouslySetInnerHTML"?kE(i,E):x==="children"?Nu(i,E):lm(i,x,E,p)}switch(d){case"input":Eg(i,o);break;case"textarea":OE(i,o);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?Ml(i,!!o.multiple,I,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ml(i,!!o.multiple,o.defaultValue,!0):Ml(i,!!o.multiple,o.multiple?[]:"",!1))}i[Vu]=o}catch(b){ln(t,t.return,b)}}break;case 6:if(Ii(e,t),Ki(t),r&4){if(t.stateNode===null)throw Error(ge(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(b){ln(t,t.return,b)}}break;case 3:if(Ii(e,t),Ki(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ku(e.containerInfo)}catch(b){ln(t,t.return,b)}break;case 4:Ii(e,t),Ki(t);break;case 13:Ii(e,t),Ki(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(jm=fn())),r&4&&E2(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(sr=(p=sr)||x,Ii(e,t),sr=p):Ii(e,t),Ki(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!x&&t.mode&1)for(Oe=t,x=t.child;x!==null;){for(E=Oe=x;Oe!==null;){switch(_=Oe,I=_.child,_.tag){case 0:case 11:case 14:case 15:mu(4,_,_.return);break;case 1:Nl(_,_.return);var D=_.stateNode;if(typeof D.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(b){ln(r,n,b)}}break;case 5:Nl(_,_.return);break;case 22:if(_.memoizedState!==null){A2(E);continue}}I!==null?(I.return=_,Oe=I):A2(E)}x=x.sibling}e:for(x=null,E=t;;){if(E.tag===5){if(x===null){x=E;try{i=E.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=E.stateNode,g=E.memoizedProps.style,c=g!=null&&g.hasOwnProperty("display")?g.display:null,d.style.display=ME("display",c))}catch(b){ln(t,t.return,b)}}}else if(E.tag===6){if(x===null)try{E.stateNode.nodeValue=p?"":E.memoizedProps}catch(b){ln(t,t.return,b)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;x===E&&(x=null),E=E.return}x===E&&(x=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Ii(e,t),Ki(t),r&4&&E2(t);break;case 21:break;default:Ii(e,t),Ki(t)}}function Ki(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aA(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nu(i,""),r.flags&=-33);var o=v2(t);np(t,o,i);break;case 3:case 4:var c=r.stateNode.containerInfo,d=v2(t);tp(t,d,c);break;default:throw Error(ge(161))}}catch(g){ln(t,t.return,g)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y4(t,e,n){Oe=t,uA(t)}function uA(t,e,n){for(var r=(t.mode&1)!==0;Oe!==null;){var i=Oe,o=i.child;if(i.tag===22&&r){var c=i.memoizedState!==null||gd;if(!c){var d=i.alternate,g=d!==null&&d.memoizedState!==null||sr;d=gd;var p=sr;if(gd=c,(sr=g)&&!p)for(Oe=i;Oe!==null;)c=Oe,g=c.child,c.tag===22&&c.memoizedState!==null?C2(i):g!==null?(g.return=c,Oe=g):C2(i);for(;o!==null;)Oe=o,uA(o),o=o.sibling;Oe=i,gd=d,sr=p}_2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Oe=o):_2(t)}}function _2(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sr||w0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ti(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&o2(e,o,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o2(e,c,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var E=x.dehydrated;E!==null&&ku(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}sr||e.flags&512&&ep(e)}catch(_){ln(e,e.return,_)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function A2(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function C2(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{w0(4,e)}catch(g){ln(e,n,g)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(g){ln(e,i,g)}}var o=e.return;try{ep(e)}catch(g){ln(e,o,g)}break;case 5:var c=e.return;try{ep(e)}catch(g){ln(e,c,g)}}}catch(g){ln(e,e.return,g)}if(e===t){Oe=null;break}var d=e.sibling;if(d!==null){d.return=e.return,Oe=d;break}Oe=e.return}}var w4=Math.ceil,Af=Ws.ReactCurrentDispatcher,Vm=Ws.ReactCurrentOwner,mi=Ws.ReactCurrentBatchConfig,dt=0,Bn=null,wn=null,qn=0,$r=0,Pl=oa(0),Pn=0,Gu=null,Ga=0,x0=0,Um=0,yu=null,Pr=null,jm=0,cc=1/0,Is=null,Cf=!1,rp=null,Mo=null,pd=!1,To=null,If=0,wu=0,ip=null,Ud=-1,jd=0;function vr(){return dt&6?fn():Ud!==-1?Ud:Ud=fn()}function Lo(t){return t.mode&1?dt&2&&qn!==0?qn&-qn:t4.transition!==null?(jd===0&&(jd=XE()),jd):(t=At,t!==0||(t=window.event,t=t===void 0?16:t_(t.type)),t):1}function Di(t,e,n,r){if(50<wu)throw wu=0,ip=null,Error(ge(185));fh(t,n,r),(!(dt&2)||t!==Bn)&&(t===Bn&&(!(dt&2)&&(x0|=n),Pn===4&&go(t,qn)),Mr(t,r),n===1&&dt===0&&!(e.mode&1)&&(cc=fn()+500,p0&&aa()))}function Mr(t,e){var n=t.callbackNode;tb(t,e);var r=lf(t,t===Bn?qn:0);if(r===0)n!==null&&Dw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dw(n),e===1)t.tag===0?e4(I2.bind(null,t)):v_(I2.bind(null,t)),Yb(function(){!(dt&6)&&aa()}),n=null;else{switch(KE(r)){case 1:n=fm;break;case 4:n=qE;break;case 16:n=af;break;case 536870912:n=$E;break;default:n=af}n=wA(n,hA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hA(t,e){if(Ud=-1,jd=0,dt&6)throw Error(ge(327));var n=t.callbackNode;if(Ul()&&t.callbackNode!==n)return null;var r=lf(t,t===Bn?qn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tf(t,r);else{e=r;var i=dt;dt|=2;var o=fA();(Bn!==t||qn!==e)&&(Is=null,cc=fn()+500,Va(t,e));do try{E4();break}catch(d){dA(t,d)}while(!0);Tm(),Af.current=o,dt=i,wn!==null?e=0:(Bn=null,qn=0,e=Pn)}if(e!==0){if(e===2&&(i=Pg(t),i!==0&&(r=i,e=sp(t,i))),e===1)throw n=Gu,Va(t,0),go(t,r),Mr(t,fn()),n;if(e===6)go(t,r);else{if(i=t.current.alternate,!(r&30)&&!x4(i)&&(e=Tf(t,r),e===2&&(o=Pg(t),o!==0&&(r=o,e=sp(t,o))),e===1))throw n=Gu,Va(t,0),go(t,r),Mr(t,fn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:ba(t,Pr,Is);break;case 3:if(go(t,r),(r&130023424)===r&&(e=jm+500-fn(),10<e)){if(lf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vg(ba.bind(null,t,Pr,Is),e);break}ba(t,Pr,Is);break;case 4:if(go(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var c=31-Oi(r);o=1<<c,c=e[c],c>i&&(i=c),r&=~o}if(r=i,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w4(r/1960))-r,10<r){t.timeoutHandle=Vg(ba.bind(null,t,Pr,Is),r);break}ba(t,Pr,Is);break;case 5:ba(t,Pr,Is);break;default:throw Error(ge(329))}}}return Mr(t,fn()),t.callbackNode===n?hA.bind(null,t):null}function sp(t,e){var n=yu;return t.current.memoizedState.isDehydrated&&(Va(t,e).flags|=256),t=Tf(t,e),t!==2&&(e=Pr,Pr=n,e!==null&&op(e)),t}function op(t){Pr===null?Pr=t:Pr.push.apply(Pr,t)}function x4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ki(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function go(t,e){for(e&=~Um,e&=~x0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Oi(e),r=1<<n;t[n]=-1,e&=~r}}function I2(t){if(dt&6)throw Error(ge(327));Ul();var e=lf(t,0);if(!(e&1))return Mr(t,fn()),null;var n=Tf(t,e);if(t.tag!==0&&n===2){var r=Pg(t);r!==0&&(e=r,n=sp(t,r))}if(n===1)throw n=Gu,Va(t,0),go(t,e),Mr(t,fn()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ba(t,Pr,Is),Mr(t,fn()),null}function zm(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(cc=fn()+500,p0&&aa())}}function qa(t){To!==null&&To.tag===0&&!(dt&6)&&Ul();var e=dt;dt|=1;var n=mi.transition,r=At;try{if(mi.transition=null,At=1,t)return t()}finally{At=r,mi.transition=n,dt=e,!(dt&6)&&aa()}}function Hm(){$r=Pl.current,Ht(Pl)}function Va(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kb(n)),wn!==null)for(n=wn.return;n!==null;){var r=n;switch(Am(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ff();break;case 3:ac(),Ht(Dr),Ht(or),Om();break;case 5:Pm(r);break;case 4:ac();break;case 13:Ht(Qt);break;case 19:Ht(Qt);break;case 10:Sm(r.type._context);break;case 22:case 23:Hm()}n=n.return}if(Bn=t,wn=t=Fo(t.current,null),qn=$r=e,Pn=0,Gu=null,Um=x0=Ga=0,Pr=yu=null,Pa!==null){for(e=0;e<Pa.length;e++)if(n=Pa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=i,r.next=c}n.pending=r}Pa=null}return t}function dA(t,e){do{var n=wn;try{if(Tm(),Fd.current=_f,Ef){for(var r=Jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ef=!1}if(Wa=0,Ln=Rn=Jt=null,pu=!1,zu=0,Vm.current=null,n===null||n.return===null){Pn=1,Gu=e,wn=null;break}e:{var o=t,c=n.return,d=n,g=e;if(e=qn,d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var p=g,x=d,E=x.tag;if(!(x.mode&1)&&(E===0||E===11||E===15)){var _=x.alternate;_?(x.updateQueue=_.updateQueue,x.memoizedState=_.memoizedState,x.lanes=_.lanes):(x.updateQueue=null,x.memoizedState=null)}var I=d2(c);if(I!==null){I.flags&=-257,f2(I,c,d,o,e),I.mode&1&&h2(o,p,e),e=I,g=p;var D=e.updateQueue;if(D===null){var b=new Set;b.add(g),e.updateQueue=b}else D.add(g);break e}else{if(!(e&1)){h2(o,p,e),Wm();break e}g=Error(ge(426))}}else if(qt&&d.mode&1){var F=d2(c);if(F!==null){!(F.flags&65536)&&(F.flags|=256),f2(F,c,d,o,e),Cm(lc(g,d));break e}}o=g=lc(g,d),Pn!==4&&(Pn=2),yu===null?yu=[o]:yu.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=K_(o,g,e);s2(o,R);break e;case 1:d=g;var S=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Mo===null||!Mo.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var U=Y_(o,d,e);s2(o,U);break e}}o=o.return}while(o!==null)}pA(n)}catch(Y){e=Y,wn===n&&n!==null&&(wn=n=n.return);continue}break}while(!0)}function fA(){var t=Af.current;return Af.current=_f,t===null?_f:t}function Wm(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Bn===null||!(Ga&268435455)&&!(x0&268435455)||go(Bn,qn)}function Tf(t,e){var n=dt;dt|=2;var r=fA();(Bn!==t||qn!==e)&&(Is=null,Va(t,e));do try{v4();break}catch(i){dA(t,i)}while(!0);if(Tm(),dt=n,Af.current=r,wn!==null)throw Error(ge(261));return Bn=null,qn=0,Pn}function v4(){for(;wn!==null;)gA(wn)}function E4(){for(;wn!==null&&!q3();)gA(wn)}function gA(t){var e=yA(t.alternate,t,$r);t.memoizedProps=t.pendingProps,e===null?pA(t):wn=e,Vm.current=null}function pA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=g4(n,e),n!==null){n.flags&=32767,wn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,wn=null;return}}else if(n=f4(n,e,$r),n!==null){wn=n;return}if(e=e.sibling,e!==null){wn=e;return}wn=e=t}while(e!==null);Pn===0&&(Pn=5)}function ba(t,e,n){var r=At,i=mi.transition;try{mi.transition=null,At=1,_4(t,e,n,r)}finally{mi.transition=i,At=r}return null}function _4(t,e,n,r){do Ul();while(To!==null);if(dt&6)throw Error(ge(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(nb(t,o),t===Bn&&(wn=Bn=null,qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pd||(pd=!0,wA(af,function(){return Ul(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=mi.transition,mi.transition=null;var c=At;At=1;var d=dt;dt|=4,Vm.current=null,m4(t,n),cA(n,t),zb(Fg),cf=!!Lg,Fg=Lg=null,t.current=n,y4(n),$3(),dt=d,At=c,mi.transition=o}else t.current=n;if(pd&&(pd=!1,To=t,If=i),o=t.pendingLanes,o===0&&(Mo=null),Y3(n.stateNode),Mr(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cf)throw Cf=!1,t=rp,rp=null,t;return If&1&&t.tag!==0&&Ul(),o=t.pendingLanes,o&1?t===ip?wu++:(wu=0,ip=t):wu=0,aa(),null}function Ul(){if(To!==null){var t=KE(If),e=mi.transition,n=At;try{if(mi.transition=null,At=16>t?16:t,To===null)var r=!1;else{if(t=To,To=null,If=0,dt&6)throw Error(ge(331));var i=dt;for(dt|=4,Oe=t.current;Oe!==null;){var o=Oe,c=o.child;if(Oe.flags&16){var d=o.deletions;if(d!==null){for(var g=0;g<d.length;g++){var p=d[g];for(Oe=p;Oe!==null;){var x=Oe;switch(x.tag){case 0:case 11:case 15:mu(8,x,o)}var E=x.child;if(E!==null)E.return=x,Oe=E;else for(;Oe!==null;){x=Oe;var _=x.sibling,I=x.return;if(oA(x),x===p){Oe=null;break}if(_!==null){_.return=I,Oe=_;break}Oe=I}}}var D=o.alternate;if(D!==null){var b=D.child;if(b!==null){D.child=null;do{var F=b.sibling;b.sibling=null,b=F}while(b!==null)}}Oe=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,Oe=c;else e:for(;Oe!==null;){if(o=Oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mu(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,Oe=R;break e}Oe=o.return}}var S=t.current;for(Oe=S;Oe!==null;){c=Oe;var O=c.child;if(c.subtreeFlags&2064&&O!==null)O.return=c,Oe=O;else e:for(c=S;Oe!==null;){if(d=Oe,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:w0(9,d)}}catch(Y){ln(d,d.return,Y)}if(d===c){Oe=null;break e}var U=d.sibling;if(U!==null){U.return=d.return,Oe=U;break e}Oe=d.return}}if(dt=i,aa(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(u0,t)}catch{}r=!0}return r}finally{At=n,mi.transition=e}}return!1}function T2(t,e,n){e=lc(n,e),e=K_(t,e,1),t=ko(t,e,1),e=vr(),t!==null&&(fh(t,1,e),Mr(t,e))}function ln(t,e,n){if(t.tag===3)T2(t,t,n);else for(;e!==null;){if(e.tag===3){T2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mo===null||!Mo.has(r))){t=lc(n,t),t=Y_(e,t,1),e=ko(e,t,1),t=vr(),e!==null&&(fh(e,1,t),Mr(e,t));break}}e=e.return}}function A4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vr(),t.pingedLanes|=t.suspendedLanes&n,Bn===t&&(qn&n)===n&&(Pn===4||Pn===3&&(qn&130023424)===qn&&500>fn()-jm?Va(t,0):Um|=n),Mr(t,e)}function mA(t,e){e===0&&(t.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var n=vr();t=Ms(t,e),t!==null&&(fh(t,e,n),Mr(t,n))}function C4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mA(t,n)}function I4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),mA(t,n)}var yA;yA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dr.current)Or=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Or=!1,d4(t,e,n);Or=!!(t.flags&131072)}else Or=!1,qt&&e.flags&1048576&&E_(e,mf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vd(t,e),t=e.pendingProps;var i=ic(e,or.current);Vl(e,n),i=km(null,e,r,t,i,n);var o=Mm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(o=!0,gf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rm(e),i.updater=y0,e.stateNode=i,i._reactInternals=e,qg(e,r,t,n),e=Kg(null,e,r,!0,o,n)):(e.tag=0,qt&&o&&_m(e),pr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=S4(r),t=Ti(r,t),i){case 0:e=Xg(null,e,r,t,n);break e;case 1:e=m2(null,e,r,t,n);break e;case 11:e=g2(null,e,r,t,n);break e;case 14:e=p2(null,e,r,Ti(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ti(r,i),Xg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ti(r,i),m2(t,e,r,i,n);case 3:e:{if(eA(e),t===null)throw Error(ge(387));r=e.pendingProps,o=e.memoizedState,i=o.element,S_(t,e),xf(e,r,null,n);var c=e.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=lc(Error(ge(423)),e),e=y2(t,e,r,n,i);break e}else if(r!==i){i=lc(Error(ge(424)),e),e=y2(t,e,r,n,i);break e}else for(Yr=Do(e.stateNode.containerInfo.firstChild),Zr=e,qt=!0,Ni=null,n=I_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sc(),r===i){e=Ls(t,e,n);break e}pr(t,e,r,n)}e=e.child}return e;case 5:return b_(e),t===null&&Hg(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,c=i.children,Bg(r,i)?c=null:o!==null&&Bg(r,o)&&(e.flags|=32),J_(t,e),pr(t,e,c,n),e.child;case 6:return t===null&&Hg(e),null;case 13:return tA(t,e,n);case 4:return Nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oc(e,null,r,n):pr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ti(r,i),g2(t,e,r,i,n);case 7:return pr(t,e,e.pendingProps,n),e.child;case 8:return pr(t,e,e.pendingProps.children,n),e.child;case 12:return pr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,c=i.value,Dt(yf,r._currentValue),r._currentValue=c,o!==null)if(ki(o.value,c)){if(o.children===i.children&&!Dr.current){e=Ls(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){c=o.child;for(var g=d.firstContext;g!==null;){if(g.context===r){if(o.tag===1){g=Ps(-1,n&-n),g.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?g.next=g:(g.next=x.next,x.next=g),p.pending=g}}o.lanes|=n,g=o.alternate,g!==null&&(g.lanes|=n),Wg(o.return,n,e),d.lanes|=n;break}g=g.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(ge(341));c.lanes|=n,d=c.alternate,d!==null&&(d.lanes|=n),Wg(c,n,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}pr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vl(e,n),i=yi(i),r=r(i),e.flags|=1,pr(t,e,r,n),e.child;case 14:return r=e.type,i=Ti(r,e.pendingProps),i=Ti(r.type,i),p2(t,e,r,i,n);case 15:return Q_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ti(r,i),Vd(t,e),e.tag=1,kr(r)?(t=!0,gf(e)):t=!1,Vl(e,n),X_(e,r,i),qg(e,r,i,n),Kg(null,e,r,!0,t,n);case 19:return nA(t,e,n);case 22:return Z_(t,e,n)}throw Error(ge(156,e.tag))};function wA(t,e){return GE(t,e)}function T4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(t,e,n,r){return new T4(t,e,n,r)}function Gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function S4(t){if(typeof t=="function")return Gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===um)return 11;if(t===hm)return 14}return 2}function Fo(t,e){var n=t.alternate;return n===null?(n=pi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zd(t,e,n,r,i,o){var c=2;if(r=t,typeof t=="function")Gm(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case El:return Ua(n.children,i,o,e);case cm:c=8,i|=8;break;case mg:return t=pi(12,n,e,i|2),t.elementType=mg,t.lanes=o,t;case yg:return t=pi(13,n,e,i),t.elementType=yg,t.lanes=o,t;case wg:return t=pi(19,n,e,i),t.elementType=wg,t.lanes=o,t;case bE:return v0(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TE:c=10;break e;case SE:c=9;break e;case um:c=11;break e;case hm:c=14;break e;case co:c=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=pi(c,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ua(t,e,n,r){return t=pi(7,t,r,e),t.lanes=n,t}function v0(t,e,n,r){return t=pi(22,t,r,e),t.elementType=bE,t.lanes=n,t.stateNode={isHidden:!1},t}function H1(t,e,n){return t=pi(6,t,null,e),t.lanes=n,t}function W1(t,e,n){return e=pi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C1(0),this.expirationTimes=C1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qm(t,e,n,r,i,o,c,d,g){return t=new b4(t,e,n,d,g),e===1?(e=1,o===!0&&(e|=8)):e=0,o=pi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rm(o),t}function R4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xA(t){if(!t)return qo;t=t._reactInternals;e:{if(nl(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(kr(n))return x_(t,n,e)}return e}function vA(t,e,n,r,i,o,c,d,g){return t=qm(n,r,!0,t,i,o,c,d,g),t.context=xA(null),n=t.current,r=vr(),i=Lo(n),o=Ps(r,i),o.callback=e??null,ko(n,o,i),t.current.lanes=i,fh(t,i,r),Mr(t,r),t}function E0(t,e,n,r){var i=e.current,o=vr(),c=Lo(i);return n=xA(n),e.context===null?e.context=n:e.pendingContext=n,e=Ps(o,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ko(i,e,c),t!==null&&(Di(t,i,c,o),Ld(t,i,c)),c}function Sf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $m(t,e){S2(t,e),(t=t.alternate)&&S2(t,e)}function N4(){return null}var EA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xm(t){this._internalRoot=t}_0.prototype.render=Xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));E0(t,e,null,null)};_0.prototype.unmount=Xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qa(function(){E0(null,t,null,null)}),e[ks]=null}};function _0(t){this._internalRoot=t}_0.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fo.length&&e!==0&&e<fo[n].priority;n++);fo.splice(n,0,t),n===0&&e_(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function A0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b2(){}function P4(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=Sf(c);o.call(p)}}var c=vA(e,r,t,0,null,!1,!1,"",b2);return t._reactRootContainer=c,t[ks]=c.current,Fu(t.nodeType===8?t.parentNode:t),qa(),c}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var p=Sf(g);d.call(p)}}var g=qm(t,0,!1,null,null,!1,!1,"",b2);return t._reactRootContainer=g,t[ks]=g.current,Fu(t.nodeType===8?t.parentNode:t),qa(function(){E0(e,g,n,r)}),g}function C0(t,e,n,r,i){var o=n._reactRootContainer;if(o){var c=o;if(typeof i=="function"){var d=i;i=function(){var g=Sf(c);d.call(g)}}E0(e,c,t,i)}else c=P4(n,e,t,i,r);return Sf(c)}YE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nu(e.pendingLanes);n!==0&&(gm(e,n|1),Mr(e,fn()),!(dt&6)&&(cc=fn()+500,aa()))}break;case 13:qa(function(){var r=Ms(t,1);if(r!==null){var i=vr();Di(r,t,1,i)}}),$m(t,1)}};pm=function(t){if(t.tag===13){var e=Ms(t,134217728);if(e!==null){var n=vr();Di(e,t,134217728,n)}$m(t,134217728)}};QE=function(t){if(t.tag===13){var e=Lo(t),n=Ms(t,e);if(n!==null){var r=vr();Di(n,t,e,r)}$m(t,e)}};ZE=function(){return At};JE=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};bg=function(t,e,n){switch(e){case"input":if(Eg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=g0(r);if(!i)throw Error(ge(90));NE(r),Eg(r,i)}}}break;case"textarea":OE(t,n);break;case"select":e=n.value,e!=null&&Ml(t,!!n.multiple,e,!1)}};VE=zm;UE=qa;var O4={usingClientEntryPoint:!1,Events:[ph,Il,g0,FE,BE,zm]},Qc={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D4={bundleType:Qc.bundleType,version:Qc.version,rendererPackageName:Qc.rendererPackageName,rendererConfig:Qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HE(t),t===null?null:t.stateNode},findFiberByHostInstance:Qc.findFiberByHostInstance||N4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{u0=md.inject(D4),ns=md}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(ge(200));return R4(t,e,null,n)};ri.createRoot=function(t,e){if(!Km(t))throw Error(ge(299));var n=!1,r="",i=EA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qm(t,1,!1,null,null,n,!1,r,i),t[ks]=e.current,Fu(t.nodeType===8?t.parentNode:t),new Xm(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=HE(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return qa(t)};ri.hydrate=function(t,e,n){if(!A0(e))throw Error(ge(200));return C0(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",c=EA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=vA(e,null,t,1,n??null,i,!1,o,c),t[ks]=e.current,Fu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _0(e)};ri.render=function(t,e,n){if(!A0(e))throw Error(ge(200));return C0(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!A0(t))throw Error(ge(40));return t._reactRootContainer?(qa(function(){C0(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};ri.unstable_batchedUpdates=zm;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!A0(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return C0(t,e,n,!1,r)};ri.version="18.3.1-next-f1338f8080-20240426";function _A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_A)}catch(t){console.error(t)}}_A(),_E.exports=ri;var yh=_E.exports;const AA=tm(yh);var CA,R2=yh;CA=R2.createRoot,R2.hydrateRoot;const k4=1,M4=1e6;let G1=0;function L4(){return G1=(G1+1)%Number.MAX_SAFE_INTEGER,G1.toString()}const q1=new Map,N2=t=>{if(q1.has(t))return;const e=setTimeout(()=>{q1.delete(t),xu({type:"REMOVE_TOAST",toastId:t})},M4);q1.set(t,e)},F4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,k4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?N2(n):t.toasts.forEach(r=>{N2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Hd=[];let Wd={toasts:[]};function xu(t){Wd=F4(Wd,t),Hd.forEach(e=>{e(Wd)})}function yr({...t}){const e=L4(),n=i=>xu({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>xu({type:"DISMISS_TOAST",toastId:e});return xu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function B4(){const[t,e]=W.useState(Wd);return W.useEffect(()=>(Hd.push(e),()=>{const n=Hd.indexOf(e);n>-1&&Hd.splice(n,1)}),[t]),{...t,toast:yr,dismiss:n=>xu({type:"DISMISS_TOAST",toastId:n})}}function Nn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function V4(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function IA(...t){return e=>t.forEach(n=>V4(n,e))}function Mi(...t){return W.useCallback(IA(...t),t)}function U4(t,e=[]){let n=[];function r(o,c){const d=W.createContext(c),g=n.length;n=[...n,c];function p(E){const{scope:_,children:I,...D}=E,b=(_==null?void 0:_[t][g])||d,F=W.useMemo(()=>D,Object.values(D));return z.jsx(b.Provider,{value:F,children:I})}function x(E,_){const I=(_==null?void 0:_[t][g])||d,D=W.useContext(I);if(D)return D;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return p.displayName=o+"Provider",[p,x]}const i=()=>{const o=n.map(c=>W.createContext(c));return function(d){const g=(d==null?void 0:d[t])||o;return W.useMemo(()=>({[`__scope${t}`]:{...d,[t]:g}}),[d,g])}};return i.scopeName=t,[r,j4(i,...e)]}function j4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((d,{useScope:g,scopeName:p})=>{const E=g(o)[`__scope${p}`];return{...d,...E}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var qu=W.forwardRef((t,e)=>{const{children:n,...r}=t,i=W.Children.toArray(n),o=i.find(z4);if(o){const c=o.props.children,d=i.map(g=>g===o?W.Children.count(c)>1?W.Children.only(null):W.isValidElement(c)?c.props.children:null:g);return z.jsx(ap,{...r,ref:e,children:W.isValidElement(c)?W.cloneElement(c,void 0,d):null})}return z.jsx(ap,{...r,ref:e,children:n})});qu.displayName="Slot";var ap=W.forwardRef((t,e)=>{const{children:n,...r}=t;if(W.isValidElement(n)){const i=W4(n);return W.cloneElement(n,{...H4(r,n.props),ref:e?IA(e,i):i})}return W.Children.count(n)>1?W.Children.only(null):null});ap.displayName="SlotClone";var TA=({children:t})=>z.jsx(z.Fragment,{children:t});function z4(t){return W.isValidElement(t)&&t.type===TA}function H4(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...d)=>{o(...d),i(...d)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function W4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function G4(t){const e=t+"CollectionProvider",[n,r]=U4(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=I=>{const{scope:D,children:b}=I,F=we.useRef(null),R=we.useRef(new Map).current;return z.jsx(i,{scope:D,itemMap:R,collectionRef:F,children:b})};c.displayName=e;const d=t+"CollectionSlot",g=we.forwardRef((I,D)=>{const{scope:b,children:F}=I,R=o(d,b),S=Mi(D,R.collectionRef);return z.jsx(qu,{ref:S,children:F})});g.displayName=d;const p=t+"CollectionItemSlot",x="data-radix-collection-item",E=we.forwardRef((I,D)=>{const{scope:b,children:F,...R}=I,S=we.useRef(null),O=Mi(D,S),U=o(p,b);return we.useEffect(()=>(U.itemMap.set(S,{ref:S,...R}),()=>void U.itemMap.delete(S))),z.jsx(qu,{[x]:"",ref:O,children:F})});E.displayName=p;function _(I){const D=o(t+"CollectionConsumer",I);return we.useCallback(()=>{const F=D.collectionRef.current;if(!F)return[];const R=Array.from(F.querySelectorAll(`[${x}]`));return Array.from(D.itemMap.values()).sort((U,Y)=>R.indexOf(U.ref.current)-R.indexOf(Y.ref.current))},[D.collectionRef,D.itemMap])}return[{Provider:c,Slot:g,ItemSlot:E},_,r]}function SA(t,e=[]){let n=[];function r(o,c){const d=W.createContext(c),g=n.length;n=[...n,c];const p=E=>{var R;const{scope:_,children:I,...D}=E,b=((R=_==null?void 0:_[t])==null?void 0:R[g])||d,F=W.useMemo(()=>D,Object.values(D));return z.jsx(b.Provider,{value:F,children:I})};p.displayName=o+"Provider";function x(E,_){var b;const I=((b=_==null?void 0:_[t])==null?void 0:b[g])||d,D=W.useContext(I);if(D)return D;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return[p,x]}const i=()=>{const o=n.map(c=>W.createContext(c));return function(d){const g=(d==null?void 0:d[t])||o;return W.useMemo(()=>({[`__scope${t}`]:{...d,[t]:g}}),[d,g])}};return i.scopeName=t,[r,q4(i,...e)]}function q4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((d,{useScope:g,scopeName:p})=>{const E=g(o)[`__scope${p}`];return{...d,...E}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var $4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ar=$4.reduce((t,e)=>{const n=W.forwardRef((r,i)=>{const{asChild:o,...c}=r,d=o?qu:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),z.jsx(d,{...c,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function bA(t,e){t&&yh.flushSync(()=>t.dispatchEvent(e))}function hs(t){const e=W.useRef(t);return W.useEffect(()=>{e.current=t}),W.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function X4(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t);W.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var K4="DismissableLayer",lp="dismissableLayer.update",Y4="dismissableLayer.pointerDownOutside",Q4="dismissableLayer.focusOutside",P2,RA=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ym=W.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:d,...g}=t,p=W.useContext(RA),[x,E]=W.useState(null),_=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=W.useState({}),D=Mi(e,k=>E(k)),b=Array.from(p.layers),[F]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),R=b.indexOf(F),S=x?b.indexOf(x):-1,O=p.layersWithOutsidePointerEventsDisabled.size>0,U=S>=R,Y=J4(k=>{const M=k.target,L=[...p.branches].some(G=>G.contains(M));!U||L||(i==null||i(k),c==null||c(k),k.defaultPrevented||d==null||d())},_),Z=eR(k=>{const M=k.target;[...p.branches].some(G=>G.contains(M))||(o==null||o(k),c==null||c(k),k.defaultPrevented||d==null||d())},_);return X4(k=>{S===p.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&d&&(k.preventDefault(),d()))},_),W.useEffect(()=>{if(x)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(P2=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(x)),p.layers.add(x),O2(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=P2)}},[x,_,n,p]),W.useEffect(()=>()=>{x&&(p.layers.delete(x),p.layersWithOutsidePointerEventsDisabled.delete(x),O2())},[x,p]),W.useEffect(()=>{const k=()=>I({});return document.addEventListener(lp,k),()=>document.removeEventListener(lp,k)},[]),z.jsx(Ar.div,{...g,ref:D,style:{pointerEvents:O?U?"auto":"none":void 0,...t.style},onFocusCapture:Nn(t.onFocusCapture,Z.onFocusCapture),onBlurCapture:Nn(t.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:Nn(t.onPointerDownCapture,Y.onPointerDownCapture)})});Ym.displayName=K4;var Z4="DismissableLayerBranch",NA=W.forwardRef((t,e)=>{const n=W.useContext(RA),r=W.useRef(null),i=Mi(e,r);return W.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),z.jsx(Ar.div,{...t,ref:i})});NA.displayName=Z4;function J4(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t),r=W.useRef(!1),i=W.useRef(()=>{});return W.useEffect(()=>{const o=d=>{if(d.target&&!r.current){let g=function(){PA(Y4,n,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=g,e.addEventListener("click",i.current,{once:!0})):g()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function eR(t,e=globalThis==null?void 0:globalThis.document){const n=hs(t),r=W.useRef(!1);return W.useEffect(()=>{const i=o=>{o.target&&!r.current&&PA(Q4,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function O2(){const t=new CustomEvent(lp);document.dispatchEvent(t)}function PA(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bA(i,o):i.dispatchEvent(o)}var tR=Ym,nR=NA,$a=globalThis!=null&&globalThis.document?W.useLayoutEffect:()=>{},rR="Portal",OA=W.forwardRef((t,e)=>{var d;const{container:n,...r}=t,[i,o]=W.useState(!1);$a(()=>o(!0),[]);const c=n||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?AA.createPortal(z.jsx(Ar.div,{...r,ref:e}),c):null});OA.displayName=rR;function iR(t,e){return W.useReducer((n,r)=>e[n][r]??n,t)}var Qm=t=>{const{present:e,children:n}=t,r=sR(e),i=typeof n=="function"?n({present:r.isPresent}):W.Children.only(n),o=Mi(r.ref,oR(i));return typeof n=="function"||r.isPresent?W.cloneElement(i,{ref:o}):null};Qm.displayName="Presence";function sR(t){const[e,n]=W.useState(),r=W.useRef({}),i=W.useRef(t),o=W.useRef("none"),c=t?"mounted":"unmounted",[d,g]=iR(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.useEffect(()=>{const p=yd(r.current);o.current=d==="mounted"?p:"none"},[d]),$a(()=>{const p=r.current,x=i.current;if(x!==t){const _=o.current,I=yd(p);t?g("MOUNT"):I==="none"||(p==null?void 0:p.display)==="none"?g("UNMOUNT"):g(x&&_!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,g]),$a(()=>{if(e){let p;const x=e.ownerDocument.defaultView??window,E=I=>{const b=yd(r.current).includes(I.animationName);if(I.target===e&&b&&(g("ANIMATION_END"),!i.current)){const F=e.style.animationFillMode;e.style.animationFillMode="forwards",p=x.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=F)})}},_=I=>{I.target===e&&(o.current=yd(r.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{x.clearTimeout(p),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else g("ANIMATION_END")},[e,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:W.useCallback(p=>{p&&(r.current=getComputedStyle(p)),n(p)},[])}}function yd(t){return(t==null?void 0:t.animationName)||"none"}function oR(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function aR({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=lR({defaultProp:e,onChange:n}),o=t!==void 0,c=o?t:r,d=hs(n),g=W.useCallback(p=>{if(o){const E=typeof p=="function"?p(t):p;E!==t&&d(E)}else i(p)},[o,t,i,d]);return[c,g]}function lR({defaultProp:t,onChange:e}){const n=W.useState(t),[r]=n,i=W.useRef(r),o=hs(e);return W.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var cR="VisuallyHidden",I0=W.forwardRef((t,e)=>z.jsx(Ar.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));I0.displayName=cR;var uR=I0,Zm="ToastProvider",[Jm,hR,dR]=G4("Toast"),[DA,VF]=SA("Toast",[dR]),[fR,T0]=DA(Zm),kA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:c}=t,[d,g]=W.useState(null),[p,x]=W.useState(0),E=W.useRef(!1),_=W.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Zm}\`. Expected non-empty \`string\`.`),z.jsx(Jm.Provider,{scope:e,children:z.jsx(fR,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:p,viewport:d,onViewportChange:g,onToastAdd:W.useCallback(()=>x(I=>I+1),[]),onToastRemove:W.useCallback(()=>x(I=>I-1),[]),isFocusedToastEscapeKeyDownRef:E,isClosePausedRef:_,children:c})})};kA.displayName=Zm;var MA="ToastViewport",gR=["F8"],cp="toast.viewportPause",up="toast.viewportResume",LA=W.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=gR,label:i="Notifications ({hotkey})",...o}=t,c=T0(MA,n),d=hR(n),g=W.useRef(null),p=W.useRef(null),x=W.useRef(null),E=W.useRef(null),_=Mi(e,E,c.onViewportChange),I=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=c.toastCount>0;W.useEffect(()=>{const F=R=>{var O;r.length!==0&&r.every(U=>R[U]||R.code===U)&&((O=E.current)==null||O.focus())};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[r]),W.useEffect(()=>{const F=g.current,R=E.current;if(D&&F&&R){const S=()=>{if(!c.isClosePausedRef.current){const Z=new CustomEvent(cp);R.dispatchEvent(Z),c.isClosePausedRef.current=!0}},O=()=>{if(c.isClosePausedRef.current){const Z=new CustomEvent(up);R.dispatchEvent(Z),c.isClosePausedRef.current=!1}},U=Z=>{!F.contains(Z.relatedTarget)&&O()},Y=()=>{F.contains(document.activeElement)||O()};return F.addEventListener("focusin",S),F.addEventListener("focusout",U),F.addEventListener("pointermove",S),F.addEventListener("pointerleave",Y),window.addEventListener("blur",S),window.addEventListener("focus",O),()=>{F.removeEventListener("focusin",S),F.removeEventListener("focusout",U),F.removeEventListener("pointermove",S),F.removeEventListener("pointerleave",Y),window.removeEventListener("blur",S),window.removeEventListener("focus",O)}}},[D,c.isClosePausedRef]);const b=W.useCallback(({tabbingDirection:F})=>{const S=d().map(O=>{const U=O.ref.current,Y=[U,...SR(U)];return F==="forwards"?Y:Y.reverse()});return(F==="forwards"?S.reverse():S).flat()},[d]);return W.useEffect(()=>{const F=E.current;if(F){const R=S=>{var Y,Z,k;const O=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!O){const M=document.activeElement,L=S.shiftKey;if(S.target===F&&L){(Y=p.current)==null||Y.focus();return}const $=b({tabbingDirection:L?"backwards":"forwards"}),j=$.findIndex(he=>he===M);$1($.slice(j+1))?S.preventDefault():L?(Z=p.current)==null||Z.focus():(k=x.current)==null||k.focus()}};return F.addEventListener("keydown",R),()=>F.removeEventListener("keydown",R)}},[d,b]),z.jsxs(nR,{ref:g,role:"region","aria-label":i.replace("{hotkey}",I),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&z.jsx(hp,{ref:p,onFocusFromOutsideViewport:()=>{const F=b({tabbingDirection:"forwards"});$1(F)}}),z.jsx(Jm.Slot,{scope:n,children:z.jsx(Ar.ol,{tabIndex:-1,...o,ref:_})}),D&&z.jsx(hp,{ref:x,onFocusFromOutsideViewport:()=>{const F=b({tabbingDirection:"backwards"});$1(F)}})]})});LA.displayName=MA;var FA="ToastFocusProxy",hp=W.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=T0(FA,n);return z.jsx(I0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:c=>{var p;const d=c.relatedTarget;!((p=o.viewport)!=null&&p.contains(d))&&r()}})});hp.displayName=FA;var S0="Toast",pR="toast.swipeStart",mR="toast.swipeMove",yR="toast.swipeCancel",wR="toast.swipeEnd",BA=W.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...c}=t,[d=!0,g]=aR({prop:r,defaultProp:i,onChange:o});return z.jsx(Qm,{present:n||d,children:z.jsx(ER,{open:d,...c,ref:e,onClose:()=>g(!1),onPause:hs(t.onPause),onResume:hs(t.onResume),onSwipeStart:Nn(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Nn(t.onSwipeMove,p=>{const{x,y:E}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${E}px`)}),onSwipeCancel:Nn(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Nn(t.onSwipeEnd,p=>{const{x,y:E}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${E}px`),g(!1)})})})});BA.displayName=S0;var[xR,vR]=DA(S0,{onClose(){}}),ER=W.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:c,onEscapeKeyDown:d,onPause:g,onResume:p,onSwipeStart:x,onSwipeMove:E,onSwipeCancel:_,onSwipeEnd:I,...D}=t,b=T0(S0,n),[F,R]=W.useState(null),S=Mi(e,he=>R(he)),O=W.useRef(null),U=W.useRef(null),Y=i||b.duration,Z=W.useRef(0),k=W.useRef(Y),M=W.useRef(0),{onToastAdd:L,onToastRemove:G}=b,X=hs(()=>{var J;(F==null?void 0:F.contains(document.activeElement))&&((J=b.viewport)==null||J.focus()),c()}),$=W.useCallback(he=>{!he||he===1/0||(window.clearTimeout(M.current),Z.current=new Date().getTime(),M.current=window.setTimeout(X,he))},[X]);W.useEffect(()=>{const he=b.viewport;if(he){const J=()=>{$(k.current),p==null||p()},Ie=()=>{const ye=new Date().getTime()-Z.current;k.current=k.current-ye,window.clearTimeout(M.current),g==null||g()};return he.addEventListener(cp,Ie),he.addEventListener(up,J),()=>{he.removeEventListener(cp,Ie),he.removeEventListener(up,J)}}},[b.viewport,Y,g,p,$]),W.useEffect(()=>{o&&!b.isClosePausedRef.current&&$(Y)},[o,Y,b.isClosePausedRef,$]),W.useEffect(()=>(L(),()=>G()),[L,G]);const j=W.useMemo(()=>F?GA(F):null,[F]);return b.viewport?z.jsxs(z.Fragment,{children:[j&&z.jsx(_R,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),z.jsx(xR,{scope:n,onClose:X,children:yh.createPortal(z.jsx(Jm.ItemSlot,{scope:n,children:z.jsx(tR,{asChild:!0,onEscapeKeyDown:Nn(d,()=>{b.isFocusedToastEscapeKeyDownRef.current||X(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:z.jsx(Ar.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":b.swipeDirection,...D,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Nn(t.onKeyDown,he=>{he.key==="Escape"&&(d==null||d(he.nativeEvent),he.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:Nn(t.onPointerDown,he=>{he.button===0&&(O.current={x:he.clientX,y:he.clientY})}),onPointerMove:Nn(t.onPointerMove,he=>{if(!O.current)return;const J=he.clientX-O.current.x,Ie=he.clientY-O.current.y,ye=!!U.current,re=["left","right"].includes(b.swipeDirection),fe=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,Te=re?fe(0,J):0,Se=re?0:fe(0,Ie),Ce=he.pointerType==="touch"?10:2,De={x:Te,y:Se},Ke={originalEvent:he,delta:De};ye?(U.current=De,wd(mR,E,Ke,{discrete:!1})):D2(De,b.swipeDirection,Ce)?(U.current=De,wd(pR,x,Ke,{discrete:!1}),he.target.setPointerCapture(he.pointerId)):(Math.abs(J)>Ce||Math.abs(Ie)>Ce)&&(O.current=null)}),onPointerUp:Nn(t.onPointerUp,he=>{const J=U.current,Ie=he.target;if(Ie.hasPointerCapture(he.pointerId)&&Ie.releasePointerCapture(he.pointerId),U.current=null,O.current=null,J){const ye=he.currentTarget,re={originalEvent:he,delta:J};D2(J,b.swipeDirection,b.swipeThreshold)?wd(wR,I,re,{discrete:!0}):wd(yR,_,re,{discrete:!0}),ye.addEventListener("click",fe=>fe.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),_R=t=>{const{__scopeToast:e,children:n,...r}=t,i=T0(S0,e),[o,c]=W.useState(!1),[d,g]=W.useState(!1);return IR(()=>c(!0)),W.useEffect(()=>{const p=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(p)},[]),d?null:z.jsx(OA,{asChild:!0,children:z.jsx(I0,{...r,children:o&&z.jsxs(z.Fragment,{children:[i.label," ",n]})})})},AR="ToastTitle",VA=W.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return z.jsx(Ar.div,{...r,ref:e})});VA.displayName=AR;var CR="ToastDescription",UA=W.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return z.jsx(Ar.div,{...r,ref:e})});UA.displayName=CR;var jA="ToastAction",zA=W.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?z.jsx(WA,{altText:n,asChild:!0,children:z.jsx(ey,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${jA}\`. Expected non-empty \`string\`.`),null)});zA.displayName=jA;var HA="ToastClose",ey=W.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=vR(HA,n);return z.jsx(WA,{asChild:!0,children:z.jsx(Ar.button,{type:"button",...r,ref:e,onClick:Nn(t.onClick,i.onClose)})})});ey.displayName=HA;var WA=W.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return z.jsx(Ar.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function GA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),TR(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...GA(r))}}),e}function wd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bA(i,o):i.dispatchEvent(o)}var D2=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function IR(t=()=>{}){const e=hs(t);$a(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function TR(t){return t.nodeType===t.ELEMENT_NODE}function SR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var bR=kA,qA=LA,$A=BA,XA=VA,KA=UA,YA=zA,QA=ey;function ZA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ZA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function JA(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ZA(t))&&(r&&(r+=" "),r+=e);return r}const k2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,M2=JA,ty=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return M2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,c=Object.keys(i).map(p=>{const x=n==null?void 0:n[p],E=o==null?void 0:o[p];if(x===null)return null;const _=k2(x)||k2(E);return i[p][_]}),d=n&&Object.entries(n).reduce((p,x)=>{let[E,_]=x;return _===void 0||(p[E]=_),p},{}),g=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,x)=>{let{class:E,className:_,...I}=x;return Object.entries(I).every(D=>{let[b,F]=D;return Array.isArray(F)?F.includes({...o,...d}[b]):{...o,...d}[b]===F})?[...p,E,_]:p},[]);return M2(t,c,g,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=W.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...d},g)=>W.createElement("svg",{ref:g,...NR,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eC("lucide",i),...d},[...c.map(([p,x])=>W.createElement(p,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=(t,e)=>{const n=W.forwardRef(({className:r,...i},o)=>W.createElement(PR,{ref:o,iconNode:e,className:eC(`lucide-${RR(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=tC("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=tC("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ny="-",DR=t=>{const e=MR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const d=c.split(ny);return d[0]===""&&d.length!==1&&d.shift(),nC(d,e)||kR(c)},getConflictingClassGroupIds:(c,d)=>{const g=n[c]||[];return d&&r[c]?[...g,...r[c]]:g}}},nC=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?nC(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(ny);return(c=e.validators.find(({validator:d})=>d(o)))==null?void 0:c.classGroupId},L2=/^\[(.+)\]$/,kR=t=>{if(L2.test(t)){const e=L2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},MR=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return FR(Object.entries(t.classGroups),n).forEach(([o,c])=>{dp(c,r,o,e)}),r},dp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:F2(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(LR(i)){dp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,c])=>{dp(c,F2(e,o),n,r)})})},F2=(t,e)=>{let n=t;return e.split(ny).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},LR=t=>t.isThemeGetter,FR=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,d])=>[e+c,d])):o);return[n,i]}):t,BR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,c)=>{n.set(o,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let c=n.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){n.has(o)?n.set(o,c):i(o,c)}}},rC="!",VR=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,c=d=>{const g=[];let p=0,x=0,E;for(let F=0;F<d.length;F++){let R=d[F];if(p===0){if(R===i&&(r||d.slice(F,F+o)===e)){g.push(d.slice(x,F)),x=F+o;continue}if(R==="/"){E=F;continue}}R==="["?p++:R==="]"&&p--}const _=g.length===0?d:d.substring(x),I=_.startsWith(rC),D=I?_.substring(1):_,b=E&&E>x?E-x:void 0;return{modifiers:g,hasImportantModifier:I,baseClassName:D,maybePostfixModifierPosition:b}};return n?d=>n({className:d,parseClassName:c}):c},UR=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},jR=t=>({cache:BR(t.cacheSize),parseClassName:VR(t),...DR(t)}),zR=/\s+/,HR=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],c=t.trim().split(zR);let d="";for(let g=c.length-1;g>=0;g-=1){const p=c[g],{modifiers:x,hasImportantModifier:E,baseClassName:_,maybePostfixModifierPosition:I}=n(p);let D=!!I,b=r(D?_.substring(0,I):_);if(!b){if(!D){d=p+(d.length>0?" "+d:d);continue}if(b=r(_),!b){d=p+(d.length>0?" "+d:d);continue}D=!1}const F=UR(x).join(":"),R=E?F+rC:F,S=R+b;if(o.includes(S))continue;o.push(S);const O=i(b,D);for(let U=0;U<O.length;++U){const Y=O[U];o.push(R+Y)}d=p+(d.length>0?" "+d:d)}return d};function WR(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=iC(e))&&(r&&(r+=" "),r+=n);return r}const iC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=iC(t[r]))&&(n&&(n+=" "),n+=e);return n};function GR(t,...e){let n,r,i,o=c;function c(g){const p=e.reduce((x,E)=>E(x),t());return n=jR(p),r=n.cache.get,i=n.cache.set,o=d,d(g)}function d(g){const p=r(g);if(p)return p;const x=HR(g,n);return i(g,x),x}return function(){return o(WR.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},sC=/^\[(?:([a-z-]+):)?(.+)\]$/i,qR=/^\d+\/\d+$/,$R=new Set(["px","full","screen"]),XR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_s=t=>jl(t)||$R.has(t)||qR.test(t),io=t=>Ic(t,"length",oN),jl=t=>!!t&&!Number.isNaN(Number(t)),X1=t=>Ic(t,"number",jl),Zc=t=>!!t&&Number.isInteger(Number(t)),JR=t=>t.endsWith("%")&&jl(t.slice(0,-1)),Ye=t=>sC.test(t),so=t=>XR.test(t),eN=new Set(["length","size","percentage"]),tN=t=>Ic(t,eN,oC),nN=t=>Ic(t,"position",oC),rN=new Set(["image","url"]),iN=t=>Ic(t,rN,lN),sN=t=>Ic(t,"",aN),Jc=()=>!0,Ic=(t,e,n)=>{const r=sC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},oN=t=>KR.test(t)&&!YR.test(t),oC=()=>!1,aN=t=>QR.test(t),lN=t=>ZR.test(t),cN=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),i=Ut("borderColor"),o=Ut("borderRadius"),c=Ut("borderSpacing"),d=Ut("borderWidth"),g=Ut("contrast"),p=Ut("grayscale"),x=Ut("hueRotate"),E=Ut("invert"),_=Ut("gap"),I=Ut("gradientColorStops"),D=Ut("gradientColorStopPositions"),b=Ut("inset"),F=Ut("margin"),R=Ut("opacity"),S=Ut("padding"),O=Ut("saturate"),U=Ut("scale"),Y=Ut("sepia"),Z=Ut("skew"),k=Ut("space"),M=Ut("translate"),L=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",Ye,e],$=()=>[Ye,e],j=()=>["",_s,io],he=()=>["auto",jl,Ye],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ie=()=>["solid","dashed","dotted","double","none"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],fe=()=>["","0",Ye],Te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Se=()=>[jl,Ye];return{cacheSize:500,separator:":",theme:{colors:[Jc],spacing:[_s,io],blur:["none","",so,Ye],brightness:Se(),borderColor:[t],borderRadius:["none","","full",so,Ye],borderSpacing:$(),borderWidth:j(),contrast:Se(),grayscale:fe(),hueRotate:Se(),invert:fe(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[JR,io],inset:X(),margin:X(),opacity:Se(),padding:$(),saturate:Se(),scale:Se(),sepia:fe(),skew:Se(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":Te()}],"break-before":[{"break-before":Te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),Ye]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zc,Ye]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:fe()}],shrink:[{shrink:fe()}],order:[{order:["first","last","none",Zc,Ye]}],"grid-cols":[{"grid-cols":[Jc]}],"col-start-end":[{col:["auto",{span:["full",Zc,Ye]},Ye]}],"col-start":[{"col-start":he()}],"col-end":[{"col-end":he()}],"grid-rows":[{"grid-rows":[Jc]}],"row-start-end":[{row:["auto",{span:[Zc,Ye]},Ye]}],"row-start":[{"row-start":he()}],"row-end":[{"row-end":he()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[F]}],mx:[{mx:[F]}],my:[{my:[F]}],ms:[{ms:[F]}],me:[{me:[F]}],mt:[{mt:[F]}],mr:[{mr:[F]}],mb:[{mb:[F]}],ml:[{ml:[F]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,e]}],"min-w":[{"min-w":[Ye,e,"min","max","fit"]}],"max-w":[{"max-w":[Ye,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[Ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",X1]}],"font-family":[{font:[Jc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",jl,X1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_s,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_s,io]}],"underline-offset":[{"underline-offset":["auto",_s,Ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),nN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},iN]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...Ie(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:Ie()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Ie()]}],"outline-offset":[{"outline-offset":[_s,Ye]}],"outline-w":[{outline:[_s,io]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[_s,io]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,sN]}],"shadow-color":[{shadow:[Jc]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",so,Ye]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[E]}],saturate:[{saturate:[O]}],sepia:[{sepia:[Y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[E]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[Y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:Se()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:Se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[Zc,Ye]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[_s,io,X1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uN=GR(cN),hN=()=>{};var B2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],d=t[n++],g=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},lC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,d=c?t[i+1]:0,g=i+2<t.length,p=g?t[i+2]:0,x=o>>2,E=(o&3)<<4|d>>4;let _=(d&15)<<2|p>>6,I=p&63;g||(I=64,c||(_=64)),r.push(n[x],n[E],n[_],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const E=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||d==null||p==null||E==null)throw new fN;const _=o<<2|d>>4;if(r.push(_),p!==64){const I=d<<4&240|p>>2;if(r.push(I),E!==64){const D=p<<6&192|E;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gN=function(t){const e=aC(t);return lC.encodeByteArray(e,!0)},bf=function(t){return gN(t).replace(/\./g,"")},cC=function(t){try{return lC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=()=>pN().__FIREBASE_DEFAULTS__,yN=()=>{if(typeof process>"u"||typeof B2>"u")return;const t=B2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cC(t[1]);return e&&JSON.parse(e)},R0=()=>{try{return hN()||mN()||yN()||wN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uC=t=>{var e,n;return(n=(e=R0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xN=t=>{const e=uC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hC=()=>{var t;return(t=R0())===null||t===void 0?void 0:t.config},dC=t=>{var e;return(e=R0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bf(JSON.stringify(n)),bf(JSON.stringify(c)),""].join(".")}const vu={};function _N(){const t={prod:[],emulator:[]};for(const e of Object.keys(vu))vu[e]?t.emulator.push(e):t.prod.push(e);return t}function AN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let V2=!1;function gC(t,e){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||vu[t]===e||vu[t]||V2)return;vu[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=_N().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function g(_,I){_.setAttribute("width","24"),_.setAttribute("id",I),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{V2=!0,c()},_}function x(_,I){_.setAttribute("id",I),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function E(){const _=AN(r),I=n("text"),D=document.getElementById(I)||document.createElement("span"),b=n("learnmore"),F=document.getElementById(b)||document.createElement("a"),R=n("preprendIcon"),S=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;d(O),x(F,b);const U=p();g(S,R),O.append(S,D,F,U),document.body.appendChild(O)}o?(D.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function IN(){var t;const e=(t=R0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RN(){const t=ar();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NN(){return!IN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PN(){try{return typeof indexedDB=="object"}catch{return!1}}function ON(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="FirebaseError";class Gs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DN,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wh.prototype.create)}}class wh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?kN(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Gs(i,d,r)}}function kN(t,e){return t.replace(MN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const MN=/\{\$([^}]+)}/g;function LN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(U2(o)&&U2(c)){if(!Xa(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function su(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FN(t,e){const n=new BN(t,e);return n.subscribe.bind(n)}class BN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=K1),i.error===void 0&&(i.error=K1),i.complete===void 0&&(i.complete=K1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function K1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class Ka{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UN=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zN(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jN(t){return t===Ra?void 0:t}function zN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const WN={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},GN=it.INFO,qN={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},$N=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ry{constructor(e){this.name=e,this._logLevel=GN,this._logHandler=$N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const XN=(t,e)=>e.some(n=>t instanceof n);let j2,z2;function KN(){return j2||(j2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YN(){return z2||(z2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pC=new WeakMap,fp=new WeakMap,mC=new WeakMap,Y1=new WeakMap,iy=new WeakMap;function QN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(Bo(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&pC.set(n,t)}).catch(()=>{}),iy.set(e,t),e}function ZN(t){if(fp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});fp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JN(t){gp=t(gp)}function e8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Q1(this),e,...n);return mC.set(r,e.sort?e.sort():[e]),Bo(r)}:YN().includes(t)?function(...e){return t.apply(Q1(this),e),Bo(pC.get(this))}:function(...e){return Bo(t.apply(Q1(this),e))}}function t8(t){return typeof t=="function"?e8(t):(t instanceof IDBTransaction&&ZN(t),XN(t,KN())?new Proxy(t,gp):t)}function Bo(t){if(t instanceof IDBRequest)return QN(t);if(Y1.has(t))return Y1.get(t);const e=t8(t);return e!==t&&(Y1.set(t,e),iy.set(e,t)),e}const Q1=t=>iy.get(t);function n8(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),d=Bo(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Bo(c.result),g.oldVersion,g.newVersion,Bo(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const r8=["get","getKey","getAll","getAllKeys","count"],i8=["put","add","delete","clear"],Z1=new Map;function H2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z1.get(e))return Z1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=i8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r8.includes(n)))return;const o=async function(c,...d){const g=this.transaction(c,i?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),i&&g.done]))[0]};return Z1.set(e,o),o}JN(t=>({...t,get:(e,n,r)=>H2(e,n)||t.get(e,n,r),has:(e,n)=>!!H2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pp="@firebase/app",W2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new ry("@firebase/app"),a8="@firebase/app-compat",l8="@firebase/analytics-compat",c8="@firebase/analytics",u8="@firebase/app-check-compat",h8="@firebase/app-check",d8="@firebase/auth",f8="@firebase/auth-compat",g8="@firebase/database",p8="@firebase/data-connect",m8="@firebase/database-compat",y8="@firebase/functions",w8="@firebase/functions-compat",x8="@firebase/installations",v8="@firebase/installations-compat",E8="@firebase/messaging",_8="@firebase/messaging-compat",A8="@firebase/performance",C8="@firebase/performance-compat",I8="@firebase/remote-config",T8="@firebase/remote-config-compat",S8="@firebase/storage",b8="@firebase/storage-compat",R8="@firebase/firestore",N8="@firebase/ai",P8="@firebase/firestore-compat",O8="firebase",D8="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="[DEFAULT]",k8={[pp]:"fire-core",[a8]:"fire-core-compat",[c8]:"fire-analytics",[l8]:"fire-analytics-compat",[h8]:"fire-app-check",[u8]:"fire-app-check-compat",[d8]:"fire-auth",[f8]:"fire-auth-compat",[g8]:"fire-rtdb",[p8]:"fire-data-connect",[m8]:"fire-rtdb-compat",[y8]:"fire-fn",[w8]:"fire-fn-compat",[x8]:"fire-iid",[v8]:"fire-iid-compat",[E8]:"fire-fcm",[_8]:"fire-fcm-compat",[A8]:"fire-perf",[C8]:"fire-perf-compat",[I8]:"fire-rc",[T8]:"fire-rc-compat",[S8]:"fire-gcs",[b8]:"fire-gcs-compat",[R8]:"fire-fst",[P8]:"fire-fst-compat",[N8]:"fire-vertex","fire-js":"fire-js",[O8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,M8=new Map,yp=new Map;function G2(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uc(t){const e=t.name;if(yp.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,t);for(const n of Rf.values())G2(n,t);for(const n of M8.values())G2(n,t);return!0}function sy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vo=new wh("app","Firebase",L8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=D8;function yC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Vo.create("bad-app-name",{appName:String(i)});if(n||(n=hC()),!n)throw Vo.create("no-options");const o=Rf.get(i);if(o){if(Xa(n,o.options)&&Xa(r,o.config))return o;throw Vo.create("duplicate-app",{appName:i})}const c=new HN(i);for(const g of yp.values())c.addComponent(g);const d=new F8(n,r,c);return Rf.set(i,d),d}function wC(t=mp){const e=Rf.get(t);if(!e&&t===mp&&hC())return yC();if(!e)throw Vo.create("no-app",{appName:t});return e}function Uo(t,e,n){var r;let i=(r=k8[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(d.join(" "));return}uc(new Ka(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8="firebase-heartbeat-database",V8=1,$u="firebase-heartbeat-store";let J1=null;function xC(){return J1||(J1=n8(B8,V8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vo.create("idb-open",{originalErrorMessage:t.message})})),J1}async function U8(t){try{const n=(await xC()).transaction($u),r=await n.objectStore($u).get(vC(t));return await n.done,r}catch(e){if(e instanceof Gs)Fs.warn(e.message);else{const n=Vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function q2(t,e){try{const r=(await xC()).transaction($u,"readwrite");await r.objectStore($u).put(e,vC(t)),await r.done}catch(n){if(n instanceof Gs)Fs.warn(n.message);else{const r=Vo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(r.message)}}}function vC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=1024,z8=30;class H8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>z8){const c=q8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$2(),{heartbeatsToSend:r,unsentEntries:i}=W8(this._heartbeatsCache.heartbeats),o=bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fs.warn(n),""}}}function $2(){return new Date().toISOString().substring(0,10)}function W8(t,e=j8){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),X2(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),X2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PN()?ON().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await U8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return q2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return q2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function X2(t){return bf(JSON.stringify({version:2,heartbeats:t})).length}function q8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){uc(new Ka("platform-logger",e=>new s8(e),"PRIVATE")),uc(new Ka("heartbeat",e=>new H8(e),"PRIVATE")),Uo(pp,W2,t),Uo(pp,W2,"esm2017"),Uo("fire-js","")}$8("");var X8="firebase",K8="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo(X8,K8,"app");var K2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,EC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,M){function L(){}L.prototype=M.prototype,k.D=M.prototype,k.prototype=new L,k.prototype.constructor=k,k.C=function(G,X,$){for(var j=Array(arguments.length-2),he=2;he<arguments.length;he++)j[he-2]=arguments[he];return M.prototype[X].apply(G,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,M,L){L||(L=0);var G=Array(16);if(typeof M=="string")for(var X=0;16>X;++X)G[X]=M.charCodeAt(L++)|M.charCodeAt(L++)<<8|M.charCodeAt(L++)<<16|M.charCodeAt(L++)<<24;else for(X=0;16>X;++X)G[X]=M[L++]|M[L++]<<8|M[L++]<<16|M[L++]<<24;M=k.g[0],L=k.g[1],X=k.g[2];var $=k.g[3],j=M+($^L&(X^$))+G[0]+3614090360&4294967295;M=L+(j<<7&4294967295|j>>>25),j=$+(X^M&(L^X))+G[1]+3905402710&4294967295,$=M+(j<<12&4294967295|j>>>20),j=X+(L^$&(M^L))+G[2]+606105819&4294967295,X=$+(j<<17&4294967295|j>>>15),j=L+(M^X&($^M))+G[3]+3250441966&4294967295,L=X+(j<<22&4294967295|j>>>10),j=M+($^L&(X^$))+G[4]+4118548399&4294967295,M=L+(j<<7&4294967295|j>>>25),j=$+(X^M&(L^X))+G[5]+1200080426&4294967295,$=M+(j<<12&4294967295|j>>>20),j=X+(L^$&(M^L))+G[6]+2821735955&4294967295,X=$+(j<<17&4294967295|j>>>15),j=L+(M^X&($^M))+G[7]+4249261313&4294967295,L=X+(j<<22&4294967295|j>>>10),j=M+($^L&(X^$))+G[8]+1770035416&4294967295,M=L+(j<<7&4294967295|j>>>25),j=$+(X^M&(L^X))+G[9]+2336552879&4294967295,$=M+(j<<12&4294967295|j>>>20),j=X+(L^$&(M^L))+G[10]+4294925233&4294967295,X=$+(j<<17&4294967295|j>>>15),j=L+(M^X&($^M))+G[11]+2304563134&4294967295,L=X+(j<<22&4294967295|j>>>10),j=M+($^L&(X^$))+G[12]+1804603682&4294967295,M=L+(j<<7&4294967295|j>>>25),j=$+(X^M&(L^X))+G[13]+4254626195&4294967295,$=M+(j<<12&4294967295|j>>>20),j=X+(L^$&(M^L))+G[14]+2792965006&4294967295,X=$+(j<<17&4294967295|j>>>15),j=L+(M^X&($^M))+G[15]+1236535329&4294967295,L=X+(j<<22&4294967295|j>>>10),j=M+(X^$&(L^X))+G[1]+4129170786&4294967295,M=L+(j<<5&4294967295|j>>>27),j=$+(L^X&(M^L))+G[6]+3225465664&4294967295,$=M+(j<<9&4294967295|j>>>23),j=X+(M^L&($^M))+G[11]+643717713&4294967295,X=$+(j<<14&4294967295|j>>>18),j=L+($^M&(X^$))+G[0]+3921069994&4294967295,L=X+(j<<20&4294967295|j>>>12),j=M+(X^$&(L^X))+G[5]+3593408605&4294967295,M=L+(j<<5&4294967295|j>>>27),j=$+(L^X&(M^L))+G[10]+38016083&4294967295,$=M+(j<<9&4294967295|j>>>23),j=X+(M^L&($^M))+G[15]+3634488961&4294967295,X=$+(j<<14&4294967295|j>>>18),j=L+($^M&(X^$))+G[4]+3889429448&4294967295,L=X+(j<<20&4294967295|j>>>12),j=M+(X^$&(L^X))+G[9]+568446438&4294967295,M=L+(j<<5&4294967295|j>>>27),j=$+(L^X&(M^L))+G[14]+3275163606&4294967295,$=M+(j<<9&4294967295|j>>>23),j=X+(M^L&($^M))+G[3]+4107603335&4294967295,X=$+(j<<14&4294967295|j>>>18),j=L+($^M&(X^$))+G[8]+1163531501&4294967295,L=X+(j<<20&4294967295|j>>>12),j=M+(X^$&(L^X))+G[13]+2850285829&4294967295,M=L+(j<<5&4294967295|j>>>27),j=$+(L^X&(M^L))+G[2]+4243563512&4294967295,$=M+(j<<9&4294967295|j>>>23),j=X+(M^L&($^M))+G[7]+1735328473&4294967295,X=$+(j<<14&4294967295|j>>>18),j=L+($^M&(X^$))+G[12]+2368359562&4294967295,L=X+(j<<20&4294967295|j>>>12),j=M+(L^X^$)+G[5]+4294588738&4294967295,M=L+(j<<4&4294967295|j>>>28),j=$+(M^L^X)+G[8]+2272392833&4294967295,$=M+(j<<11&4294967295|j>>>21),j=X+($^M^L)+G[11]+1839030562&4294967295,X=$+(j<<16&4294967295|j>>>16),j=L+(X^$^M)+G[14]+4259657740&4294967295,L=X+(j<<23&4294967295|j>>>9),j=M+(L^X^$)+G[1]+2763975236&4294967295,M=L+(j<<4&4294967295|j>>>28),j=$+(M^L^X)+G[4]+1272893353&4294967295,$=M+(j<<11&4294967295|j>>>21),j=X+($^M^L)+G[7]+4139469664&4294967295,X=$+(j<<16&4294967295|j>>>16),j=L+(X^$^M)+G[10]+3200236656&4294967295,L=X+(j<<23&4294967295|j>>>9),j=M+(L^X^$)+G[13]+681279174&4294967295,M=L+(j<<4&4294967295|j>>>28),j=$+(M^L^X)+G[0]+3936430074&4294967295,$=M+(j<<11&4294967295|j>>>21),j=X+($^M^L)+G[3]+3572445317&4294967295,X=$+(j<<16&4294967295|j>>>16),j=L+(X^$^M)+G[6]+76029189&4294967295,L=X+(j<<23&4294967295|j>>>9),j=M+(L^X^$)+G[9]+3654602809&4294967295,M=L+(j<<4&4294967295|j>>>28),j=$+(M^L^X)+G[12]+3873151461&4294967295,$=M+(j<<11&4294967295|j>>>21),j=X+($^M^L)+G[15]+530742520&4294967295,X=$+(j<<16&4294967295|j>>>16),j=L+(X^$^M)+G[2]+3299628645&4294967295,L=X+(j<<23&4294967295|j>>>9),j=M+(X^(L|~$))+G[0]+4096336452&4294967295,M=L+(j<<6&4294967295|j>>>26),j=$+(L^(M|~X))+G[7]+1126891415&4294967295,$=M+(j<<10&4294967295|j>>>22),j=X+(M^($|~L))+G[14]+2878612391&4294967295,X=$+(j<<15&4294967295|j>>>17),j=L+($^(X|~M))+G[5]+4237533241&4294967295,L=X+(j<<21&4294967295|j>>>11),j=M+(X^(L|~$))+G[12]+1700485571&4294967295,M=L+(j<<6&4294967295|j>>>26),j=$+(L^(M|~X))+G[3]+2399980690&4294967295,$=M+(j<<10&4294967295|j>>>22),j=X+(M^($|~L))+G[10]+4293915773&4294967295,X=$+(j<<15&4294967295|j>>>17),j=L+($^(X|~M))+G[1]+2240044497&4294967295,L=X+(j<<21&4294967295|j>>>11),j=M+(X^(L|~$))+G[8]+1873313359&4294967295,M=L+(j<<6&4294967295|j>>>26),j=$+(L^(M|~X))+G[15]+4264355552&4294967295,$=M+(j<<10&4294967295|j>>>22),j=X+(M^($|~L))+G[6]+2734768916&4294967295,X=$+(j<<15&4294967295|j>>>17),j=L+($^(X|~M))+G[13]+1309151649&4294967295,L=X+(j<<21&4294967295|j>>>11),j=M+(X^(L|~$))+G[4]+4149444226&4294967295,M=L+(j<<6&4294967295|j>>>26),j=$+(L^(M|~X))+G[11]+3174756917&4294967295,$=M+(j<<10&4294967295|j>>>22),j=X+(M^($|~L))+G[2]+718787259&4294967295,X=$+(j<<15&4294967295|j>>>17),j=L+($^(X|~M))+G[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(X+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+X&4294967295,k.g[3]=k.g[3]+$&4294967295}r.prototype.u=function(k,M){M===void 0&&(M=k.length);for(var L=M-this.blockSize,G=this.B,X=this.h,$=0;$<M;){if(X==0)for(;$<=L;)i(this,k,$),$+=this.blockSize;if(typeof k=="string"){for(;$<M;)if(G[X++]=k.charCodeAt($++),X==this.blockSize){i(this,G),X=0;break}}else for(;$<M;)if(G[X++]=k[$++],X==this.blockSize){i(this,G),X=0;break}}this.h=X,this.o+=M},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;var L=8*this.o;for(M=k.length-8;M<k.length;++M)k[M]=L&255,L/=256;for(this.u(k),k=Array(16),M=L=0;4>M;++M)for(var G=0;32>G;G+=8)k[L++]=this.g[M]>>>G&255;return k};function o(k,M){var L=d;return Object.prototype.hasOwnProperty.call(L,k)?L[k]:L[k]=M(k)}function c(k,M){this.h=M;for(var L=[],G=!0,X=k.length-1;0<=X;X--){var $=k[X]|0;G&&$==M||(L[X]=$,G=!1)}this.g=L}var d={};function g(k){return-128<=k&&128>k?o(k,function(M){return new c([M|0],0>M?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return F(p(-k));for(var M=[],L=1,G=0;k>=L;G++)M[G]=k/L|0,L*=4294967296;return new c(M,0)}function x(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return F(x(k.substring(1),M));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=p(Math.pow(M,8)),G=E,X=0;X<k.length;X+=8){var $=Math.min(8,k.length-X),j=parseInt(k.substring(X,X+$),M);8>$?($=p(Math.pow(M,$)),G=G.j($).add(p(j))):(G=G.j(L),G=G.add(p(j)))}return G}var E=g(0),_=g(1),I=g(16777216);t=c.prototype,t.m=function(){if(b(this))return-F(this).m();for(var k=0,M=1,L=0;L<this.g.length;L++){var G=this.i(L);k+=(0<=G?G:4294967296+G)*M,M*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(D(this))return"0";if(b(this))return"-"+F(this).toString(k);for(var M=p(Math.pow(k,6)),L=this,G="";;){var X=U(L,M).g;L=R(L,X.j(M));var $=((0<L.g.length?L.g[0]:L.h)>>>0).toString(k);if(L=X,D(L))return $+G;for(;6>$.length;)$="0"+$;G=$+G}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function D(k){if(k.h!=0)return!1;for(var M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function b(k){return k.h==-1}t.l=function(k){return k=R(this,k),b(k)?-1:D(k)?0:1};function F(k){for(var M=k.g.length,L=[],G=0;G<M;G++)L[G]=~k.g[G];return new c(L,~k.h).add(_)}t.abs=function(){return b(this)?F(this):this},t.add=function(k){for(var M=Math.max(this.g.length,k.g.length),L=[],G=0,X=0;X<=M;X++){var $=G+(this.i(X)&65535)+(k.i(X)&65535),j=($>>>16)+(this.i(X)>>>16)+(k.i(X)>>>16);G=j>>>16,$&=65535,j&=65535,L[X]=j<<16|$}return new c(L,L[L.length-1]&-2147483648?-1:0)};function R(k,M){return k.add(F(M))}t.j=function(k){if(D(this)||D(k))return E;if(b(this))return b(k)?F(this).j(F(k)):F(F(this).j(k));if(b(k))return F(this.j(F(k)));if(0>this.l(I)&&0>k.l(I))return p(this.m()*k.m());for(var M=this.g.length+k.g.length,L=[],G=0;G<2*M;G++)L[G]=0;for(G=0;G<this.g.length;G++)for(var X=0;X<k.g.length;X++){var $=this.i(G)>>>16,j=this.i(G)&65535,he=k.i(X)>>>16,J=k.i(X)&65535;L[2*G+2*X]+=j*J,S(L,2*G+2*X),L[2*G+2*X+1]+=$*J,S(L,2*G+2*X+1),L[2*G+2*X+1]+=j*he,S(L,2*G+2*X+1),L[2*G+2*X+2]+=$*he,S(L,2*G+2*X+2)}for(G=0;G<M;G++)L[G]=L[2*G+1]<<16|L[2*G];for(G=M;G<2*M;G++)L[G]=0;return new c(L,0)};function S(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function O(k,M){this.g=k,this.h=M}function U(k,M){if(D(M))throw Error("division by zero");if(D(k))return new O(E,E);if(b(k))return M=U(F(k),M),new O(F(M.g),F(M.h));if(b(M))return M=U(k,F(M)),new O(F(M.g),M.h);if(30<k.g.length){if(b(k)||b(M))throw Error("slowDivide_ only works with positive integers.");for(var L=_,G=M;0>=G.l(k);)L=Y(L),G=Y(G);var X=Z(L,1),$=Z(G,1);for(G=Z(G,2),L=Z(L,2);!D(G);){var j=$.add(G);0>=j.l(k)&&(X=X.add(L),$=j),G=Z(G,1),L=Z(L,1)}return M=R(k,X.j(M)),new O(X,M)}for(X=E;0<=k.l(M);){for(L=Math.max(1,Math.floor(k.m()/M.m())),G=Math.ceil(Math.log(L)/Math.LN2),G=48>=G?1:Math.pow(2,G-48),$=p(L),j=$.j(M);b(j)||0<j.l(k);)L-=G,$=p(L),j=$.j(M);D($)&&($=_),X=X.add($),k=R(k,j)}return new O(X,k)}t.A=function(k){return U(this,k).h},t.and=function(k){for(var M=Math.max(this.g.length,k.g.length),L=[],G=0;G<M;G++)L[G]=this.i(G)&k.i(G);return new c(L,this.h&k.h)},t.or=function(k){for(var M=Math.max(this.g.length,k.g.length),L=[],G=0;G<M;G++)L[G]=this.i(G)|k.i(G);return new c(L,this.h|k.h)},t.xor=function(k){for(var M=Math.max(this.g.length,k.g.length),L=[],G=0;G<M;G++)L[G]=this.i(G)^k.i(G);return new c(L,this.h^k.h)};function Y(k){for(var M=k.g.length+1,L=[],G=0;G<M;G++)L[G]=k.i(G)<<1|k.i(G-1)>>>31;return new c(L,k.h)}function Z(k,M){var L=M>>5;M%=32;for(var G=k.g.length-L,X=[],$=0;$<G;$++)X[$]=0<M?k.i($+L)>>>M|k.i($+L+1)<<32-M:k.i($+L);return new c(X,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EC=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=x,jo=c}).apply(typeof K2<"u"?K2:typeof self<"u"?self:typeof window<"u"?window:{});var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _C,ou,AC,Gd,wp,CC,IC,TC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,T){return y==Array.prototype||y==Object.prototype||(y[A]=T.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof xd=="object"&&xd];for(var A=0;A<y.length;++A){var T=y[A];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(y,A){if(A)e:{var T=r;y=y.split(".");for(var V=0;V<y.length-1;V++){var ee=y[V];if(!(ee in T))break e;T=T[ee]}y=y[y.length-1],V=T[y],A=A(V),A!=V&&A!=null&&e(T,y,{configurable:!0,writable:!0,value:A})}}function o(y,A){y instanceof String&&(y+="");var T=0,V=!1,ee={next:function(){if(!V&&T<y.length){var se=T++;return{value:A(se,y[se]),done:!1}}return V=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}i("Array.prototype.values",function(y){return y||function(){return o(this,function(A,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function p(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function x(y,A,T){return y.call.apply(y.bind,arguments)}function E(y,A,T){if(!y)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,V),y.apply(A,ee)}}return function(){return y.apply(A,arguments)}}function _(y,A,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:E,_.apply(null,arguments)}function I(y,A){var T=Array.prototype.slice.call(arguments,1);return function(){var V=T.slice();return V.push.apply(V,arguments),y.apply(this,V)}}function D(y,A){function T(){}T.prototype=A.prototype,y.aa=A.prototype,y.prototype=new T,y.prototype.constructor=y,y.Qb=function(V,ee,se){for(var ve=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)ve[_t-2]=arguments[_t];return A.prototype[ee].apply(V,ve)}}function b(y){const A=y.length;if(0<A){const T=Array(A);for(let V=0;V<A;V++)T[V]=y[V];return T}return[]}function F(y,A){for(let T=1;T<arguments.length;T++){const V=arguments[T];if(g(V)){const ee=y.length||0,se=V.length||0;y.length=ee+se;for(let ve=0;ve<se;ve++)y[ee+ve]=V[ve]}else y.push(V)}}class R{constructor(A,T){this.i=A,this.j=T,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function S(y){return/^[\s\xa0]*$/.test(y)}function O(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function U(y){return U[" "](y),y}U[" "]=function(){};var Y=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Z(y,A,T){for(const V in y)A.call(T,y[V],V,y)}function k(y,A){for(const T in y)A.call(void 0,y[T],T,y)}function M(y){const A={};for(const T in y)A[T]=y[T];return A}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(y,A){let T,V;for(let ee=1;ee<arguments.length;ee++){V=arguments[ee];for(T in V)y[T]=V[T];for(let se=0;se<L.length;se++)T=L[se],Object.prototype.hasOwnProperty.call(V,T)&&(y[T]=V[T])}}function X(y){var A=1;y=y.split(":");const T=[];for(;0<A&&y.length;)T.push(y.shift()),A--;return y.length&&T.push(y.join(":")),T}function $(y){d.setTimeout(()=>{throw y},0)}function j(){var y=fe;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class he{constructor(){this.h=this.g=null}add(A,T){const V=J.get();V.set(A,T),this.h?this.h.next=V:this.g=V,this.h=V}}var J=new R(()=>new Ie,y=>y.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(A,T){this.h=A,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,re=!1,fe=new he,Te=()=>{const y=d.Promise.resolve(void 0);ye=()=>{y.then(Se)}};var Se=()=>{for(var y;y=j();){try{y.h.call(y.g)}catch(T){$(T)}var A=J;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}re=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Ke=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const T=()=>{};d.addEventListener("test",T,A),d.removeEventListener("test",T,A)}catch{}return y}();function $t(y,A){if(De.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var T=this.type=y.type,V=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(Y){e:{try{U(A.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(A=null)}}else T=="mouseover"?A=y.fromElement:T=="mouseout"&&(A=y.toElement);this.relatedTarget=A,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Ee[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&$t.aa.h.call(this)}}D($t,De);var Ee={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var pn="closure_listenable_"+(1e6*Math.random()|0),Et=0;function Kn(y,A,T,V,ee){this.listener=y,this.proxy=null,this.src=A,this.type=T,this.capture=!!V,this.ha=ee,this.key=++Et,this.da=this.fa=!1}function _n(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Wt(y){this.src=y,this.g={},this.h=0}Wt.prototype.add=function(y,A,T,V,ee){var se=y.toString();y=this.g[se],y||(y=this.g[se]=[],this.h++);var ve=$e(y,A,V,ee);return-1<ve?(A=y[ve],T||(A.fa=!1)):(A=new Kn(A,this.src,se,!!V,ee),A.fa=T,y.push(A)),A};function lr(y,A){var T=A.type;if(T in y.g){var V=y.g[T],ee=Array.prototype.indexOf.call(V,A,void 0),se;(se=0<=ee)&&Array.prototype.splice.call(V,ee,1),se&&(_n(A),y.g[T].length==0&&(delete y.g[T],y.h--))}}function $e(y,A,T,V){for(var ee=0;ee<y.length;++ee){var se=y[ee];if(!se.da&&se.listener==A&&se.capture==!!T&&se.ha==V)return ee}return-1}var Yn="closure_lm_"+(1e6*Math.random()|0),An={};function Vn(y,A,T,V,ee){if(Array.isArray(A)){for(var se=0;se<A.length;se++)Vn(y,A[se],T,V,ee);return null}return T=ms(T),y&&y[pn]?y.K(A,T,p(V)?!!V.capture:!!V,ee):Xt(y,A,T,!1,V,ee)}function Xt(y,A,T,V,ee,se){if(!A)throw Error("Invalid event type");var ve=p(ee)?!!ee.capture:!!ee,_t=xi(y);if(_t||(y[Yn]=_t=new Wt(y)),T=_t.add(A,T,V,ve,se),T.proxy)return T;if(V=ft(),T.proxy=V,V.src=y,V.listener=T,y.addEventListener)Ke||(ee=ve),ee===void 0&&(ee=!1),y.addEventListener(A.toString(),V,ee);else if(y.attachEvent)y.attachEvent(Pe(A.toString()),V);else if(y.addListener&&y.removeListener)y.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ft(){function y(T){return A.call(y.src,y.listener,T)}const A=qs;return y}function Le(y,A,T,V,ee){if(Array.isArray(A))for(var se=0;se<A.length;se++)Le(y,A[se],T,V,ee);else V=p(V)?!!V.capture:!!V,T=ms(T),y&&y[pn]?(y=y.i,A=String(A).toString(),A in y.g&&(se=y.g[A],T=$e(se,T,V,ee),-1<T&&(_n(se[T]),Array.prototype.splice.call(se,T,1),se.length==0&&(delete y.g[A],y.h--)))):y&&(y=xi(y))&&(A=y.g[A.toString()],y=-1,A&&(y=$e(A,T,V,ee)),(T=-1<y?A[y]:null)&&cr(T))}function cr(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[pn])lr(A.i,y);else{var T=y.type,V=y.proxy;A.removeEventListener?A.removeEventListener(T,V,y.capture):A.detachEvent?A.detachEvent(Pe(T),V):A.addListener&&A.removeListener&&A.removeListener(V),(T=xi(A))?(lr(T,y),T.h==0&&(T.src=null,A[Yn]=null)):_n(y)}}}function Pe(y){return y in An?An[y]:An[y]="on"+y}function qs(y,A){if(y.da)y=!0;else{A=new $t(A,this);var T=y.listener,V=y.ha||y.src;y.fa&&cr(y),y=T.call(V,A)}return y}function xi(y){return y=y[Yn],y instanceof Wt?y:null}var ur="__closure_events_fn_"+(1e9*Math.random()>>>0);function ms(y){return typeof y=="function"?y:(y[ur]||(y[ur]=function(A){return y.handleEvent(A)}),y[ur])}function gt(){Ce.call(this),this.i=new Wt(this),this.M=this,this.F=null}D(gt,Ce),gt.prototype[pn]=!0,gt.prototype.removeEventListener=function(y,A,T,V){Le(this,y,A,T,V)};function kt(y,A){var T,V=y.F;if(V)for(T=[];V;V=V.F)T.push(V);if(y=y.M,V=A.type||A,typeof A=="string")A=new De(A,y);else if(A instanceof De)A.target=A.target||y;else{var ee=A;A=new De(V,y),G(A,ee)}if(ee=!0,T)for(var se=T.length-1;0<=se;se--){var ve=A.g=T[se];ee=Qn(ve,V,!0,A)&&ee}if(ve=A.g=y,ee=Qn(ve,V,!0,A)&&ee,ee=Qn(ve,V,!1,A)&&ee,T)for(se=0;se<T.length;se++)ve=A.g=T[se],ee=Qn(ve,V,!1,A)&&ee}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var T=y.g[A],V=0;V<T.length;V++)_n(T[V]);delete y.g[A],y.h--}}this.F=null},gt.prototype.K=function(y,A,T,V){return this.i.add(String(y),A,!1,T,V)},gt.prototype.L=function(y,A,T,V){return this.i.add(String(y),A,!0,T,V)};function Qn(y,A,T,V){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var ee=!0,se=0;se<A.length;++se){var ve=A[se];if(ve&&!ve.da&&ve.capture==T){var _t=ve.listener,Yt=ve.ha||ve.src;ve.fa&&lr(y.i,ve),ee=_t.call(Yt,V)!==!1&&ee}}return ee&&!V.defaultPrevented}function Mt(y,A,T){if(typeof y=="function")T&&(y=_(y,T));else if(y&&typeof y.handleEvent=="function")y=_(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(y,A||0)}function $s(y){y.g=Mt(()=>{y.g=null,y.i&&(y.i=!1,$s(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class Xs extends Ce{constructor(A,T){super(),this.m=A,this.l=T,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:$s(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(y){Ce.call(this),this.h=y,this.g={}}D(ji,Ce);var Nt=[];function xe(y){Z(y.g,function(A,T){this.g.hasOwnProperty(T)&&cr(A)},y),y.g={}}ji.prototype.N=function(){ji.aa.N.call(this),xe(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var St=d.JSON.stringify,Je=d.JSON.parse,Pt=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function Ve(){}Ve.prototype.h=null;function pt(y){return y.h||(y.h=y.i())}function mt(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){De.call(this,"d")}D(nn,De);function vi(){De.call(this,"c")}D(vi,De);var oi={},Cr=null;function Ks(){return Cr=Cr||new gt}oi.La="serverreachability";function Cn(y){De.call(this,oi.La,y)}D(Cn,De);function ai(y){const A=Ks();kt(A,new Cn(A))}oi.STAT_EVENT="statevent";function fa(y,A){De.call(this,oi.STAT_EVENT,y),this.stat=A}D(fa,De);function Ot(y){const A=Ks();kt(A,new fa(A,y))}oi.Ma="timingevent";function jh(y,A){De.call(this,oi.Ma,y),this.size=A}D(jh,De);function Lr(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},A)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function Zn(y,A,T,V,ee,se){y.info(function(){if(y.g)if(se)for(var ve="",_t=se.split("&"),Yt=0;Yt<_t.length;Yt++){var at=_t[Yt].split("=");if(1<at.length){var Vt=at[0];at=at[1];var hn=Vt.split("_");ve=2<=hn.length&&hn[1]=="type"?ve+(Vt+"="+at+"&"):ve+(Vt+"=redacted&")}}else ve=null;else ve=se;return"XMLHTTP REQ ("+V+") [attempt "+ee+"]: "+A+`
`+T+`
`+ve})}function ws(y,A,T,V,ee,se,ve){y.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ee+"]: "+A+`
`+T+`
`+se+" "+ve})}function In(y,A,T,V){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Ys(y,T)+(V?" "+V:"")})}function be(y,A){y.info(function(){return"TIMEOUT: "+A})}ys.prototype.info=function(){};function Ys(y,A){if(!y.g)return A;if(!A)return null;try{var T=JSON.parse(A);if(T){for(y=0;y<T.length;y++)if(Array.isArray(T[y])){var V=T[y];if(!(2>V.length)){var ee=V[1];if(Array.isArray(ee)&&!(1>ee.length)){var se=ee[0];if(se!="noop"&&se!="stop"&&se!="close")for(var ve=1;ve<ee.length;ve++)ee[ve]=""}}}}return St(T)}catch{return A}}var Qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Un={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zi;function xs(){}D(xs,Ve),xs.prototype.g=function(){return new XMLHttpRequest},xs.prototype.i=function(){return{}},zi=new xs;function Fr(y,A,T,V){this.j=y,this.i=A,this.l=T,this.R=V||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var zh={},Lc={};function Ir(y,A,T){y.L=1,y.v=Kt(nt(A)),y.m=T,y.P=!0,Dn(y,null)}function Dn(y,A){y.F=Date.now(),Vr(y),y.A=nt(y.v);var T=y.A,V=y.R;Array.isArray(V)||(V=[String(V)]),un(T.i,"t",V),y.C=0,T=y.j.J,y.h=new Br,y.g=Yh(y.j,T?A:null,!y.m),0<y.O&&(y.M=new Xs(_(y.Y,y,y.g),y.O)),A=y.U,T=y.g,V=y.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(Nt[0]=ee.toString()),ee=Nt);for(var se=0;se<ee.length;se++){var ve=Vn(T,ee[se],V||A.handleEvent,!1,A.h||A);if(!ve)break;A.g[ve.key]=ve}A=y.H?M(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),ai(),Zn(y.i,y.u,y.A,y.l,y.R,y.m)}Fr.prototype.ca=function(y){y=y.target;const A=this.M;A&&Ai(y)==3?A.j():this.Y(y)},Fr.prototype.Y=function(y){try{if(y==this.g)e:{const hn=Ai(this.g);var A=this.g.Ba();const bn=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||$h(this.g)))){this.J||hn!=4||A==7||(A==8||0>=bn?ai(3):ai(2)),ce(this);var T=this.g.Z();this.X=T;t:if(bt(this)){var V=$h(this.g);y="";var ee=V.length,se=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yt(this),ga(this);var ve="";break t}this.h.i=new d.TextDecoder}for(A=0;A<ee;A++)this.h.h=!0,y+=this.h.i.decode(V[A],{stream:!(se&&A==ee-1)});V.length=0,this.h.g+=y,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=T==200,ws(this.i,this.u,this.A,this.l,this.R,hn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,Yt=this.g;if((_t=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(_t)){var at=_t;break t}}at=null}if(T=at)In(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,T);else{this.o=!1,this.s=3,Ot(12),yt(this),ga(this);break e}}if(this.P){T=!0;let Sr;for(;!this.J&&this.C<ve.length;)if(Sr=Hh(this,ve),Sr==Lc){hn==4&&(this.s=4,Ot(14),T=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(Sr==zh){this.s=4,Ot(15),In(this.i,this.l,ve,"[Invalid Chunk]"),T=!1;break}else In(this.i,this.l,Sr,null),Hi(this,Sr);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||ve.length!=0||this.h.h||(this.s=1,Ot(16),T=!1),this.o=this.o&&T,!T)In(this.i,this.l,ve,"[Invalid Chunked Response]"),yt(this),ga(this);else if(0<ve.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Ia(Vt),Vt.M=!0,Ot(11))}}else In(this.i,this.l,ve,null),Hi(this,ve);hn==4&&yt(this),this.o&&!this.J&&(hn==4?Bt(this.j,this):(this.o=!1,Vr(this)))}else wt(this.g),T==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),yt(this),ga(this)}}}catch{}finally{}};function bt(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Hh(y,A){var T=y.C,V=A.indexOf(`
`,T);return V==-1?Lc:(T=Number(A.substring(T,V)),isNaN(T)?zh:(V+=1,V+T>A.length?Lc:(A=A.slice(V,V+T),y.C=V+T,A)))}Fr.prototype.cancel=function(){this.J=!0,yt(this)};function Vr(y){y.S=Date.now()+y.I,ll(y,y.I)}function ll(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Lr(_(y.ba,y),A)}function ce(y){y.B&&(d.clearTimeout(y.B),y.B=null)}Fr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(be(this.i,this.A),this.L!=2&&(ai(),Ot(17)),yt(this),this.s=2,ga(this)):ll(this,this.S-y)};function ga(y){y.j.G==0||y.J||Bt(y.j,y)}function yt(y){ce(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,xe(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function Hi(y,A){try{var T=y.j;if(T.G!=0&&(T.g==y||pa(T.h,y))){if(!y.K&&pa(T.h,y)&&T.G==3){try{var V=T.Da.g.parse(A)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ee=V;if(ee[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<y.F)no(T),hl(T);else break e;Uc(T),Ot(18)}}else T.za=ee[1],0<T.za-T.T&&37500>ee[2]&&T.F&&T.v==0&&!T.C&&(T.C=Lr(_(T.Za,T),6e3));if(1>=et(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else dr(T,11)}else if((y.K||T.g==y)&&no(T),!S(A))for(ee=T.Da.g.parse(A),A=0;A<ee.length;A++){let at=ee[A];if(T.T=at[0],at=at[1],T.G==2)if(at[0]=="c"){T.K=at[1],T.ia=at[2];const Vt=at[3];Vt!=null&&(T.la=Vt,T.j.info("VER="+T.la));const hn=at[4];hn!=null&&(T.Aa=hn,T.j.info("SVER="+T.Aa));const bn=at[5];bn!=null&&typeof bn=="number"&&0<bn&&(V=1.5*bn,T.L=V,T.j.info("backChannelRequestTimeoutMs_="+V)),V=T;const Sr=y.g;if(Sr){const fr=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fr){var se=V.h;se.g||fr.indexOf("spdy")==-1&&fr.indexOf("quic")==-1&&fr.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(ma(se,se.h),se.h=null))}if(V.D){const jc=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;jc&&(V.ya=jc,_e(V.I,V.D,jc))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-y.F,T.j.info("Handshake RTT: "+T.R+"ms")),V=T;var ve=y;if(V.qa=Fe(V,V.J?V.ia:null,V.W),ve.K){cl(V.h,ve);var _t=ve,Yt=V.L;Yt&&(_t.I=Yt),_t.B&&(ce(_t),Vr(_t)),V.g=ve}else Kh(V);0<T.i.length&&qe(T)}else at[0]!="stop"&&at[0]!="close"||dr(T,7);else T.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?dr(T,7):ci(T):at[0]!="noop"&&T.l&&T.l.ta(at),T.v=0)}}ai(4)}catch{}}var u1=class{constructor(y,A){this.g=y,this.map=A}};function ut(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function et(y){return y.h?1:y.g?y.g.size:0}function pa(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function ma(y,A){y.g?y.g.add(A):y.h=A}function cl(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}ut.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function rn(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const T of y.g.values())A=A.concat(T.D);return A}return b(y.i)}function Wi(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(g(y)){for(var A=[],T=y.length,V=0;V<T;V++)A.push(y[V]);return A}A=[],T=0;for(V in y)A[T++]=y[V];return A}function h1(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(g(y)||typeof y=="string"){var A=[];y=y.length;for(var T=0;T<y;T++)A.push(T);return A}A=[],T=0;for(const V in y)A[T++]=V;return A}}}function Gt(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(g(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var T=h1(y),V=Wi(y),ee=V.length,se=0;se<ee;se++)A.call(void 0,V[se],T&&T[se],y)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d1(y,A){if(y){y=y.split("&");for(var T=0;T<y.length;T++){var V=y[T].indexOf("="),ee=null;if(0<=V){var se=y[T].substring(0,V);ee=y[T].substring(V+1)}else se=y[T];A(se,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Tr(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Tr){this.h=y.h,cn(this,y.j),this.o=y.o,this.g=y.g,te(this,y.s),this.l=y.l;var A=y.i,T=new vs;T.i=A.i,A.g&&(T.g=new Map(A.g),T.h=A.h),H(this,T),this.m=y.m}else y&&(A=String(y).match(Ei))?(this.h=!1,cn(this,A[1]||"",!0),this.o=kn(A[2]||""),this.g=kn(A[3]||"",!0),te(this,A[4]),this.l=kn(A[5]||"",!0),H(this,A[6]||"",!0),this.m=kn(A[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}Tr.prototype.toString=function(){var y=[],A=this.j;A&&y.push(ya(A,hr,!0),":");var T=this.g;return(T||A=="file")&&(y.push("//"),(A=this.o)&&y.push(ya(A,hr,!0),"@"),y.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&y.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&y.push("/"),y.push(ya(T,T.charAt(0)=="/"?Lt:Me,!0))),(T=this.i.toString())&&y.push("?",T),(T=this.m)&&y.push("#",ya(T,f1)),y.join("")};function nt(y){return new Tr(y)}function cn(y,A,T){y.j=T?kn(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function te(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function H(y,A,T){A instanceof vs?(y.i=A,Gi(y.i,y.h)):(T||(A=ya(A,Wh)),y.i=new vs(A,y.h))}function _e(y,A,T){y.i.set(A,T)}function Kt(y){return _e(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function kn(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ya(y,A,T){return typeof y=="string"?(y=encodeURI(y).replace(A,Fc),T&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Fc(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var hr=/[#\/\?@]/g,Me=/[#\?:]/g,Lt=/[#\?]/g,Wh=/[#\?@]/g,f1=/#/g;function vs(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Ur(y){y.g||(y.g=new Map,y.h=0,y.i&&d1(y.i,function(A,T){y.add(decodeURIComponent(A.replace(/\+/g," ")),T)}))}t=vs.prototype,t.add=function(y,A){Ur(this),this.i=null,y=li(this,y);var T=this.g.get(y);return T||this.g.set(y,T=[]),T.push(A),this.h+=1,this};function ul(y,A){Ur(y),A=li(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function Gh(y,A){return Ur(y),A=li(y,A),y.g.has(A)}t.forEach=function(y,A){Ur(this),this.g.forEach(function(T,V){T.forEach(function(ee){y.call(A,ee,V,this)},this)},this)},t.na=function(){Ur(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),T=[];for(let V=0;V<A.length;V++){const ee=y[V];for(let se=0;se<ee.length;se++)T.push(A[V])}return T},t.V=function(y){Ur(this);let A=[];if(typeof y=="string")Gh(this,y)&&(A=A.concat(this.g.get(li(this,y))));else{y=Array.from(this.g.values());for(let T=0;T<y.length;T++)A=A.concat(y[T])}return A},t.set=function(y,A){return Ur(this),this.i=null,y=li(this,y),Gh(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function un(y,A,T){ul(y,A),0<T.length&&(y.i=null,y.g.set(li(y,A),b(T)),y.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var T=0;T<A.length;T++){var V=A[T];const se=encodeURIComponent(String(V)),ve=this.V(V);for(V=0;V<ve.length;V++){var ee=se;ve[V]!==""&&(ee+="="+encodeURIComponent(String(ve[V]))),y.push(ee)}}return this.i=y.join("&")};function li(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function Gi(y,A){A&&!y.j&&(Ur(y),y.i=null,y.g.forEach(function(T,V){var ee=V.toLowerCase();V!=ee&&(ul(this,V),un(this,ee,T))},y)),y.j=A}function Ue(y,A){const T=new ys;if(d.Image){const V=new Image;V.onload=I(je,T,"TestLoadImage: loaded",!0,A,V),V.onerror=I(je,T,"TestLoadImage: error",!1,A,V),V.onabort=I(je,T,"TestLoadImage: abort",!1,A,V),V.ontimeout=I(je,T,"TestLoadImage: timeout",!1,A,V),d.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=y}else A(!1)}function g1(y,A){const T=new ys,V=new AbortController,ee=setTimeout(()=>{V.abort(),je(T,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:V.signal}).then(se=>{clearTimeout(ee),se.ok?je(T,"TestPingServer: ok",!0,A):je(T,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ee),je(T,"TestPingServer: error",!1,A)})}function je(y,A,T,V,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),V(T)}catch{}}function Tn(){this.g=new Pt}function p1(y,A,T){const V=T||"";try{Gt(y,function(ee,se){let ve=ee;p(ee)&&(ve=St(ee)),A.push(V+se+"="+encodeURIComponent(ve))})}catch(ee){throw A.push(V+"type="+encodeURIComponent("_badmap")),ee}}function Zs(y){this.l=y.Ub||null,this.j=y.eb||!1}D(Zs,Ve),Zs.prototype.g=function(){return new wa(this.l,this.j)},Zs.prototype.i=function(y){return function(){return y}}({});function wa(y,A){gt.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(wa,gt),t=wa.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,_i(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?xa(this):_i(this),this.readyState==3&&qi(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,xa(this))},t.Qa=function(y){this.g&&(this.response=y,xa(this))},t.ga=function(){this.g&&xa(this)};function xa(y){y.readyState=4,y.l=null,y.j=null,y.v=null,_i(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var T=A.next();!T.done;)T=T.value,y.push(T[0]+": "+T[1]),T=A.next();return y.join(`\r
`)};function _i(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Js(y){let A="";return Z(y,function(T,V){A+=V,A+=":",A+=T,A+=`\r
`}),A}function Es(y,A,T){e:{for(V in T){var V=!1;break e}V=!0}V||(T=Js(T),typeof y=="string"?T!=null&&encodeURIComponent(String(T)):_e(y,A,T))}function Ft(y){gt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ft,gt);var va=/^https?$/i,Ea=["POST","PUT"];t=Ft.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,T,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zi.g(),this.v=this.o?pt(this.o):pt(zi),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(se){jn(this,se);return}if(y=T||"",T=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ee in V)T.set(ee,V[ee]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const se of V.keys())T.set(se,V.get(se));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(T.keys()).find(se=>se.toLowerCase()=="content-type"),ee=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ea,A,void 0))||V||ee||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ve]of T)this.g.setRequestHeader(se,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qh(this),this.u=!0,this.g.send(y),this.u=!1}catch(se){jn(this,se)}};function jn(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Bc(y),_a(y)}function Bc(y){y.A||(y.A=!0,kt(y,"complete"),kt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,kt(this,"complete"),kt(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vc(this):this.bb())},t.bb=function(){Vc(this)};function Vc(y){if(y.h&&typeof c<"u"&&(!y.v[1]||Ai(y)!=4||y.Z()!=2)){if(y.u&&Ai(y)==4)Mt(y.Ea,0,y);else if(kt(y,"readystatechange"),Ai(y)==4){y.h=!1;try{const ve=y.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var T;if(!(T=A)){var V;if(V=ve===0){var ee=String(y.D).match(Ei)[1]||null;!ee&&d.self&&d.self.location&&(ee=d.self.location.protocol.slice(0,-1)),V=!va.test(ee?ee.toLowerCase():"")}T=V}if(T)kt(y,"complete"),kt(y,"success");else{y.m=6;try{var se=2<Ai(y)?y.g.statusText:""}catch{se=""}y.l=se+" ["+y.Z()+"]",Bc(y)}}finally{_a(y)}}}}function _a(y,A){if(y.g){qh(y);const T=y.g,V=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||kt(y,"ready");try{T.onreadystatechange=V}catch{}}}function qh(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function Ai(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Je(A)}};function $h(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function wt(y){const A={};y=(y.g&&2<=Ai(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<y.length;V++){if(S(y[V]))continue;var T=X(y[V]);const ee=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const se=A[ee]||[];A[ee]=se,se.push(T)}k(A,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(y,A,T){return T&&T.internalChannelParams&&T.internalChannelParams[y]||A}function Aa(y){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,y),this.cb=eo("retryDelaySeedMs",1e4,y),this.Wa=eo("forwardChannelMaxRetries",2,y),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ut(y&&y.concurrentRequestLimit),this.Da=new Tn,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Aa.prototype,t.la=8,t.G=1,t.connect=function(y,A,T,V){Ot(0),this.W=y,this.H=A||{},T&&V!==void 0&&(this.H.OSID=T,this.H.OAID=V),this.F=this.X,this.I=Fe(this,null,this.W),qe(this)};function ci(y){if(ie(y),y.G==3){var A=y.U++,T=nt(y.I);if(_e(T,"SID",y.K),_e(T,"RID",A),_e(T,"TYPE","terminate"),to(y,T),A=new Fr(y,y.j,A),A.L=2,A.v=Kt(nt(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=A.v,T=!0),T||(A.g=Yh(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Vr(A)}xt(y)}function hl(y){y.g&&(Ia(y),y.g.cancel(),y.g=null)}function ie(y){hl(y),y.u&&(d.clearTimeout(y.u),y.u=null),no(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function qe(y){if(!ot(y.h)&&!y.s){y.s=!0;var A=y.Ga;ye||Te(),re||(ye(),re=!0),fe.add(A,y),y.B=0}}function Sn(y,A){return et(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Lr(_(y.Ga,y,A),Ta(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ee=new Fr(this,this.j,y);let se=this.o;if(this.S&&(se?(se=M(se),G(se,this.S)):se=this.S),this.m!==null||this.O||(ee.H=se,se=null),this.P)e:{for(var A=0,T=0;T<this.i.length;T++){t:{var V=this.i[T];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(A+=V,4096<A){A=T;break e}if(A===4096||T===this.i.length-1){A=T+1;break e}}A=1e3}else A=1e3;A=Xh(this,ee,A),T=nt(this.I),_e(T,"RID",y),_e(T,"CVER",22),this.D&&_e(T,"X-HTTP-Session-Id",this.D),to(this,T),se&&(this.O?A="headers="+encodeURIComponent(String(Js(se)))+"&"+A:this.m&&Es(T,this.m,se)),ma(this.h,ee),this.Ua&&_e(T,"TYPE","init"),this.P?(_e(T,"$req",A),_e(T,"SID","null"),ee.T=!0,Ir(ee,T,null)):Ir(ee,T,A),this.G=2}}else this.G==3&&(y?Ca(this,y):this.i.length==0||ot(this.h)||Ca(this))};function Ca(y,A){var T;A?T=A.l:T=y.U++;const V=nt(y.I);_e(V,"SID",y.K),_e(V,"RID",T),_e(V,"AID",y.T),to(y,V),y.m&&y.o&&Es(V,y.m,y.o),T=new Fr(y,y.j,T,y.B+1),y.m===null&&(T.H=y.o),A&&(y.i=A.D.concat(y.i)),A=Xh(y,T,1e3),T.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),ma(y.h,T),Ir(T,V,A)}function to(y,A){y.H&&Z(y.H,function(T,V){_e(A,V,T)}),y.l&&Gt({},function(T,V){_e(A,V,T)})}function Xh(y,A,T){T=Math.min(y.i.length,T);var V=y.l?_(y.l.Na,y.l,y):null;e:{var ee=y.i;let se=-1;for(;;){const ve=["count="+T];se==-1?0<T?(se=ee[0].g,ve.push("ofs="+se)):se=0:ve.push("ofs="+se);let _t=!0;for(let Yt=0;Yt<T;Yt++){let at=ee[Yt].g;const Vt=ee[Yt].map;if(at-=se,0>at)se=Math.max(0,ee[Yt].g-100),_t=!1;else try{p1(Vt,ve,"req"+at+"_")}catch{V&&V(Vt)}}if(_t){V=ve.join("&");break e}}}return y=y.i.splice(0,T),A.D=y,V}function Kh(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;ye||Te(),re||(ye(),re=!0),fe.add(A,y),y.v=0}}function Uc(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Lr(_(y.Fa,y),Ta(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Lr(_(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),hl(this),sn(this))};function Ia(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function sn(y){y.g=new Fr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=nt(y.qa);_e(A,"RID","rpc"),_e(A,"SID",y.K),_e(A,"AID",y.T),_e(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&_e(A,"TO",y.ja),_e(A,"TYPE","xmlhttp"),to(y,A),y.m&&y.o&&Es(A,y.m,y.o),y.L&&(y.g.I=y.L);var T=y.g;y=y.ia,T.L=1,T.v=Kt(nt(A)),T.m=null,T.P=!0,Dn(T,y)}t.Za=function(){this.C!=null&&(this.C=null,hl(this),Uc(this),Ot(19))};function no(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function Bt(y,A){var T=null;if(y.g==A){no(y),Ia(y),y.g=null;var V=2}else if(pa(y.h,A))T=A.D,cl(y.h,A),V=1;else return;if(y.G!=0){if(A.o)if(V==1){T=A.m?A.m.length:0,A=Date.now()-A.F;var ee=y.B;V=Ks(),kt(V,new jh(V,T)),qe(y)}else Kh(y);else if(ee=A.s,ee==3||ee==0&&0<A.X||!(V==1&&Sn(y,A)||V==2&&Uc(y)))switch(T&&0<T.length&&(A=y.h,A.i=A.i.concat(T)),ee){case 1:dr(y,5);break;case 4:dr(y,10);break;case 3:dr(y,6);break;default:dr(y,2)}}}function Ta(y,A){let T=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(T*=2),T*A}function dr(y,A){if(y.j.info("Error code "+A),A==2){var T=_(y.fb,y),V=y.Xa;const ee=!V;V=new Tr(V||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||cn(V,"https"),Kt(V),ee?Ue(V.toString(),T):g1(V.toString(),T)}else Ot(2);y.G=0,y.l&&y.l.sa(A),xt(y),ie(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function xt(y){if(y.G=0,y.ka=[],y.l){const A=rn(y.h);(A.length!=0||y.i.length!=0)&&(F(y.ka,A),F(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function Fe(y,A,T){var V=T instanceof Tr?nt(T):new Tr(T);if(V.g!="")A&&(V.g=A+"."+V.g),te(V,V.s);else{var ee=d.location;V=ee.protocol,A=A?A+"."+ee.hostname:ee.hostname,ee=+ee.port;var se=new Tr(null);V&&cn(se,V),A&&(se.g=A),ee&&te(se,ee),T&&(se.l=T),V=se}return T=y.D,A=y.ya,T&&A&&_e(V,T,A),_e(V,"VER",y.la),to(y,V),V}function Yh(y,A,T){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new Ft(new Zs({eb:T})):new Ft(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ct(){}t=Ct.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ui(){}ui.prototype.g=function(y,A){return new mn(y,A)};function mn(y,A){gt.call(this),this.g=new Aa(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!S(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!S(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new $i(this)}D(mn,gt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){ci(this.g)},mn.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var T={};T.__data__=y,y=T}else this.u&&(T={},T.__data__=St(y),y=T);A.i.push(new u1(A.Ya++,y)),A.G==3&&qe(A)},mn.prototype.N=function(){this.g.l=null,delete this.j,ci(this.g),delete this.g,mn.aa.N.call(this)};function Qh(y){nn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const T in A){y=T;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}D(Qh,nn);function jr(){vi.call(this),this.status=1}D(jr,vi);function $i(y){this.g=y}D($i,Ct),$i.prototype.ua=function(){kt(this.g,"a")},$i.prototype.ta=function(y){kt(this.g,new Qh(y))},$i.prototype.sa=function(y){kt(this.g,new jr)},$i.prototype.ra=function(){kt(this.g,"b")},ui.prototype.createWebChannel=ui.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,TC=function(){return new ui},IC=function(){return Ks()},CC=oi,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,Gd=Qs,Un.COMPLETE="complete",AC=Un,mt.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",gt.prototype.listen=gt.prototype.K,ou=mt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,_C=Ft}).apply(typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{});const Y2="@firebase/firestore",Q2="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new ry("@firebase/firestore");function pl(){return Ya.logLevel}function Re(t,...e){if(Ya.logLevel<=it.DEBUG){const n=e.map(oy);Ya.debug(`Firestore (${bc}): ${t}`,...n)}}function Bs(t,...e){if(Ya.logLevel<=it.ERROR){const n=e.map(oy);Ya.error(`Firestore (${bc}): ${t}`,...n)}}function $o(t,...e){if(Ya.logLevel<=it.WARN){const n=e.map(oy);Ya.warn(`Firestore (${bc}): ${t}`,...n)}}function oy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SC(t,r,n)}function SC(t,e,n){let r=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bs(r),new Error(r)}function ct(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||SC(e,i,r)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class Q8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z8{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let r=this.i;const i=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let o=new is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new is,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const g=o;e.enqueueRetryable(async()=>{await g.promise,await i(this.currentUser)})},d=g=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new is)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new bC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new ir(e)}}class J8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new J8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const r=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Z2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Z2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=n6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ze(t,e){return t<e?-1:t>e?1:0}function xp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ze(r,i);{const o=RC(),c=r6(o.encode(J2(t,n)),o.encode(J2(e,n)));return c!==0?c:Ze(r,i)}}n+=r>65535?2:1}return Ze(t.length,e.length)}function J2(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function r6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ze(t[n],e[n]);return Ze(t.length,e.length)}function hc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="__name__";class Qi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Qi.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ze(e.length,n.length)}static compareSegments(e,n){const r=Qi.isNumericId(e),i=Qi.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qi.extractNumericId(e).compare(Qi.extractNumericId(n)):xp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jo.fromString(e.substring(4,e.length-2))}}class It extends Qi{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new It(n)}static emptyPath(){return new It([])}}const i6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Qi{construct(e,n,r){return new Gn(e,n,r)}static isValidIdentifier(e){return i6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ex}static keyField(){return new Gn([ex])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(It.fromString(e))}static fromName(e){return new ke(It.fromString(e).popFirst(5))}static empty(){return new ke(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e,n){if(!n)throw new Ae(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function s6(t,e,n,r){if(e===!0&&r===!0)throw new Ae(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tx(t){if(!ke.isDocumentKey(t))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nx(t){if(ke.isDocumentKey(t))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function PC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function N0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function Jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=N0(t);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,e){const n={typeString:t};return e&&(n.value=e),n}function vh(t,e){if(!PC(t))throw new Ae(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Ae(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=-62135596800,ix=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ix);return new Tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rx)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ix}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vh(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:vn("string",Tt._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Tt(0,0))}static max(){return new ze(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=-1;function o6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Xo(i,ke.empty(),e)}function a6(t){return new Xo(t.readTime,t.key,Xu)}class Xo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xo(ze.min(),ke.empty(),Xu)}static max(){return new Xo(ze.max(),ke.empty(),Xu)}}function l6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==c6)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):le.reject(n)}static resolve(e){return new le((n,r)=>{n(e)})}static reject(e){return new le((n,r)=>{r(e)})}static waitFor(e){return new le((n,r)=>{let i=0,o=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++o,c&&o===i&&n()},g=>r(g))}),c=!0,o===i&&n()})}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next(i=>i?le.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new le((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let g=0;g<o;g++){const p=g;n(e[p]).next(x=>{c[p]=x,++d,d===o&&r(c)},x=>i(x))}})}static doWhile(e,n){return new le((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function h6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}P0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function Eh(t){return t==null}function Nf(t){return t===0&&1/t==-1/0}function d6(t){return typeof t=="number"&&Number.isInteger(t)&&!Nf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="";function f6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sx(e)),e=g6(t.get(n),e);return sx(e)}function g6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case OC:n+="";break;default:n+=o}}return n}function sx(t){return t+OC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Wn.RED,this.left=i??Wn.EMPTY,this.right=o??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Wn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ax(this.data.getIterator())}getIteratorFrom(e){return new ax(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new On(this.comparator);return n.data=e,n}}class ax{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Qr([])}unionWith(e){let n=new On(Gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kC("Invalid base64 string: "+o):o}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const p6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=p6.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yo(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="server_timestamp",LC="__type__",FC="__previous_value__",BC="__local_write_time__";function cy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[LC])===null||n===void 0?void 0:n.stringValue)===MC}function O0(t){const e=t.mapValue.fields[FC];return cy(e)?O0(e):e}function Ku(t){const e=Ko(t.mapValue.fields[BC].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r,i,o,c,d,g,p,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=x}}const Pf="(default)";class Yu{constructor(e,n){this.projectId=e,this.database=n||Pf}static empty(){return new Yu("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="__type__",UC="__max__",Ed={mapValue:{fields:{__type__:{stringValue:UC}}}},jC="__vector__",Of="value";function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cy(t)?4:w6(t)?9007199254740991:y6(t)?10:11:Be(28295,{value:t})}function ds(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ku(t).isEqual(Ku(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Ko(i.timestampValue),d=Ko(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Yo(i.bytesValue).isEqual(Yo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return dn(i.geoPointValue.latitude)===dn(o.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return dn(i.integerValue)===dn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=dn(i.doubleValue),d=dn(o.doubleValue);return c===d?Nf(c)===Nf(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return hc(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(ox(c)!==ox(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!ds(c[g],d[g])))return!1;return!0}(t,e);default:return Be(52216,{left:t})}}function Qu(t,e){return(t.values||[]).find(n=>ds(n,e))!==void 0}function dc(t,e){if(t===e)return 0;const n=Qo(t),r=Qo(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(o,c){const d=dn(o.integerValue||o.doubleValue),g=dn(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(t,e);case 3:return lx(t.timestampValue,e.timestampValue);case 4:return lx(Ku(t),Ku(e));case 5:return xp(t.stringValue,e.stringValue);case 6:return function(o,c){const d=Yo(o),g=Yo(c);return d.compareTo(g)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const x=Ze(d[p],g[p]);if(x!==0)return x}return Ze(d.length,g.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const d=Ze(dn(o.latitude),dn(c.latitude));return d!==0?d:Ze(dn(o.longitude),dn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cx(t.arrayValue,e.arrayValue);case 10:return function(o,c){var d,g,p,x;const E=o.fields||{},_=c.fields||{},I=(d=E[Of])===null||d===void 0?void 0:d.arrayValue,D=(g=_[Of])===null||g===void 0?void 0:g.arrayValue,b=Ze(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((x=D==null?void 0:D.values)===null||x===void 0?void 0:x.length)||0);return b!==0?b:cx(I,D)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Ed.mapValue&&c===Ed.mapValue)return 0;if(o===Ed.mapValue)return 1;if(c===Ed.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),p=c.fields||{},x=Object.keys(p);g.sort(),x.sort();for(let E=0;E<g.length&&E<x.length;++E){const _=xp(g[E],x[E]);if(_!==0)return _;const I=dc(d[g[E]],p[x[E]]);if(I!==0)return I}return Ze(g.length,x.length)}(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function lx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Ko(t),r=Ko(e),i=Ze(n.seconds,r.seconds);return i!==0?i:Ze(n.nanos,r.nanos)}function cx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=dc(n[i],r[i]);if(o)return o}return Ze(n.length,r.length)}function fc(t){return vp(t)}function vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ko(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=vp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${vp(n.fields[c])}`;return i+"}"}(t.mapValue):Be(61005,{value:t})}function qd(t){switch(Qo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=O0(t);return e?16+qd(e):16;case 5:return 2*t.stringValue.length;case 6:return Yo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+qd(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return la(r.fields,(o,c)=>{i+=o.length+qd(c)}),i}(t.mapValue);default:throw Be(13486,{value:t})}}function ux(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ep(t){return!!t&&"integerValue"in t}function uy(t){return!!t&&"arrayValue"in t}function hx(t){return!!t&&"nullValue"in t}function dx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $d(t){return!!t&&"mapValue"in t}function y6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VC])===null||n===void 0?void 0:n.stringValue)===jC}function Eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function w6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===UC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=Gn.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,i),r={},i=[],n=d.popLast()}c?r[d.lastSegment()]=Eu(c):i.push(d.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());$d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$d(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){la(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new wr(Eu(this.value))}}function zC(t){const e=[];return la(t.fields,(n,r)=>{const i=new Gn([n]);if($d(r)){const o=zC(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,i,o,c,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Fn(e,0,ze.min(),ze.min(),ze.min(),wr.empty(),0)}static newFoundDocument(e,n,r,i){return new Fn(e,1,n,ze.min(),r,i,0)}static newNoDocument(e,n){return new Fn(e,2,n,ze.min(),ze.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new Fn(e,3,n,ze.min(),ze.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.position=e,this.inclusive=n}}function fx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(c.referenceValue),n.key):r=dc(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n="asc"){this.field=e,this.dir=n}}function x6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{}class xn extends HC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new E6(e,n,r):n==="array-contains"?new C6(e,r):n==="in"?new I6(e,r):n==="not-in"?new T6(e,r):n==="array-contains-any"?new S6(e,r):new xn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _6(e,r):new A6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dc(n,this.value)):n!==null&&Qo(this.value)===Qo(n)&&this.matchesComparison(dc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Li extends HC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Li(e,n)}matches(e){return WC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function WC(t){return t.op==="and"}function GC(t){return v6(t)&&WC(t)}function v6(t){for(const e of t.filters)if(e instanceof Li)return!1;return!0}function _p(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+fc(t.value);if(GC(t))return t.filters.map(e=>_p(e)).join(",");{const e=t.filters.map(n=>_p(n)).join(",");return`${t.op}(${e})`}}function qC(t,e){return t instanceof xn?function(r,i){return i instanceof xn&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)}(t,e):t instanceof Li?function(r,i){return i instanceof Li&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,d)=>o&&qC(c,i.filters[d]),!0):!1}(t,e):void Be(19439)}function $C(t){return t instanceof xn?function(n){return`${n.field.canonicalString()} ${n.op} ${fc(n.value)}`}(t):t instanceof Li?function(n){return n.op.toString()+" {"+n.getFilters().map($C).join(" ,")+"}"}(t):"Filter"}class E6 extends xn{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class _6 extends xn{constructor(e,n){super(e,"in",n),this.keys=XC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A6 extends xn{constructor(e,n){super(e,"not-in",n),this.keys=XC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class C6 extends xn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uy(n)&&Qu(n.arrayValue,this.value)}}class I6 extends xn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qu(this.value.arrayValue,n)}}class T6 extends xn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qu(this.value.arrayValue,n)}}class S6 extends xn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Pe=null}}function px(t,e=null,n=[],r=[],i=null,o=null,c=null){return new b6(t,e,n,r,i,o,c)}function hy(t){const e=Ge(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_p(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fc(r)).join(",")),e.Pe=n}return e.Pe}function dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gx(t.startAt,e.startAt)&&gx(t.endAt,e.endAt)}function Ap(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n=null,r=[],i=[],o=null,c="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function R6(t,e,n,r,i,o,c,d){return new _h(t,e,n,r,i,o,c,d)}function D0(t){return new _h(t)}function mx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KC(t){return t.collectionGroup!==null}function _u(t){const e=Ge(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new On(Gn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new kf(o,r))}),n.has(Gn.keyField().canonicalString())||e.Te.push(new kf(Gn.keyField(),r))}return e.Te}function ss(t){const e=Ge(t);return e.Ie||(e.Ie=N6(e,_u(t))),e.Ie}function N6(t,e){if(t.limitType==="F")return px(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new kf(i.field,o)});const n=t.endAt?new Df(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Df(t.startAt.position,t.startAt.inclusive):null;return px(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cp(t,e){const n=t.filters.concat([e]);return new _h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ip(t,e,n){return new _h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function k0(t,e){return dy(ss(t),ss(e))&&t.limitType===e.limitType}function YC(t){return`${hy(ss(t))}|lt:${t.limitType}`}function ml(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$C(i)).join(", ")}]`),Eh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fc(i)).join(",")),`Target(${r})`}(ss(t))}; limitType=${t.limitType})`}function M0(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of _u(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,d,g){const p=fx(c,d,g);return c.inclusive?p<=0:p<0}(r.startAt,_u(r),i)||r.endAt&&!function(c,d,g){const p=fx(c,d,g);return c.inclusive?p>=0:p>0}(r.endAt,_u(r),i))}(t,e)}function P6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QC(t){return(e,n)=>{let r=!1;for(const i of _u(t)){const o=O6(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function O6(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(o,c,d){const g=c.data.field(o),p=d.data.field(o);return g!==null&&p!==null?dc(g,p):Be(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return DC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new tn(ke.comparator);function Vs(){return D6}const ZC=new tn(ke.comparator);function au(...t){let e=ZC;for(const n of t)e=e.insert(n.key,n);return e}function JC(t){let e=ZC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Da(){return Au()}function eI(){return Au()}function Au(){return new rl(t=>t.toString(),(t,e)=>t.isEqual(e))}const k6=new tn(ke.comparator),M6=new On(ke.comparator);function st(...t){let e=M6;for(const n of t)e=e.add(n);return e}const L6=new On(Ze);function F6(){return L6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function tI(t){return{integerValue:""+t}}function nI(t,e){return d6(e)?tI(e):fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this._=void 0}}function B6(t,e,n){return t instanceof Mf?function(i,o){const c={fields:{[LC]:{stringValue:MC},[BC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cy(o)&&(o=O0(o)),o&&(c.fields[FC]=o),{mapValue:c}}(n,e):t instanceof Zu?iI(t,e):t instanceof Ju?sI(t,e):function(i,o){const c=rI(i,o),d=yx(c)+yx(i.Ee);return Ep(c)&&Ep(i.Ee)?tI(d):fy(i.serializer,d)}(t,e)}function V6(t,e,n){return t instanceof Zu?iI(t,e):t instanceof Ju?sI(t,e):n}function rI(t,e){return t instanceof eh?function(r){return Ep(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Mf extends L0{}class Zu extends L0{constructor(e){super(),this.elements=e}}function iI(t,e){const n=oI(e);for(const r of t.elements)n.some(i=>ds(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ju extends L0{constructor(e){super(),this.elements=e}}function sI(t,e){let n=oI(e);for(const r of t.elements)n=n.filter(i=>!ds(i,r));return{arrayValue:{values:n}}}class eh extends L0{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function yx(t){return dn(t.integerValue||t.doubleValue)}function oI(t){return uy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this.field=e,this.transform=n}}function j6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zu&&i instanceof Zu||r instanceof Ju&&i instanceof Ju?hc(r.elements,i.elements,ds):r instanceof eh&&i instanceof eh?ds(r.Ee,i.Ee):r instanceof Mf&&i instanceof Mf}(t.transform,e.transform)}class z6{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let F0=class{};function aI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gy(t.key,xr.none()):new Ah(t.key,t.data,xr.none());{const n=t.data,r=wr.empty();let i=new On(Gn.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new ca(t.key,r,new Qr(i.toArray()),xr.none())}}function H6(t,e,n){t instanceof Ah?function(i,o,c){const d=i.value.clone(),g=xx(i.fieldTransforms,o,c.transformResults);d.setAll(g),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof ca?function(i,o,c){if(!Xd(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=xx(i.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(lI(i)),g.setAll(d),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Cu(t,e,n,r){return t instanceof Ah?function(o,c,d,g){if(!Xd(o.precondition,c))return d;const p=o.value.clone(),x=vx(o.fieldTransforms,g,c);return p.setAll(x),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof ca?function(o,c,d,g){if(!Xd(o.precondition,c))return d;const p=vx(o.fieldTransforms,g,c),x=c.data;return x.setAll(lI(o)),x.setAll(p),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(t,e,n,r):function(o,c,d){return Xd(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function W6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=rI(r.transform,i||null);o!=null&&(n===null&&(n=wr.empty()),n.set(r.field,o))}return n||null}function wx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hc(r,i,(o,c)=>j6(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ah extends F0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ca extends F0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function lI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xx(t,e,n){const r=new Map;ct(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,V6(c,d,n[i]))}return r}function vx(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,B6(o,c,e))}return r}class gy extends F0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends F0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&H6(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eI();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(i.key)?null:d;const g=aI(c,d);g!==null&&r.set(i.key,g),c.isValidDocument()||c.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),st())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(n,r)=>wx(n,r))&&hc(this.baseMutations,e.baseMutations,(n,r)=>wx(n,r))}}class py{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ct(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return k6}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new py(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,lt;function uI(t){switch(t){case ae.OK:return Be(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function hI(t){if(t===void 0)return Bs("GRPC error has no .code"),ae.UNKNOWN;switch(t){case yn.OK:return ae.OK;case yn.CANCELLED:return ae.CANCELLED;case yn.UNKNOWN:return ae.UNKNOWN;case yn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case yn.INTERNAL:return ae.INTERNAL;case yn.UNAVAILABLE:return ae.UNAVAILABLE;case yn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case yn.NOT_FOUND:return ae.NOT_FOUND;case yn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case yn.ABORTED:return ae.ABORTED;case yn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case yn.DATA_LOSS:return ae.DATA_LOSS;default:return Be(39323,{code:t})}}(lt=yn||(yn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new jo([4294967295,4294967295],0);function Ex(t){const e=RC().encode(t),n=new EC;return n.update(e),new Uint8Array(n.digest())}function _x(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jo([n,r],0),new jo([i,o],0)]}class my{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(r<0)throw new lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=jo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(jo.fromNumber(r)));return i.compare(X6)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ex(e),[r,i]=_x(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new my(o,i,n);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const n=Ex(e),[r,i]=_x(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new B0(ze.min(),i,new tn(Ze),Vs(),st())}}class Ch{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ch(r,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class dI{constructor(e,n){this.targetId=e,this.De=n}}class fI{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ax{constructor(){this.ve=0,this.Ce=Cx(),this.Fe=Xn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=st(),n=st(),r=st();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be(38017,{changeType:o})}}),new Ch(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Cx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class K6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vs(),this.je=_d(),this.Je=_d(),this.He=new tn(Ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(Ap(o))if(r===0){const c=new ke(o.path);this.Xe(n,c,Fn.newNoDocument(c,ze.min()))}else ct(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const d=this._t(e),g=d?this.ut(d,e,c):1;if(g!==0){this.rt(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,d;try{c=Yo(r).toUint8Array()}catch(g){if(g instanceof kC)return $o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new my(c,i,o)}catch(g){return $o(g instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.fe===0?null:d}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,c)=>{const d=this.st(c);if(d){if(o.current&&Ap(d.target)){const g=new ke(d.target.path);this.Tt(g).has(c)||this.It(c,g)||this.Xe(c,g,Fn.newNoDocument(g,e))}o.Ne&&(n.set(c,o.Le()),o.ke())}});let r=st();this.Je.forEach((o,c)=>{let d=!0;c.forEachWhile(g=>{const p=this.st(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const i=new B0(e,n,this.He,this.ze,r);return this.ze=Vs(),this.je=_d(),this.Je=_d(),this.He=new tn(Ze),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ax,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new On(Ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new On(Ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ax),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function _d(){return new tn(ke.comparator)}function Cx(){return new tn(ke.comparator)}const Y6={asc:"ASCENDING",desc:"DESCENDING"},Q6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z6={and:"AND",or:"OR"};class J6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tp(t,e){return t.useProto3Json||Eh(e)?e:{value:e}}function Lf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eP(t,e){return Lf(t,e.toTimestamp())}function ei(t){return ct(!!t,49232),ze.fromTimestamp(function(n){const r=Ko(n);return new Tt(r.seconds,r.nanos)}(t))}function yy(t,e){return Sp(t,e).canonicalString()}function Sp(t,e){const n=function(i){return new It(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pI(t){const e=It.fromString(t);return ct(EI(e),10190,{key:e.toString()}),e}function Ff(t,e){return yy(t.databaseId,e.path)}function Iu(t,e){const n=pI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(yI(n))}function mI(t,e){return yy(t.databaseId,e)}function tP(t){const e=pI(t);return e.length===4?It.emptyPath():yI(e)}function bp(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ix(t,e,n){return{name:Ff(t,e),fields:n.value.mapValue.fields}}function nP(t,e){return"found"in e?function(r,i){ct(!!i.found,43571),i.found.name,i.found.updateTime;const o=Iu(r,i.found.name),c=ei(i.found.updateTime),d=i.found.createTime?ei(i.found.createTime):ze.min(),g=new wr({mapValue:{fields:i.found.fields}});return Fn.newFoundDocument(o,c,d,g)}(t,e):"missing"in e?function(r,i){ct(!!i.missing,3894),ct(!!i.readTime,22933);const o=Iu(r,i.missing),c=ei(i.readTime);return Fn.newNoDocument(o,c)}(t,e):Be(7234,{result:e})}function rP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,x){return p.useProto3Json?(ct(x===void 0||typeof x=="string",58123),Xn.fromBase64String(x||"")):(ct(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Xn.fromUint8Array(x||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const x=p.code===void 0?ae.UNKNOWN:hI(p.code);return new Ae(x,p.message||"")}(c);n=new fI(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Iu(t,r.document.name),o=ei(r.document.updateTime),c=r.document.createTime?ei(r.document.createTime):ze.min(),d=new wr({mapValue:{fields:r.document.fields}}),g=Fn.newFoundDocument(i,o,c,d),p=r.targetIds||[],x=r.removedTargetIds||[];n=new Kd(p,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Iu(t,r.document),o=r.readTime?ei(r.readTime):ze.min(),c=Fn.newNoDocument(i,o),d=r.removedTargetIds||[];n=new Kd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Iu(t,r.document),o=r.removedTargetIds||[];n=new Kd([],o,i,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new $6(i,o),d=r.targetId;n=new dI(d,c)}}return n}function wI(t,e){let n;if(e instanceof Ah)n={update:Ix(t,e.key,e.value)};else if(e instanceof gy)n={delete:Ff(t,e.key)};else if(e instanceof ca)n={update:Ix(t,e.key,e.data),updateMask:dP(e.fieldMask)};else{if(!(e instanceof cI))return Be(16599,{Rt:e.type});n={verify:Ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof eh)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw Be(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:eP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)}(t,e.precondition)),n}function iP(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?ei(i.updateTime):ei(o);return c.isEqual(ze.min())&&(c=ei(o)),new z6(c,i.transformResults||[])}(n,e))):[]}function sP(t,e){return{documents:[mI(t,e.path)]}}function oP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mI(t,i);const o=function(p){if(p.length!==0)return vI(Li.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(x=>function(_){return{field:yl(_.field),direction:cP(_.dir)}}(x))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=Tp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:n,parent:i}}function aP(t){let e=tP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ct(r===1,65062);const x=n.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let o=[];n.where&&(o=function(E){const _=xI(E);return _ instanceof Li&&GC(_)?_.getFilters():[_]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(_=>function(D){return new kf(wl(D.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(_))}(n.orderBy));let d=null;n.limit&&(d=function(E){let _;return _=typeof E=="object"?E.value:E,Eh(_)?null:_}(n.limit));let g=null;n.startAt&&(g=function(E){const _=!!E.before,I=E.values||[];return new Df(I,_)}(n.startAt));let p=null;return n.endAt&&(p=function(E){const _=!E.before,I=E.values||[];return new Df(I,_)}(n.endAt)),R6(e,i,c,o,d,"F",g,p)}function lP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wl(n.unaryFilter.field);return xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wl(n.unaryFilter.field);return xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wl(n.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wl(n.unaryFilter.field);return xn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(t):t.fieldFilter!==void 0?function(n){return xn.create(wl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Li.create(n.compositeFilter.filters.map(r=>xI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(n.compositeFilter.op))}(t):Be(30097,{filter:t})}function cP(t){return Y6[t]}function uP(t){return Q6[t]}function hP(t){return Z6[t]}function yl(t){return{fieldPath:t.canonicalString()}}function wl(t){return Gn.fromServerFormat(t.fieldPath)}function vI(t){return t instanceof xn?function(n){if(n.op==="=="){if(dx(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NAN"}};if(hx(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dx(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NAN"}};if(hx(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(n.field),op:uP(n.op),value:n.value}}}(t):t instanceof Li?function(n){const r=n.getFilters().map(i=>vI(i));return r.length===1?r[0]:{compositeFilter:{op:hP(n.op),filters:r}}}(t):Be(54877,{filter:t})}function dP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r,i,o=ze.min(),c=ze.min(),d=Xn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.gt=e}}function gP(t){const e=aP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.Dn=new mP}addToCollectionParentIndex(e,n){return this.Dn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Xo.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Xo.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class mP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new On(It.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_I=41943040;class Nr{static withCacheSize(e){return new Nr(e,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(_I,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new gc(0)}static ur(){return new gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="LruGarbageCollector",yP=1048576;function bx([t,e],[n,r]){const i=Ze(t,n);return i===0?Ze(e,r):i}class wP{constructor(e){this.Tr=e,this.buffer=new On(bx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Re(Sx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nc(n)?Re(Sx,"Ignoring IndexedDB error during garbage collection: ",n):await Rc(n)}await this.Rr(3e5)})}}class vP{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return le.resolve(P0.ue);const r=new wP(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Tx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,c,d,g,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,n))).next(E=>(o=E,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(p=Date.now(),pl()<=it.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function EP(t,e){return new vP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.changes=new rl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cu(r.mutation,i,Qr.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,n,r=st()){const i=Da();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=au();return o.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Da();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,st()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,r,i){let o=Vs();const c=Au(),d=function(){return Au()}();return n.forEach((g,p)=>{const x=r.get(p.key);i.has(p.key)&&(x===void 0||x.mutation instanceof ca)?o=o.insert(p.key,p):x!==void 0?(c.set(p.key,x.mutation.getFieldMask()),Cu(x.mutation,p,x.mutation.getFieldMask(),Tt.now())):c.set(p.key,Qr.empty())}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((p,x)=>c.set(p,x)),n.forEach((p,x)=>{var E;return d.set(p,new AP(x,(E=c.get(p))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,n){const r=Au();let i=new tn((c,d)=>c-d),o=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const p=n.get(g);if(p===null)return;let x=r.get(g)||Qr.empty();x=d.applyToLocalView(p,x),r.set(g,x);const E=(i.get(d.batchId)||st()).add(g);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,x=g.value,E=eI();x.forEach(_=>{if(!o.has(_)){const I=aI(n.get(_),r.get(_));I!==null&&E.set(_,I),o=o.add(_)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):le.resolve(Da());let d=Xu,g=o;return c.next(p=>le.forEach(p,(x,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(x)?le.resolve():this.remoteDocumentCache.getEntry(e,x).next(_=>{g=g.insert(x,_)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,g,p,st())).next(x=>({batchId:d,changes:JC(x)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=au();return this.indexManager.getCollectionParents(e,o).next(d=>le.forEach(d,g=>{const p=function(E,_){return new _h(_,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,g.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(x=>{x.forEach((E,_)=>{c=c.insert(E,_)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((g,p)=>{const x=p.getKey();c.get(x)===null&&(c=c.insert(x,Fn.newInvalidDocument(x)))});let d=au();return c.forEach((g,p)=>{const x=o.get(g);x!==void 0&&Cu(x.mutation,p,Qr.empty(),Tt.now()),M0(n,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return le.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ei(i.createTime)}}(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:gP(i.bundledQuery),readTime:ei(i.readTime)}}(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.overlays=new tn(ke.comparator),this.kr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Da();return le.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),le.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const i=Da(),o=n.length+1,c=new ke(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return le.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new tn((p,x)=>p-x);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let x=o.get(p.largestBatchId);x===null&&(x=Da(),o=o.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const d=Da(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,x)=>d.set(p,x)),!(d.size()>=i)););return le.resolve(d)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new q6(n,r));let o=this.kr.get(n);o===void 0&&(o=st(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.qr=new On(Mn.Qr),this.$r=new On(Mn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Mn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Mn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ke(new It([])),r=new Mn(n,e),i=new Mn(n,e+1),o=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ke(new It([])),r=new Mn(n,e),i=new Mn(n,e+1);let o=st();return this.$r.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new Mn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ke.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new On(Mn.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new G6(o,n,r,i);this.mutationQueue.push(c);for(const d of i)this.Yr=this.Yr.add(new Mn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?ly:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mn(n,0),i=new Mn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],c=>{const d=this.Zr(c.Hr);o.push(d)}),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new On(Ze);return n.forEach(i=>{const o=new Mn(i,0),c=new Mn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],d=>{r=r.add(d.Hr)})}),le.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const c=new Mn(new ke(o),0);let d=new On(Ze);return this.Yr.forEachWhile(g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(g.Hr)),!0)},c),le.resolve(this.ei(d))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ct(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return le.forEach(n.mutations,i=>{const o=new Mn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Mn(n,0),i=this.Yr.firstAfterOrEqual(r);return le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.ni=e,this.docs=function(){return new tn(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=Vs();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Vs();const c=n.path,d=new ke(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:x}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||l6(a6(x),r)<=0||(i.has(x.key)||M0(n,x))&&(o=o.insert(x.key,x.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Be(9500)}ri(e,n){return le.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NP(this)}getSize(e){return le.resolve(this.size)}}class NP extends _P{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),le.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.persistence=e,this.ii=new rl(n=>hy(n),dy),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new wy,this.targetCount=0,this._i=gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),le.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.hr(n),le.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(o).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),le.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.ai={},this.overlays={},this.ui=new P0(0),this.ci=!1,this.ci=!0,this.li=new SP,this.referenceDelegate=e(this),this.hi=new PP(this),this.indexManager=new pP,this.remoteDocumentCache=function(i){return new RP(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new fP(n),this.Ti=new IP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new bP(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Re("MemoryPersistence","Starting transaction:",e);const i=new OP(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return le.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class OP extends u6{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Ai=new wy,this.Ri=null}static Vi(e){return new xy(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,r=>{const i=ke.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ze.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return le.or([()=>le.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Bf{constructor(e,n){this.persistence=e,this.gi=new rl(r=>f6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=EP(this,n)}static Vi(e,n){return new Bf(e,n)}Ii(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return le.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?le.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(d=>{d||(r++,o.removeEntry(c,ze.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qd(e.data.value)),n}Sr(e,n,r){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=st(),i=st();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return NN()?8:h6(ar())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new DP;return this.ws(e,n,c).next(d=>{if(o.result=d,this.Rs)return this.Ss(e,n,c,d.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(pl()<=it.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",ml(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(pl()<=it.DEBUG&&Re("QueryEngine","Query:",ml(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(pl()<=it.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",ml(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):le.resolve())}ps(e,n){if(mx(n))return le.resolve(null);let r=ss(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ip(n,null,"F"),r=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=st(...o);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(g=>{const p=this.bs(n,d);return this.Ds(n,p,c,g.readTime)?this.ps(e,Ip(n,null,"F")):this.vs(e,p,n,g)}))})))}ys(e,n,r,i){return mx(n)||i.isEqual(ze.min())?le.resolve(null):this.gs.getDocuments(e,r).next(o=>{const c=this.bs(n,o);return this.Ds(n,c,r,i)?le.resolve(null):(pl()<=it.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ml(n)),this.vs(e,c,n,o6(i,Xu)).next(d=>d))})}bs(e,n){let r=new On(QC(e));return n.forEach((i,o)=>{M0(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return pl()<=it.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",ml(n)),this.gs.getDocumentsMatchingQuery(e,n,Xo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="LocalStore",MP=3e8;class LP{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new tn(Ze),this.Ms=new rl(o=>hy(o),dy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function FP(t,e,n,r){return new LP(t,e,n,r)}async function CI(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let g=st();for(const p of i){c.push(p.batchId);for(const x of p.mutations)g=g.add(x.key)}for(const p of o){d.push(p.batchId);for(const x of p.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(r,g).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:d}))})})}function BP(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(d,g,p,x){const E=p.batch,_=E.keys();let I=le.resolve();return _.forEach(D=>{I=I.next(()=>x.getEntry(g,D)).next(b=>{const F=p.docVersions.get(D);ct(F!==null,48541),b.version.compareTo(F)<0&&(E.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),x.addEntry(b)))})}),I.next(()=>d.mutationQueue.removeMutationBatch(g,E))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=st();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function II(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function VP(t,e){const n=Ge(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const d=[];e.targetChanges.forEach((x,E)=>{const _=i.get(E);if(!_)return;d.push(n.hi.removeMatchingKeys(o,x.removedDocuments,E).next(()=>n.hi.addMatchingKeys(o,x.addedDocuments,E)));let I=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(Xn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):x.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(x.resumeToken,r)),i=i.insert(E,I),function(b,F,R){return b.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=MP?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(_,I,x)&&d.push(n.hi.updateTargetData(o,I))});let g=Vs(),p=st();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,x))}),d.push(UP(o,c,e.documentUpdates).next(x=>{g=x.Ls,p=x.ks})),!r.isEqual(ze.min())){const x=n.hi.getLastRemoteSnapshotVersion(o).next(E=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(x)}return le.waitFor(d).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,g,p)).next(()=>g)}).then(o=>(n.Fs=i,o))}function UP(t,e,n){let r=st(),i=st();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=Vs();return n.forEach((d,g)=>{const p=o.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(ze.min())?(e.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(d,g)):Re(Ey,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{Ls:c,ks:i}})}function jP(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zP(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,le.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new So(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Rp(t,e,n){const r=Ge(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Nc(c))throw c;Re(Ey,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Rx(t,e,n){const r=Ge(t);let i=ze.min(),o=st();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,p,x){const E=Ge(g),_=E.Ms.get(x);return _!==void 0?le.resolve(E.Fs.get(_)):E.hi.getTargetData(p,x)}(r,c,ss(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next(g=>{o=g})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:ze.min(),n?o:st())).next(d=>(HP(r,P6(e),d),{documents:d,qs:o})))}function HP(t,e,n){let r=t.xs.get(e)||ze.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}class Nx{constructor(){this.activeTargetIds=F6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WP{constructor(){this.Fo=new Nx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Nx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="ConnectivityMonitor";class Ox{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Re(Px,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Re(Px,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad=null;function Np(){return Ad===null?Ad=function(){return 268435456+Math.round(2147483648*Math.random())}():Ad++,"0x"+Ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $P{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const c=Np(),d=this.Go(e,n.toUriEncodedString());Re(eg,`Sending RPC '${e}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,i,o);const{host:p}=new URL(d),x=Tc(p);return this.jo(e,d,g,r,x).then(E=>(Re(eg,`Received RPC '${e}' ${c}: `,E),E),E=>{throw $o(eg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E})}Jo(e,n,r,i,o,c){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=qP[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class KP extends $P{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const c=Np();return new Promise((d,g)=>{const p=new _C;p.setWithCredentials(!0),p.listenOnce(AC.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Gd.NO_ERROR:const E=p.getResponseJson();Re(nr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Gd.TIMEOUT:Re(nr,`RPC '${e}' ${c} timed out`),g(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const _=p.getStatus();if(Re(nr,`RPC '${e}' ${c} failed with status:`,_,"response text:",p.getResponseText()),_>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const D=I==null?void 0:I.error;if(D&&D.status&&D.message){const b=function(R){const S=R.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(S)>=0?S:ae.UNKNOWN}(D.status);g(new Ae(b,D.message))}else g(new Ae(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{Re(nr,`RPC '${e}' ${c} completed.`)}});const x=JSON.stringify(i);Re(nr,`RPC '${e}' ${c} sending request:`,i),p.send(n,"POST",x,r,15)})}P_(e,n,r){const i=Np(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=TC(),d=IC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const x=o.join("");Re(nr,`Creating RPC '${e}' stream ${i}: ${x}`,g);const E=c.createWebChannel(x,g);this.T_(E);let _=!1,I=!1;const D=new XP({Ho:F=>{I?Re(nr,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(_||(Re(nr,`Opening RPC '${e}' stream ${i} transport.`),E.open(),_=!0),Re(nr,`RPC '${e}' stream ${i} sending:`,F),E.send(F))},Yo:()=>E.close()}),b=(F,R,S)=>{F.listen(R,O=>{try{S(O)}catch(U){setTimeout(()=>{throw U},0)}})};return b(E,ou.EventType.OPEN,()=>{I||(Re(nr,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),b(E,ou.EventType.CLOSE,()=>{I||(I=!0,Re(nr,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(E))}),b(E,ou.EventType.ERROR,F=>{I||(I=!0,$o(nr,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),D.__(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),b(E,ou.EventType.MESSAGE,F=>{var R;if(!I){const S=F.data[0];ct(!!S,16349);const O=S,U=(O==null?void 0:O.error)||((R=O[0])===null||R===void 0?void 0:R.error);if(U){Re(nr,`RPC '${e}' stream ${i} received error:`,U);const Y=U.status;let Z=function(L){const G=yn[L];if(G!==void 0)return hI(G)}(Y),k=U.message;Z===void 0&&(Z=ae.INTERNAL,k="Unknown error status: "+Y+" with message "+U.message),I=!0,D.__(new Ae(Z,k)),E.close()}else Re(nr,`RPC '${e}' stream ${i} received:`,S),D.a_(S)}}),b(d,CC.STAT_EVENT,F=>{F.stat===wp.PROXY?Re(nr,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===wp.NOPROXY&&Re(nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){return new J6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="PersistentStream";class TI{constructor(e,n,r,i,o,c,d,g){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _y(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Bs(n.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Re(Dx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Re(Dx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YP extends TI{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=rP(this.serializer,e),r=function(o){if(!("targetChange"in o))return ze.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?ei(c.readTime):ze.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=bp(this.serializer),n.addTarget=function(o,c){let d;const g=c.target;if(d=Ap(g)?{documents:sP(o,g)}:{query:oP(o,g).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=gI(o,c.resumeToken);const p=Tp(o,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(ze.min())>0){d.readTime=Lf(o,c.snapshotVersion.toTimestamp());const p=Tp(o,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=lP(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=bp(this.serializer),n.removeTarget=e,this.k_(n)}}class QP extends TI{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=iP(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=bp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wI(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{}class JP extends ZP{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,Sp(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Sp(n,r),i,c,d,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ae.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class eO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Bs(n),this._a=!1):Re("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="RemoteStore";class tO{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{il(this)&&(Re(Qa,"Restarting streams for network reachability change."),await async function(g){const p=Ge(g);p.Ia.add(4),await Ih(p),p.Aa.set("Unknown"),p.Ia.delete(4),await U0(p)}(this))})}),this.Aa=new eO(r,i)}}async function U0(t){if(il(t))for(const e of t.da)await e(!0)}async function Ih(t){for(const e of t.da)await e(!1)}function SI(t,e){const n=Ge(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ty(n)?Iy(n):Pc(n).x_()&&Cy(n,e))}function Ay(t,e){const n=Ge(t),r=Pc(n);n.Ta.delete(e),r.x_()&&bI(n,e),n.Ta.size===0&&(r.x_()?r.B_():il(n)&&n.Aa.set("Unknown"))}function Cy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pc(t).H_(e)}function bI(t,e){t.Ra.$e(e),Pc(t).Y_(e)}function Iy(t){t.Ra=new K6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pc(t).start(),t.Aa.aa()}function Ty(t){return il(t)&&!Pc(t).M_()&&t.Ta.size>0}function il(t){return Ge(t).Ia.size===0}function RI(t){t.Ra=void 0}async function nO(t){t.Aa.set("Online")}async function rO(t){t.Ta.forEach((e,n)=>{Cy(t,e)})}async function iO(t,e){RI(t),Ty(t)?(t.Aa.la(e),Iy(t)):t.Aa.set("Unknown")}async function sO(t,e,n){if(t.Aa.set("Online"),e instanceof fI&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ta.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ta.delete(d),i.Ra.removeTarget(d))}(t,e)}catch(r){Re(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(t,r)}else if(e instanceof Kd?t.Ra.Ye(e):e instanceof dI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ze.min()))try{const r=await II(t.localStore);n.compareTo(r)>=0&&await function(o,c){const d=o.Ra.Pt(c);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const x=o.Ta.get(p);x&&o.Ta.set(p,x.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,p)=>{const x=o.Ta.get(g);if(!x)return;o.Ta.set(g,x.withResumeToken(Xn.EMPTY_BYTE_STRING,x.snapshotVersion)),bI(o,g);const E=new So(x.target,g,p,x.sequenceNumber);Cy(o,E)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(r){Re(Qa,"Failed to raise snapshot:",r),await Vf(t,r)}}async function Vf(t,e,n){if(!Nc(e))throw e;t.Ia.add(1),await Ih(t),t.Aa.set("Offline"),n||(n=()=>II(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re(Qa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await U0(t)})}function NI(t,e){return e().catch(n=>Vf(t,n,e))}async function j0(t){const e=Ge(t),n=Zo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ly;for(;oO(e);)try{const i=await jP(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,aO(e,i)}catch(i){await Vf(e,i)}PI(e)&&OI(e)}function oO(t){return il(t)&&t.Pa.length<10}function aO(t,e){t.Pa.push(e);const n=Zo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function PI(t){return il(t)&&!Zo(t).M_()&&t.Pa.length>0}function OI(t){Zo(t).start()}async function lO(t){Zo(t).na()}async function cO(t){const e=Zo(t);for(const n of t.Pa)e.X_(n.mutations)}async function uO(t,e,n){const r=t.Pa.shift(),i=py.from(r,e,n);await NI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await j0(t)}async function hO(t,e){e&&Zo(t).Z_&&await async function(r,i){if(function(c){return uI(c)&&c!==ae.ABORTED}(i.code)){const o=r.Pa.shift();Zo(r).N_(),await NI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await j0(r)}}(t,e),PI(t)&&OI(t)}async function kx(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Re(Qa,"RemoteStore received new credentials");const r=il(n);n.Ia.add(3),await Ih(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await U0(n)}async function dO(t,e){const n=Ge(t);e?(n.Ia.delete(2),await U0(n)):e||(n.Ia.add(2),await Ih(n),n.Aa.set("Unknown"))}function Pc(t){return t.Va||(t.Va=function(n,r,i){const o=Ge(n);return o.ia(),new YP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:nO.bind(null,t),e_:rO.bind(null,t),n_:iO.bind(null,t),J_:sO.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ty(t)?Iy(t):t.Aa.set("Unknown")):(await t.Va.stop(),RI(t))})),t.Va}function Zo(t){return t.ma||(t.ma=function(n,r,i){const o=Ge(n);return o.ia(),new QP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:lO.bind(null,t),n_:hO.bind(null,t),ea:cO.bind(null,t),ta:uO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await j0(t)):(await t.ma.stop(),t.Pa.length>0&&(Re(Qa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,d=new Sy(e,n,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(t,e){if(Bs("AsyncQueue",`${e}: ${t}`),Nc(t))return new Ae(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=au(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.fa=new tn(ke.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class pc{constructor(e,n,r,i,o,c,d,g,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new pc(e,n,zl.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&k0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class gO{constructor(){this.queries=Lx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ge(n),o=i.queries;i.queries=Lx(),o.forEach((c,d)=>{for(const g of d.wa)g.onError(r)})})(this,new Ae(ae.ABORTED,"Firestore shutting down"))}}function Lx(){return new rl(t=>YC(t),k0)}async function Ry(t,e){const n=Ge(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new fO,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const d=by(c,`Initialization of query '${ml(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Py(n)}async function Ny(t,e){const n=Ge(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pO(t,e){const n=Ge(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const d of c.wa)d.Ca(i)&&(r=!0);c.ya=i}}r&&Py(n)}function mO(t,e,n){const r=Ge(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function Py(t){t.Da.forEach(e=>{e.next()})}var Pp,Fx;(Fx=Pp||(Pp={})).Fa="default",Fx.Cache="cache";class Oy{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.key=e}}class kI{constructor(e){this.key=e}}class yO{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=st(),this.mutatedKeys=st(),this.Xa=QC(e),this.eu=new zl(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Mx,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,d=!1;const g=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,E)=>{const _=i.get(x),I=M0(this.query,E)?E:null,D=!!_&&this.mutatedKeys.has(_.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;_&&I?_.data.isEqual(I.data)?D!==b&&(r.track({type:3,doc:I}),F=!0):this.iu(_,I)||(r.track({type:2,doc:I}),F=!0,(g&&this.Xa(I,g)>0||p&&this.Xa(I,p)<0)&&(d=!0)):!_&&I?(r.track({type:0,doc:I}),F=!0):_&&!I&&(r.track({type:1,doc:_}),F=!0,(g||p)&&(d=!0)),F&&(I?(c=c.add(I),o=b?o.add(x):o.delete(x)):(c=c.delete(x),o=o.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),o=o.delete(x.key),r.track({type:1,doc:x})}return{eu:c,ru:r,Ds:d,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((x,E)=>function(I,D){const b=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:F})}};return b(I)-b(D)}(x.type,E.type)||this.Xa(x.doc,E.doc)),this.su(r),i=i!=null&&i;const d=n&&!i?this.ou():[],g=this.Za.size===0&&this.current&&!i?1:0,p=g!==this.Ya;return this.Ya=g,c.length!==0||p?{snapshot:new pc(this.query,e.eu,o,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Mx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=st(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new kI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new DI(r))}),n}uu(e){this.Ha=e.qs,this.Za=st();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return pc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Dy="SyncEngine";class wO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xO{constructor(e){this.key=e,this.lu=!1}}class vO{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new rl(d=>YC(d),k0),this.Tu=new Map,this.Iu=new Set,this.du=new tn(ke.comparator),this.Eu=new Map,this.Au=new wy,this.Ru={},this.Vu=new Map,this.mu=gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function EO(t,e,n=!0){const r=UI(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await MI(r,e,n,!0),i}async function _O(t,e){const n=UI(t);await MI(n,e,!0,!1)}async function MI(t,e,n,r){const i=await zP(t.localStore,ss(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await AO(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&SI(t.remoteStore,i),d}async function AO(t,e,n,r,i){t.gu=(E,_,I)=>async function(b,F,R,S){let O=F.view.nu(R);O.Ds&&(O=await Rx(b.localStore,F.query,!1).then(({documents:k})=>F.view.nu(k,O)));const U=S&&S.targetChanges.get(F.targetId),Y=S&&S.targetMismatches.get(F.targetId)!=null,Z=F.view.applyChanges(O,b.isPrimaryClient,U,Y);return Vx(b,F.targetId,Z._u),Z.snapshot}(t,E,_,I);const o=await Rx(t.localStore,e,!0),c=new yO(e,o.qs),d=c.nu(o.documents),g=Ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=c.applyChanges(d,t.isPrimaryClient,g);Vx(t,n,p._u);const x=new wO(e,n,c);return t.Pu.set(e,x),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),p.snapshot}async function CO(t,e,n){const r=Ge(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(c=>!k0(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ay(r.remoteStore,i.targetId),Op(r,i.targetId)}).catch(Rc)):(Op(r,i.targetId),await Rp(r.localStore,i.targetId,!0))}async function IO(t,e){const n=Ge(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ay(n.remoteStore,r.targetId))}async function TO(t,e,n){const r=DO(t);try{const i=await function(c,d){const g=Ge(c),p=Tt.now(),x=d.reduce((I,D)=>I.add(D.key),st());let E,_;return g.persistence.runTransaction("Locally write mutations","readwrite",I=>{let D=Vs(),b=st();return g.Os.getEntries(I,x).next(F=>{D=F,D.forEach((R,S)=>{S.isValidDocument()||(b=b.add(R))})}).next(()=>g.localDocuments.getOverlayedDocuments(I,D)).next(F=>{E=F;const R=[];for(const S of d){const O=W6(S,E.get(S.key).overlayedDocument);O!=null&&R.push(new ca(S.key,O,zC(O.value.mapValue),xr.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,R,d)}).next(F=>{_=F;const R=F.applyToLocalDocumentSet(E,b);return g.documentOverlayCache.saveOverlays(I,F.batchId,R)})}).then(()=>({batchId:_.batchId,changes:JC(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,d,g){let p=c.Ru[c.currentUser.toKey()];p||(p=new tn(Ze)),p=p.insert(d,g),c.Ru[c.currentUser.toKey()]=p}(r,i.batchId,n),await Th(r,i.changes),await j0(r.remoteStore)}catch(i){const o=by(i,"Failed to persist write");n.reject(o)}}async function LI(t,e){const n=Ge(t);try{const r=await VP(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Eu.get(o);c&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?ct(c.lu,14607):i.removedDocuments.size>0&&(ct(c.lu,42227),c.lu=!1))}),await Th(n,r,e)}catch(r){await Rc(r)}}function Bx(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)}),function(c,d){const g=Ge(c);g.onlineState=d;let p=!1;g.queries.forEach((x,E)=>{for(const _ of E.wa)_.va(d)&&(p=!0)}),p&&Py(g)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SO(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let c=new tn(ke.comparator);c=c.insert(o,Fn.newNoDocument(o,ze.min()));const d=st().add(o),g=new B0(ze.min(),new Map,new tn(Ze),c,d);await LI(r,g),r.du=r.du.remove(o),r.Eu.delete(e),ky(r)}else await Rp(r.localStore,e,!1).then(()=>Op(r,e,n)).catch(Rc)}async function bO(t,e){const n=Ge(t),r=e.batch.batchId;try{const i=await BP(n.localStore,e);BI(n,r,null),FI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Th(n,i)}catch(i){await Rc(i)}}async function RO(t,e,n){const r=Ge(t);try{const i=await function(c,d){const g=Ge(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let x;return g.mutationQueue.lookupMutationBatch(p,d).next(E=>(ct(E!==null,37113),x=E.keys(),g.mutationQueue.removeMutationBatch(p,E))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,x,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x)).next(()=>g.localDocuments.getDocuments(p,x))})}(r.localStore,e);BI(r,e,n),FI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Th(r,i)}catch(i){await Rc(i)}}function FI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function BI(t,e,n){const r=Ge(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Op(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||VI(t,r)})}function VI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ay(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ky(t))}function Vx(t,e,n){for(const r of n)r instanceof DI?(t.Au.addReference(r.key,e),NO(t,r)):r instanceof kI?(Re(Dy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||VI(t,r.key)):Be(19791,{yu:r})}function NO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Re(Dy,"New document in limbo: "+n),t.Iu.add(r),ky(t))}function ky(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ke(It.fromString(e)),r=t.mu.next();t.Eu.set(r,new xO(n)),t.du=t.du.insert(n,r),SI(t.remoteStore,new So(ss(D0(n.path)),r,"TargetPurposeLimboResolution",P0.ue))}}async function Th(t,e,n){const r=Ge(t),i=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((d,g)=>{c.push(r.gu(g,e,n).then(p=>{var x;if((p||n)&&r.isPrimaryClient){const E=p?!p.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){i.push(p);const E=vy.Es(g.targetId,p);o.push(E)}}))}),await Promise.all(c),r.hu.J_(i),await async function(g,p){const x=Ge(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>le.forEach(p,_=>le.forEach(_.Is,I=>x.persistence.referenceDelegate.addReference(E,_.targetId,I)).next(()=>le.forEach(_.ds,I=>x.persistence.referenceDelegate.removeReference(E,_.targetId,I)))))}catch(E){if(!Nc(E))throw E;Re(Ey,"Failed to update sequence numbers: "+E)}for(const E of p){const _=E.targetId;if(!E.fromCache){const I=x.Fs.get(_),D=I.snapshotVersion,b=I.withLastLimboFreeSnapshotVersion(D);x.Fs=x.Fs.insert(_,b)}}}(r.localStore,o))}async function PO(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Re(Dy,"User change. New user:",e.toKey());const r=await CI(n.localStore,e);n.currentUser=e,function(o,c){o.Vu.forEach(d=>{d.forEach(g=>{g.reject(new Ae(ae.CANCELLED,c))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Th(n,r.Bs)}}function OO(t,e){const n=Ge(t),r=n.Eu.get(e);if(r&&r.lu)return st().add(r.key);{let i=st();const o=n.Tu.get(e);if(!o)return i;for(const c of o){const d=n.Pu.get(c);i=i.unionWith(d.view.tu)}return i}}function UI(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SO.bind(null,e),e.hu.J_=pO.bind(null,e.eventManager),e.hu.pu=mO.bind(null,e.eventManager),e}function DO(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RO.bind(null,e),e}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=V0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return FP(this.persistence,new kP,e.initialUser,this.serializer)}Du(e){return new AI(xy.Vi,this.serializer)}bu(e){return new WP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class kO extends Uf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ct(this.persistence.referenceDelegate instanceof Bf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xP(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new AI(r=>Bf.Vi(r,n),this.serializer)}}class Dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PO.bind(null,this.syncEngine),await dO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gO}()}createDatastore(e){const n=V0(e.databaseInfo.databaseId),r=function(o){return new KP(o)}(e.databaseInfo);return function(o,c,d,g){return new JP(o,c,d,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,d){return new tO(r,i,o,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>Bx(this.syncEngine,n,0),function(){return Ox.C()?new Ox:new GP}())}createSyncEngine(e,n){return function(i,o,c,d,g,p,x){const E=new vO(i,o,c,d,g,p);return x&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ge(i);Re(Qa,"RemoteStore shutting down."),o.Ia.add(5),await Ih(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const c=Ge(i),d={documents:o.map(E=>Ff(c.serializer,E))},g=await c.Jo("BatchGetDocuments",c.serializer.databaseId,It.emptyPath(),d,o.length),p=new Map;g.forEach(E=>{const _=nP(c.serializer,E);p.set(_.key.toString(),_)});const x=[];return o.forEach(E=>{const _=p.get(E.toString());ct(!!_,55234,{key:E}),x.push(_)}),x}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ke.fromPath(r);this.mutations.push(new cI(i,this.precondition(i)))}),await async function(r,i){const o=Ge(r),c={writes:i.map(d=>wI(o.serializer,d))};await o.Wo("Commit",o.serializer.databaseId,It.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Be(50498,{Wu:e.constructor.name});n=ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ze.min())?xr.exists(!1):xr.updateTime(n):xr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ze.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(n)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new _y(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new MO(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Eh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="FirestoreClient";class FO{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Re(Jo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Re(Jo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=by(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ng(t,e){t.asyncQueue.verifyOperationInProgress(),Re(Jo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{$o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{$o("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Ux(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BO(t);Re(Jo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>kx(e.remoteStore,i)),t._onlineComponents=e}async function BO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Re(Jo,"Using user provided OfflineComponentProvider");try{await ng(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await ng(t,new Uf)}}else Re(Jo,"Using default OfflineComponentProvider"),await ng(t,new kO(void 0));return t._offlineComponents}async function Ly(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Re(Jo,"Using user provided OnlineComponentProvider"),await Ux(t,t._uninitializedComponentsProvider._online)):(Re(Jo,"Using default OnlineComponentProvider"),await Ux(t,new Dp))),t._onlineComponents}function VO(t){return Ly(t).then(e=>e.syncEngine)}function UO(t){return Ly(t).then(e=>e.datastore)}async function jf(t){const e=await Ly(t),n=e.eventManager;return n.onListen=EO.bind(null,e.syncEngine),n.onUnlisten=CO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_O.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),n}function jO(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,g,p){const x=new My({next:_=>{x.Ou(),c.enqueueAndForget(()=>Ny(o,E));const I=_.docs.has(d);!I&&_.fromCache?p.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&g&&g.source==="server"?p.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),E=new Oy(D0(d.path),x,{includeMetadataChanges:!0,ka:!0});return Ry(o,E)}(await jf(t),t.asyncQueue,e,n,r)),r.promise}function zO(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,g,p){const x=new My({next:_=>{x.Ou(),c.enqueueAndForget(()=>Ny(o,E)),_.fromCache&&g.source==="server"?p.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),E=new Oy(d,x,{includeMetadataChanges:!0,ka:!0});return Ry(o,E)}(await jf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firestore.googleapis.com",zx=!0;class Hx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zI,this.ssl=zx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:zx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_I;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yP)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Y8;switch(r.type){case"firstParty":return new e6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jx.get(n);r&&(Re("ComponentProvider","Removing Datastore"),jx.delete(n),r.terminate())}(this),Promise.resolve()}}function HO(t,e,n,r={}){var i;t=Jr(t,z0);const o=Tc(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),g=`${e}:${n}`;o&&(fC(`https://${g}`),gC("Firestore",!0)),c.host!==zI&&c.host!==g&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:g,ssl:o,emulatorOptions:r});if(!Xa(p,d)&&(t._setSettings(p),r.mockUserToken)){let x,E;if(typeof r.mockUserToken=="string")x=r.mockUserToken,E=ir.MOCK_USER;else{x=EN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ir(_)}t._authCredentials=new Q8(new bC(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=class HI{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new HI(this.firestore,e,this._query)}};class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vh(n,Zt._jsonSchema))return new Zt(e,r||null,new ke(It.fromString(n.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:vn("string",Zt._jsonSchemaVersion),referencePath:vn("string")};class zo extends Sh{constructor(e,n,r){super(e,n,D0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new ke(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function WO(t,e,...n){if(t=gn(t),NC("collection","path",e),t instanceof z0){const r=It.fromString(e,...n);return nx(r),new zo(t,null,r)}{if(!(t instanceof Zt||t instanceof zo))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return nx(r),new zo(t.firestore,null,r)}}function xl(t,e,...n){if(t=gn(t),arguments.length===1&&(e=ay.newId()),NC("doc","path",e),t instanceof z0){const r=It.fromString(e,...n);return tx(r),new Zt(t,null,new ke(r))}{if(!(t instanceof Zt||t instanceof zo))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return tx(r),new Zt(t.firestore,t instanceof zo?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="AsyncQueue";class Gx{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _y(this,"async_queue_retry"),this.oc=()=>{const r=tg();r&&Re(Wx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=tg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new is;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Nc(e))throw e;Re(Wx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Bs("INTERNAL UNHANDLED ERROR: ",qx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Sy.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Be(47125,{hc:qx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function qx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ea extends z0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Gx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gx(e),this._firestoreClient=void 0,await e}}}function GO(t,e){const n=typeof t=="object"?t:wC(),r=typeof t=="string"?t:Pf,i=sy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=xN("firestore");o&&HO(i,...o)}return i}function bh(t){if(t._terminated)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qO(t),t._firestoreClient}function qO(t){var e,n,r;const i=t._freezeSettings(),o=function(d,g,p,x){return new m6(d,g,p,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,jI(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new FO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Xn.fromBase64String(e))}catch(n){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kr(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vh(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:vn("string",Kr._jsonSchemaVersion),bytes:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(vh(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:vn("string",os._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:as._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vh(e,as._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new as(e.vectorValues);throw new Ae(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}as._jsonSchemaVersion="firestore/vectorValue/1.0",as._jsonSchema={type:vn("string",as._jsonSchemaVersion),vectorValues:vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=/^__.*__$/;class XO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ah(e,this.data,n,this.fieldTransforms)}}class WI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class Fy{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Fy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(GI(this.Ec)&&$O.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class KO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||V0(e)}Dc(e,n,r,i=!1){return new Fy({Ec:e,methodName:n,bc:r,path:Gn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W0(t){const e=t._freezeSettings(),n=V0(t._databaseId);return new KO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qI(t,e,n,r,i,o={}){const c=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Vy("Data must be an object, but it was:",c,r);const d=KI(r,c);let g,p;if(o.merge)g=new Qr(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const x=[];for(const E of o.mergeFields){const _=kp(e,E,n);if(!c.contains(_))throw new Ae(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);QI(x,_)||x.push(_)}g=new Qr(x),p=c.fieldTransforms.filter(E=>g.covers(E.field))}else g=null,p=c.fieldTransforms;return new XO(new wr(d),g,p)}class G0 extends H0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G0}}class By extends H0{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new eh(e.serializer,nI(e.serializer,this.Cc));return new U6(e.path,n)}isEqual(e){return e instanceof By&&this.Cc===e.Cc}}function $I(t,e,n,r){const i=t.Dc(1,e,n);Vy("Data must be an object, but it was:",i,r);const o=[],c=wr.empty();la(r,(g,p)=>{const x=Uy(e,g,n);p=gn(p);const E=i.gc(x);if(p instanceof G0)o.push(x);else{const _=Nh(p,E);_!=null&&(o.push(x),c.set(x,_))}});const d=new Qr(o);return new WI(c,d,i.fieldTransforms)}function XI(t,e,n,r,i,o){const c=t.Dc(1,e,n),d=[kp(e,r,n)],g=[i];if(o.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(kp(e,o[_])),g.push(o[_+1]);const p=[],x=wr.empty();for(let _=d.length-1;_>=0;--_)if(!QI(p,d[_])){const I=d[_];let D=g[_];D=gn(D);const b=c.gc(I);if(D instanceof G0)p.push(I);else{const F=Nh(D,b);F!=null&&(p.push(I),x.set(I,F))}}const E=new Qr(p);return new WI(x,E,c.fieldTransforms)}function YO(t,e,n,r=!1){return Nh(n,t.Dc(r?4:3,e))}function Nh(t,e){if(YI(t=gn(t)))return Vy("Unsupported field value:",e,t),KI(t,e);if(t instanceof H0)return function(r,i){if(!GI(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const d of r){let g=Nh(d,i.yc(c));g==null&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Tt.fromDate(r);return{timestampValue:Lf(i.serializer,o)}}if(r instanceof Tt){const o=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lf(i.serializer,o)}}if(r instanceof os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kr)return{bytesValue:gI(i.serializer,r._byteString)};if(r instanceof Zt){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof as)return function(c,d){return{mapValue:{fields:{[VC]:{stringValue:jC},[Of]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return fy(d.serializer,p)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${N0(r)}`)}(t,e)}function KI(t,e){const n={};return DC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(r,i)=>{const o=Nh(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function YI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof os||t instanceof Kr||t instanceof Zt||t instanceof H0||t instanceof as)}function Vy(t,e,n){if(!YI(n)||!PC(n)){const r=N0(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function kp(t,e,n){if((e=gn(e))instanceof Rh)return e._internalPath;if(typeof e=="string")return Uy(t,e);throw zf("Field path arguments must be of type string or ",t,!1,void 0,n)}const QO=new RegExp("[~\\*/\\[\\]]");function Uy(t,e,n){if(e.search(QO)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rh(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zf(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(o||c)&&(g+=" (found",o&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new Ae(ae.INVALID_ARGUMENT,d+t+g)}function QI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZO extends Hf{data(){return super.data()}}function jy(t,e){return typeof e=="string"?Uy(t,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zy{}class JO extends zy{}function e5(t,e,...n){let r=[];e instanceof zy&&r.push(e),r=r.concat(n),function(o){const c=o.filter(g=>g instanceof Hy).length,d=o.filter(g=>g instanceof q0).length;if(c>1||c>0&&d>0)throw new Ae(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class q0 extends JO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new q0(e,n,r)}_apply(e){const n=this._parse(e);return JI(e._query,n),new Sh(e.firestore,e.converter,Cp(e._query,n))}_parse(e){const n=W0(e.firestore);return function(o,c,d,g,p,x,E){let _;if(p.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Kx(E,x);const D=[];for(const b of E)D.push(Xx(g,o,b));_={arrayValue:{values:D}}}else _=Xx(g,o,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Kx(E,x),_=YO(d,c,E,x==="in"||x==="not-in");return xn.create(p,x,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function t5(t,e,n){const r=e,i=jy("where",t);return q0._create(i,r,n)}class Hy extends zy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Li.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const d=o.getFlattenedFilters();for(const g of d)JI(c,g),c=Cp(c,g)}(e._query,n),new Sh(e.firestore,e.converter,Cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Xx(t,e,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KC(e)&&n.indexOf("/")!==-1)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!ke.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ux(t,new ke(r))}if(n instanceof Zt)return ux(t,n._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${N0(n)}.`)}function Kx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JI(t,e){const n=function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ae(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eT{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Of].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>dn(c.doubleValue));return new as(o)}convertGeoPoint(e){return new os(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=O0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const n=Ko(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);ct(EI(r),9688,{name:e});const i=new Yu(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return i.isEqual(n)||Bs(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class n5 extends eT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}class Ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ho extends Hf{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ho._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ho._jsonSchema={type:vn("string",Ho._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class Yd extends Ho{data(e={}){return super.data(e)}}class ja{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yd(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>{const g=new Yd(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Ol(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const g=new Yd(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Ol(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,x=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),x=c.indexOf(d.doc.key)),{type:r5(d.type),doc:g,oldIndex:p,newIndex:x}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ja._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){t=Jr(t,Zt);const e=Jr(t.firestore,ea);return jO(bh(e),t._key).then(n=>rT(e,t,n))}ja._jsonSchemaVersion="firestore/querySnapshot/1.0",ja._jsonSchema={type:vn("string",ja._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};class $0 extends eT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Yx(t){t=Jr(t,Sh);const e=Jr(t.firestore,ea),n=bh(e),r=new $0(e);return ZI(t._query),zO(n,t._query).then(i=>new ja(e,r,t,i))}function s5(t,e,n){t=Jr(t,Zt);const r=Jr(t.firestore,ea),i=tT(t.converter,e,n);return nT(r,[qI(W0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xr.none())])}function Qx(t,e,n,...r){t=Jr(t,Zt);const i=Jr(t.firestore,ea),o=W0(i);let c;return c=typeof(e=gn(e))=="string"||e instanceof Rh?XI(o,"updateDoc",t._key,e,n,r):$I(o,"updateDoc",t._key,e),nT(i,[c.toMutation(t._key,xr.exists(!0))])}function o5(t,...e){var n,r,i;t=gn(t);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||$x(e[c])||(o=e[c++]);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($x(e[c])){const E=e[c];e[c]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[c+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[c+2]=(i=E.complete)===null||i===void 0?void 0:i.bind(E)}let g,p,x;if(t instanceof Zt)p=Jr(t.firestore,ea),x=D0(t._key.path),g={next:E=>{e[c]&&e[c](rT(p,t,E))},error:e[c+1],complete:e[c+2]};else{const E=Jr(t,Sh);p=Jr(E.firestore,ea),x=E._query;const _=new $0(p);g={next:I=>{e[c]&&e[c](new ja(p,_,E,I))},error:e[c+1],complete:e[c+2]},ZI(t._query)}return function(_,I,D,b){const F=new My(b),R=new Oy(I,F,D);return _.asyncQueue.enqueueAndForget(async()=>Ry(await jf(_),R)),()=>{F.Ou(),_.asyncQueue.enqueueAndForget(async()=>Ny(await jf(_),R))}}(bh(p),x,d,g)}function nT(t,e){return function(r,i){const o=new is;return r.asyncQueue.enqueueAndForget(async()=>TO(await VO(r),i,o)),o.promise}(bh(t),e)}function rT(t,e,n){const r=n.docs.get(e._key),i=new $0(t);return new Ho(t,i,e._key,r,new Ol(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5={maxAttempts:5};function cu(t,e){if((t=gn(t)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=W0(e)}get(e){const n=cu(e,this._firestore),r=new n5(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Be(24041);const o=i[0];if(o.isFoundDocument())return new Hf(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Hf(this._firestore,r,n._key,null,n.converter);throw Be(18433,{doc:o})})}set(e,n,r){const i=cu(e,this._firestore),o=tT(i.converter,n,r),c=qI(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,c),this}update(e,n,r,...i){const o=cu(e,this._firestore);let c;return c=typeof(n=gn(n))=="string"||n instanceof Rh?XI(this._dataReader,"Transaction.update",o._key,n,r,i):$I(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(e){const n=cu(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5 extends l5{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=cu(e,this._firestore),r=new $0(this._firestore);return super.get(e).then(i=>new Ho(this._firestore,r,n._key,i._document,new Ol(!1,!1),n.converter))}}function u5(t,e,n){t=Jr(t,ea);const r=Object.assign(Object.assign({},a5),n);return function(o){if(o.maxAttempts<1)throw new Ae(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,c,d){const g=new is;return o.asyncQueue.enqueueAndForget(async()=>{const p=await UO(o);new LO(o.asyncQueue,p,d,c,g).zu()}),g.promise}(bh(t),i=>e(new c5(t,i)),r)}function h5(t){return new By("increment",t)}(function(e,n=!0){(function(i){bc=i})(Sc),uc(new Ka("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new ea(new Z8(r.getProvider("auth-internal")),new t6(c,r.getProvider("app-check-internal")),function(p,x){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(p.options.projectId,x)}(c,i),c);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),Uo(Y2,Q2,e),Uo(Y2,Q2,"esm2017")})();function Wy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d5=iT,sT=new wh("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new ry("@firebase/auth");function f5(t,...e){Wf.logLevel<=it.WARN&&Wf.warn(`Auth (${Sc}): ${t}`,...e)}function Qd(t,...e){Wf.logLevel<=it.ERROR&&Wf.error(`Auth (${Sc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,...e){throw Gy(t,...e)}function ls(t,...e){return Gy(t,...e)}function oT(t,e,n){const r=Object.assign(Object.assign({},d5()),{[e]:n});return new wh("auth","Firebase",r).create(e,{appName:t.name})}function Os(t){return oT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sT.create(t,...e)}function He(t,e,...n){if(!t)throw Gy(e,...n)}function Rs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function Us(t,e){t||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g5(){return Zx()==="http:"||Zx()==="https:"}function Zx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g5()||SN()||"connection"in navigator)?navigator.onLine:!0}function m5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.shortDelay=e,this.longDelay=n,Us(n>e,"Short delay should be less than long delay!"),this.isMobile=CN()||bN()}get(){return p5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t,e){Us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x5=new Ph(3e4,6e4);function ua(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ha(t,e,n,r,i={}){return lT(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=xh(Object.assign({key:t.config.apiKey},c)).slice(1),g=await t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:g},o);return TN()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Tc(t.emulatorConfig.host)&&(p.credentials="include"),aT.fetch()(await cT(t,t.config.apiHost,n,d),p)})}async function lT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},y5),e);try{const i=new E5(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Cd(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(t,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Cd(t,"email-already-in-use",c);if(g==="USER_DISABLED")throw Cd(t,"user-disabled",c);const x=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw oT(t,x,p);Fi(t,x)}}catch(i){if(i instanceof Gs)throw i;Fi(t,"network-request-failed",{message:String(i)})}}async function Oh(t,e,n,r,i={}){const o=await ha(t,e,n,r,i);return"mfaPendingCredential"in o&&Fi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function cT(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?qy(t.config,i):`${t.config.apiScheme}://${i}`;return w5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function v5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ls(this.auth,"network-request-failed")),x5.get())})}}function Cd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ls(t,e,r);return i.customData._tokenResponse=n,i}function Jx(t){return t!==void 0&&t.enterprise!==void 0}class _5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return v5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A5(t,e){return ha(t,"GET","/v2/recaptchaConfig",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){return ha(t,"POST","/v1/accounts:delete",e)}async function Gf(t,e){return ha(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I5(t,e=!1){const n=gn(t),r=await n.getIdToken(e),i=$y(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Tu(rg(i.auth_time)),issuedAtTime:Tu(rg(i.iat)),expirationTime:Tu(rg(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rg(t){return Number(t)*1e3}function $y(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=cC(n);return i?JSON.parse(i):(Qd("Failed to decode base64 JWT payload"),null)}catch(i){return Qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ev(t){const e=$y(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gs&&T5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function T5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await th(t,Gf(n,{idToken:r}));He(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?uT(o.providerUserInfo):[],d=R5(t.providerData,c),g=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),x=g?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(t,E)}async function b5(t){const e=gn(t);await qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uT(t){return t.map(e=>{var{providerId:n}=e,r=Wy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){const n=await lT(t,{},async()=>{const r=xh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await cT(t,i,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return t.emulatorConfig&&Tc(t.emulatorConfig.host)&&(g.credentials="include"),aT.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function P5(t,e){return ha(t,"POST","/v2/accounts:revokeToken",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await N5(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new Hl;return r&&(He(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(He(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hl,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new S5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await th(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I5(this,e)}reload(){return b5(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(Os(this.auth));const e=await this.getIdToken();return await th(this,C5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,c,d,g,p,x;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,I=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(d=n.tenantId)!==null&&d!==void 0?d:void 0,F=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,R=(p=n.createdAt)!==null&&p!==void 0?p:void 0,S=(x=n.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:O,emailVerified:U,isAnonymous:Y,providerData:Z,stsTokenManager:k}=n;He(O&&k,e,"internal-error");const M=Hl.fromJSON(this.name,k);He(typeof O=="string",e,"internal-error"),oo(E,e.name),oo(_,e.name),He(typeof U=="boolean",e,"internal-error"),He(typeof Y=="boolean",e,"internal-error"),oo(I,e.name),oo(D,e.name),oo(b,e.name),oo(F,e.name),oo(R,e.name),oo(S,e.name);const L=new Pi({uid:O,auth:e,email:_,emailVerified:U,displayName:E,isAnonymous:Y,photoURL:D,phoneNumber:I,tenantId:b,stsTokenManager:M,createdAt:R,lastLoginAt:S});return Z&&Array.isArray(Z)&&(L.providerData=Z.map(G=>Object.assign({},G))),F&&(L._redirectEventId=F),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hl;i.updateFromServerResponse(n);const o=new Pi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?uT(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new Hl;d.updateFromIdToken(r);const g=new Pi({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new Map;function Ns(t){Us(t instanceof Function,"Expected a class definition");let e=tv.get(t);return e?(Us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hT.type="NONE";const nv=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Zd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gf(this.auth,{idToken:e}).catch(()=>{});return n?Pi._fromGetAccountInfoResponse(this.auth,n,e):null}return Pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wl(Ns(nv),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ns(nv);const c=Zd(r,e.config.apiKey,e.name);let d=null;for(const p of n)try{const x=await p._get(c);if(x){let E;if(typeof x=="string"){const _=await Gf(e,{idToken:x}).catch(()=>{});if(!_)break;E=await Pi._fromGetAccountInfoResponse(e,_,x)}else E=Pi._fromJSON(e,x);p!==o&&(d=E),o=p;break}}catch{}const g=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!g.length?new Wl(o,e,r):(o=g[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new Wl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yT(e))return"Blackberry";if(wT(e))return"Webos";if(fT(e))return"Safari";if((e.includes("chrome/")||gT(e))&&!e.includes("edge/"))return"Chrome";if(mT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dT(t=ar()){return/firefox\//i.test(t)}function fT(t=ar()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gT(t=ar()){return/crios\//i.test(t)}function pT(t=ar()){return/iemobile/i.test(t)}function mT(t=ar()){return/android/i.test(t)}function yT(t=ar()){return/blackberry/i.test(t)}function wT(t=ar()){return/webos/i.test(t)}function Xy(t=ar()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O5(t=ar()){var e;return Xy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D5(){return RN()&&document.documentMode===10}function xT(t=ar()){return Xy(t)||mT(t)||wT(t)||yT(t)||/windows phone/i.test(t)||pT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e=[]){let n;switch(t){case"Browser":n=rv(ar());break;case"Worker":n=`${rv(ar())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,d)=>{try{const g=e(o);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e={}){return ha(t,"GET","/v2/passwordPolicy",ua(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=6;class F5{constructor(e){var n,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:L5,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(i=g.containsLowercaseLetter)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsUppercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iv(this),this.idTokenSubscription=new iv(this),this.beforeStateQueue=new k5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gf(this,{idToken:e}),r=await Pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(Os(this));const n=e?gn(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M5(this),n=new F5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await P5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,i);return()=>{c=!0,g()}}else{const g=e.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&f5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sl(t){return gn(t)}class iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FN(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V5(t){X0=t}function ET(t){return X0.loadJS(t)}function U5(){return X0.recaptchaEnterpriseScript}function j5(){return X0.gapiScript}function z5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class H5{constructor(){this.enterprise=new W5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class W5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G5="recaptcha-enterprise",_T="NO_RECAPTCHA";class q5{constructor(e){this.type=G5,this.auth=sl(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{A5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new _5(g);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(g=>{d(g)})})}function i(o,c,d){const g=window.grecaptcha;Jx(g)?g.enterprise.ready(()=>{g.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(_T)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new H5().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!n&&Jx(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=U5();g.length!==0&&(g+=d),ET(g).then(()=>{i(d,o,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function sv(t,e,n,r=!1,i=!1){const o=new q5(t);let c;if(i)c=_T;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Fp(t,e,n,r,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sv(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await sv(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t,e){const n=sy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Xa(o,e??{}))return i;Fi(i,"already-initialized")}return n.initialize({options:e})}function X5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K5(t,e,n){const r=sl(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=AT(e),{host:c,port:d}=Y5(e),g=d===null?"":`:${d}`,p={url:`${o}//${c}${g}/`},x=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(Xa(p,r.config.emulator)&&Xa(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Tc(c)?(fC(`${o}//${c}${g}`),gC("Auth",!0)):Q5()}function AT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y5(t){const e=AT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ov(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:ov(c)}}}function ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,n){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function Z5(t,e){return ha(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(t,e){return Oh(t,"POST","/v1/accounts:signInWithPassword",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e){return Oh(t,"POST","/v1/accounts:signInWithEmailLink",ua(t,e))}async function tD(t,e){return Oh(t,"POST","/v1/accounts:signInWithEmailLink",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Ky{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,n,"signInWithPassword",J5);case"emailLink":return eD(e,{email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,r,"signUpPassword",Z5);case"emailLink":return tD(e,{idToken:n,email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t,e){return Oh(t,"POST","/v1/accounts:signInWithIdp",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="http://localhost";class Za extends Ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Wy(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Za(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Gl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gl(e,n)}buildRequest(){const e={requestUri:nD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iD(t){const e=iu(su(t)).link,n=e?iu(su(e)).deep_link_id:null,r=iu(su(t)).deep_link_id;return(r?iu(su(r)).link:null)||r||n||e||t}class Yy{constructor(e){var n,r,i,o,c,d;const g=iu(su(e)),p=(n=g.apiKey)!==null&&n!==void 0?n:null,x=(r=g.oobCode)!==null&&r!==void 0?r:null,E=rD((i=g.mode)!==null&&i!==void 0?i:null);He(p&&x&&E,"argument-error"),this.apiKey=p,this.operation=E,this.code=x,this.continueUrl=(o=g.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=iD(e);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.providerId=Oc.PROVIDER_ID}static credential(e,n){return nh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yy.parseLink(n);return He(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}Oc.PROVIDER_ID="password";Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends CT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Dh{constructor(){super("facebook.com")}static credential(e){return Za._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Za._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mo.credential(n,r)}catch{return null}}}mo.GOOGLE_SIGN_IN_METHOD="google.com";mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Dh{constructor(){super("github.com")}static credential(e){return Za._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Dh{constructor(){super("twitter.com")}static credential(e,n){return Za._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wo.credential(n,r)}catch{return null}}}wo.TWITTER_SIGN_IN_METHOD="twitter.com";wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return Oh(t,"POST","/v1/accounts:signUp",ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Pi._fromIdTokenResponse(e,r,i),c=av(r);return new Ja({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=av(r);return new Ja({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Gs{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $f(e,n,r,i)}}function IT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(t,o,e,r):o})}async function oD(t,e,n=!1){const r=await th(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ja._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e,n=!1){const{auth:r}=t;if(gi(r.app))return Promise.reject(Os(r));const i="reauthenticate";try{const o=await th(t,IT(r,i,e,t),n);He(o.idToken,r,"internal-error");const c=$y(o.idToken);He(c,r,"internal-error");const{sub:d}=c;return He(t.uid===d,r,"user-mismatch"),Ja._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Fi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e,n=!1){if(gi(t.app))return Promise.reject(Os(t));const r="signIn",i=await IT(t,r,e),o=await Ja._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function lD(t,e){return TT(sl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(t){const e=sl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cD(t,e,n){if(gi(t.app))return Promise.reject(Os(t));const r=sl(t),c=await Fp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ST(t),g}),d=await Ja._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function uD(t,e,n){return gi(t.app)?Promise.reject(Os(t)):lD(gn(t),Oc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ST(t),r})}function hD(t,e,n,r){return gn(t).onIdTokenChanged(e,n,r)}function dD(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function fD(t,e,n,r){return gn(t).onAuthStateChanged(e,n,r)}function gD(t){return gn(t).signOut()}const Xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1e3,mD=10;class RT extends bT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);D5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RT.type="LOCAL";const yD=RT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends bT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}NT.type="SESSION";const PT=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new K0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async p=>p(n.origin,o)),g=await wD(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}K0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,g)=>{const p=Qy("",20);i.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const _=E;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(x),o=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(x),clearTimeout(o),g(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(){return window}function vD(t){cs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){return typeof cs().WorkerGlobalScope<"u"&&typeof cs().importScripts=="function"}async function ED(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _D(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AD(){return OT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firebaseLocalStorageDb",CD=1,Kf="firebaseLocalStorage",kT="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Y0(t,e){return t.transaction([Kf],e?"readwrite":"readonly").objectStore(Kf)}function ID(){const t=indexedDB.deleteDatabase(DT);return new kh(t).toPromise()}function Bp(){const t=indexedDB.open(DT,CD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kf,{keyPath:kT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kf)?e(r):(r.close(),await ID(),e(await Bp()))})})}async function lv(t,e,n){const r=Y0(t,!0).put({[kT]:e,value:n});return new kh(r).toPromise()}async function TD(t,e){const n=Y0(t,!1).get(e),r=await new kh(n).toPromise();return r===void 0?null:r.value}function cv(t,e){const n=Y0(t,!0).delete(e);return new kh(n).toPromise()}const SD=800,bD=3;class MT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=K0._getInstance(AD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ED(),!this.activeServiceWorker)return;this.sender=new xD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_D()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await lv(e,Xf,"1"),await cv(e,Xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Y0(i,!1).getAll();return new kh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MT.type="LOCAL";const RD=MT;new Ph(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e){return e?Ns(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PD(t){return TT(t.auth,new Zy(t),t.bypassAuthState)}function OD(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),aD(n,new Zy(t),t.bypassAuthState)}async function DD(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),oD(n,new Zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PD;case"linkViaPopup":case"linkViaRedirect":return DD;case"reauthViaPopup":case"reauthViaRedirect":return OD;default:Fi(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Ph(2e3,1e4);class Dl extends LT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=Qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}Dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="pendingRedirect",Jd=new Map;class LD extends LT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await FD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FD(t,e){const n=UD(e),r=VD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function BD(t,e){Jd.set(t._key(),e)}function VD(t){return Ns(t._redirectPersistence)}function UD(t){return Zd(MD,t.config.apiKey,t.name)}async function jD(t,e,n=!1){if(gi(t.app))return Promise.reject(Os(t));const r=sl(t),i=ND(r,e),c=await new LD(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=10*60*1e3;class HD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ls(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zD&&this.cachedEventUids.clear(),this.cachedEventUids.has(uv(e))}saveEventToCache(e){this.cachedEventUids.add(uv(e)),this.lastProcessedEventTime=Date.now()}}function uv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e={}){return ha(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$D=/^https?/;async function XD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GD(t);for(const n of e)try{if(KD(n))return}catch{}Fi(t,"unauthorized-domain")}function KD(t){const e=Mp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!$D.test(n))return!1;if(qD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Ph(3e4,6e4);function hv(){const t=cs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QD(t){return new Promise((e,n)=>{var r,i,o;function c(){hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hv(),n(ls(t,"network-request-failed"))},timeout:YD.get()})}if(!((i=(r=cs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=cs().gapi)===null||o===void 0)&&o.load)c();else{const d=z5("iframefcb");return cs()[d]=()=>{gapi.load?c():n(ls(t,"network-request-failed"))},ET(`${j5()}?onload=${d}`).catch(g=>n(g))}}).catch(e=>{throw ef=null,e})}let ef=null;function ZD(t){return ef=ef||QD(t),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Ph(5e3,15e3),ek="__/auth/iframe",tk="emulator/auth/iframe",nk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ik(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qy(e,tk):`https://${t.config.authDomain}/${ek}`,r={apiKey:e.apiKey,appName:t.name,v:Sc},i=rk.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${xh(r).slice(1)}`}async function sk(t){const e=await ZD(t),n=cs().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:ik(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nk,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=ls(t,"network-request-failed"),d=cs().setTimeout(()=>{o(c)},JD.get());function g(){cs().clearTimeout(d),i(r)}r.ping(g).then(g,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ak=500,lk=600,ck="_blank",uk="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hk(t,e,n,r=ak,i=lk){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},ok),{width:r.toString(),height:i.toString(),top:o,left:c}),p=ar().toLowerCase();n&&(d=gT(p)?ck:n),dT(p)&&(e=e||uk,g.scrollbars="yes");const x=Object.entries(g).reduce((_,[I,D])=>`${_}${I}=${D},`,"");if(O5(p)&&d!=="_self")return dk(e||"",d),new dv(null);const E=window.open(e||"",d,x);He(E,t,"popup-blocked");try{E.focus()}catch{}return new dv(E)}function dk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="__/auth/handler",gk="emulator/auth/handler",pk=encodeURIComponent("fac");async function fv(t,e,n,r,i,o){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sc,eventId:i};if(e instanceof CT){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",LN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))c[x]=E}if(e instanceof Dh){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(c.scopes=x.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const x of Object.keys(d))d[x]===void 0&&delete d[x];const g=await t._getAppCheckToken(),p=g?`#${pk}=${encodeURIComponent(g)}`:"";return`${mk(t)}?${xh(d).slice(1)}${p}`}function mk({config:t}){return t.emulator?qy(t,gk):`https://${t.authDomain}/${fk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="webStorageSupport";class yk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=jD,this._overrideRedirectResult=BD}async _openPopup(e,n,r,i){var o;Us((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await fv(e,n,r,Mp(),i);return hk(e,c,Qy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await fv(e,n,r,Mp(),i);return vD(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Us(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sk(e),r=new HD(e);return n.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ig,{type:ig},i=>{var o;const c=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[ig];c!==void 0&&n(!!c),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xT()||fT()||Xy()}}const wk=yk;var gv="@firebase/auth",pv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ek(t){uc(new Ka("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;He(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(t)},p=new B5(r,i,o,g);return X5(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),uc(new Ka("auth-internal",e=>{const n=sl(e.getProvider("auth").getImmediate());return(r=>new xk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(gv,pv,vk(t)),Uo(gv,pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=5*60,Ak=dC("authIdTokenMaxAge")||_k;let mv=null;const Ck=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ak)return;const i=n==null?void 0:n.token;mv!==i&&(mv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ik(t=wC()){const e=sy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$5(t,{popupRedirectResolver:wk,persistence:[RD,yD,PT]}),r=dC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=Ck(o.toString());dD(n,c,()=>c(n.currentUser)),hD(n,d=>c(d))}}const i=uC("auth");return i&&K5(n,`http://${i}`),n}function Tk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}V5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ls("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Tk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ek("Browser");const Sk={apiKey:"AIzaSyBS3_IVikDTZwStfJLSL2y_OvAIhFPQO3s",authDomain:"ape-shop-84c95.firebaseapp.com",projectId:"vape-shop-84c95",storageBucket:"vape-shop-84c95.appspot.com",messagingSenderId:"131179049959",appId:"1:131179049959:web:d31446fba53784c68a4342"},BT=yC(Sk),xo=GO(BT),Id=Ik(BT);function Ui(...t){return uN(JA(t))}const bk=bR,VT=W.forwardRef(({className:t,...e},n)=>z.jsx(qA,{ref:n,className:Ui("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));VT.displayName=qA.displayName;const Rk=ty("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),UT=W.forwardRef(({className:t,variant:e,...n},r)=>z.jsx($A,{ref:r,className:Ui(Rk({variant:e}),t),...n}));UT.displayName=$A.displayName;const Nk=W.forwardRef(({className:t,...e},n)=>z.jsx(YA,{ref:n,className:Ui("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Nk.displayName=YA.displayName;const jT=W.forwardRef(({className:t,...e},n)=>z.jsx(QA,{ref:n,className:Ui("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:z.jsx(OR,{className:"h-4 w-4"})}));jT.displayName=QA.displayName;const zT=W.forwardRef(({className:t,...e},n)=>z.jsx(XA,{ref:n,className:Ui("text-sm font-semibold",t),...e}));zT.displayName=XA.displayName;const HT=W.forwardRef(({className:t,...e},n)=>z.jsx(KA,{ref:n,className:Ui("text-sm opacity-90",t),...e}));HT.displayName=KA.displayName;function Pk(){const{toasts:t}=B4();return z.jsxs(bk,{children:[t.map(function({id:e,title:n,description:r,action:i,...o}){return z.jsxs(UT,{...o,children:[z.jsxs("div",{className:"grid gap-1",children:[n&&z.jsx(zT,{children:n}),r&&z.jsx(HT,{children:r})]}),i,z.jsx(jT,{})]},e)}),z.jsx(VT,{})]})}var yv=["light","dark"],Ok="(prefers-color-scheme: dark)",Dk=W.createContext(void 0),kk={setTheme:t=>{},themes:[]},Mk=()=>{var t;return(t=W.useContext(Dk))!=null?t:kk};W.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,attrs:d,nonce:g})=>{let p=o==="system",x=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(D=>`'${D}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,E=i?yv.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",_=(D,b=!1,F=!0)=>{let R=c?c[D]:D,S=b?D+"|| ''":`'${R}'`,O="";return i&&F&&!b&&yv.includes(D)&&(O+=`d.style.colorScheme = '${D}';`),n==="class"?b||R?O+=`c.add(${S})`:O+="null":R&&(O+=`d[s](n,${S})`),O},I=t?`!function(){${x}${_(t)}}()`:r?`!function(){try{${x}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${p})){var t='${Ok}',m=window.matchMedia(t);if(m.media!==t||m.matches){${_("dark")}}else{${_("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${_(c?"x[e]":"e",!0)}}${p?"":"else{"+_(o,!1,!1)+"}"}${E}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${_(c?"x[e]":"e",!0)}}else{${_(o,!1,!1)};}${E}}catch(t){}}();`;return W.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:I}})});var Lk=t=>{switch(t){case"success":return Vk;case"info":return jk;case"warning":return Uk;case"error":return zk;default:return null}},Fk=Array(12).fill(0),Bk=({visible:t})=>we.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},we.createElement("div",{className:"sonner-spinner"},Fk.map((e,n)=>we.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Vk=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Uk=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jk=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zk=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Hk=()=>{let[t,e]=we.useState(document.hidden);return we.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Vp=1,Wk=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Vp++,o=this.toasts.find(d=>d.id===i),c=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:c,title:n}):d):this.addToast({title:n,...r,dismissible:c,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0;return r.then(async o=>{if(qk(o)&&!o.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${o.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${o.status}`):e.description;this.create({id:n,type:"error",message:c,description:d})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(o):e.success,d=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"success",message:c,description:d})}}).catch(async o=>{if(e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(o):e.error,d=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"error",message:c,description:d})}}).finally(()=>{var o;i&&(this.dismiss(n),n=void 0),(o=e.finally)==null||o.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Vp++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},qr=new Wk,Gk=(t,e)=>{let n=(e==null?void 0:e.id)||Vp++;return qr.addToast({title:t,...e,id:n}),n},qk=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",$k=Gk,Xk=()=>qr.toasts;Object.assign($k,{success:qr.success,info:qr.info,warning:qr.warning,error:qr.error,custom:qr.custom,message:qr.message,promise:qr.promise,dismiss:qr.dismiss,loading:qr.loading},{getHistory:Xk});function Kk(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Kk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Td(t){return t.label!==void 0}var Yk=3,Qk="32px",Zk=4e3,Jk=356,e9=14,t9=20,n9=200;function r9(...t){return t.filter(Boolean).join(" ")}var i9=t=>{var e,n,r,i,o,c,d,g,p,x;let{invert:E,toast:_,unstyled:I,interacting:D,setHeights:b,visibleToasts:F,heights:R,index:S,toasts:O,expanded:U,removeToast:Y,defaultRichColors:Z,closeButton:k,style:M,cancelButtonStyle:L,actionButtonStyle:G,className:X="",descriptionClassName:$="",duration:j,position:he,gap:J,loadingIcon:Ie,expandByDefault:ye,classNames:re,icons:fe,closeButtonAriaLabel:Te="Close toast",pauseWhenPageIsHidden:Se,cn:Ce}=t,[De,Ke]=we.useState(!1),[$t,Ee]=we.useState(!1),[pn,Et]=we.useState(!1),[Kn,_n]=we.useState(!1),[Wt,lr]=we.useState(0),[$e,Yn]=we.useState(0),An=we.useRef(null),Vn=we.useRef(null),Xt=S===0,ft=S+1<=F,Le=_.type,cr=_.dismissible!==!1,Pe=_.className||"",qs=_.descriptionClassName||"",xi=we.useMemo(()=>R.findIndex(Ve=>Ve.toastId===_.id)||0,[R,_.id]),ur=we.useMemo(()=>{var Ve;return(Ve=_.closeButton)!=null?Ve:k},[_.closeButton,k]),ms=we.useMemo(()=>_.duration||j||Zk,[_.duration,j]),gt=we.useRef(0),kt=we.useRef(0),Qn=we.useRef(0),Mt=we.useRef(null),[$s,Xs]=he.split("-"),ji=we.useMemo(()=>R.reduce((Ve,pt,mt)=>mt>=xi?Ve:Ve+pt.height,0),[R,xi]),Nt=Hk(),xe=_.invert||E,St=Le==="loading";kt.current=we.useMemo(()=>xi*J+ji,[xi,ji]),we.useEffect(()=>{Ke(!0)},[]),we.useLayoutEffect(()=>{if(!De)return;let Ve=Vn.current,pt=Ve.style.height;Ve.style.height="auto";let mt=Ve.getBoundingClientRect().height;Ve.style.height=pt,Yn(mt),b(We=>We.find(nn=>nn.toastId===_.id)?We.map(nn=>nn.toastId===_.id?{...nn,height:mt}:nn):[{toastId:_.id,height:mt,position:_.position},...We])},[De,_.title,_.description,b,_.id]);let Je=we.useCallback(()=>{Ee(!0),lr(kt.current),b(Ve=>Ve.filter(pt=>pt.toastId!==_.id)),setTimeout(()=>{Y(_)},n9)},[_,Y,b,kt]);we.useEffect(()=>{if(_.promise&&Le==="loading"||_.duration===1/0||_.type==="loading")return;let Ve,pt=ms;return U||D||Se&&Nt?(()=>{if(Qn.current<gt.current){let mt=new Date().getTime()-gt.current;pt=pt-mt}Qn.current=new Date().getTime()})():pt!==1/0&&(gt.current=new Date().getTime(),Ve=setTimeout(()=>{var mt;(mt=_.onAutoClose)==null||mt.call(_,_),Je()},pt)),()=>clearTimeout(Ve)},[U,D,ye,_,ms,Je,_.promise,Le,Se,Nt]),we.useEffect(()=>{let Ve=Vn.current;if(Ve){let pt=Ve.getBoundingClientRect().height;return Yn(pt),b(mt=>[{toastId:_.id,height:pt,position:_.position},...mt]),()=>b(mt=>mt.filter(We=>We.toastId!==_.id))}},[b,_.id]),we.useEffect(()=>{_.delete&&Je()},[Je,_.delete]);function Pt(){return fe!=null&&fe.loading?we.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},fe.loading):Ie?we.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},Ie):we.createElement(Bk,{visible:Le==="loading"})}return we.createElement("li",{"aria-live":_.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Vn,className:Ce(X,Pe,re==null?void 0:re.toast,(e=_==null?void 0:_.classNames)==null?void 0:e.toast,re==null?void 0:re.default,re==null?void 0:re[Le],(n=_==null?void 0:_.classNames)==null?void 0:n[Le]),"data-sonner-toast":"","data-rich-colors":(r=_.richColors)!=null?r:Z,"data-styled":!(_.jsx||_.unstyled||I),"data-mounted":De,"data-promise":!!_.promise,"data-removed":$t,"data-visible":ft,"data-y-position":$s,"data-x-position":Xs,"data-index":S,"data-front":Xt,"data-swiping":pn,"data-dismissible":cr,"data-type":Le,"data-invert":xe,"data-swipe-out":Kn,"data-expanded":!!(U||ye&&De),style:{"--index":S,"--toasts-before":S,"--z-index":O.length-S,"--offset":`${$t?Wt:kt.current}px`,"--initial-height":ye?"auto":`${$e}px`,...M,..._.style},onPointerDown:Ve=>{St||!cr||(An.current=new Date,lr(kt.current),Ve.target.setPointerCapture(Ve.pointerId),Ve.target.tagName!=="BUTTON"&&(Et(!0),Mt.current={x:Ve.clientX,y:Ve.clientY}))},onPointerUp:()=>{var Ve,pt,mt,We;if(Kn||!cr)return;Mt.current=null;let nn=Number(((Ve=Vn.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount").replace("px",""))||0),vi=new Date().getTime()-((pt=An.current)==null?void 0:pt.getTime()),oi=Math.abs(nn)/vi;if(Math.abs(nn)>=t9||oi>.11){lr(kt.current),(mt=_.onDismiss)==null||mt.call(_,_),Je(),_n(!0);return}(We=Vn.current)==null||We.style.setProperty("--swipe-amount","0px"),Et(!1)},onPointerMove:Ve=>{var pt;if(!Mt.current||!cr)return;let mt=Ve.clientY-Mt.current.y,We=Ve.clientX-Mt.current.x,nn=($s==="top"?Math.min:Math.max)(0,mt),vi=Ve.pointerType==="touch"?10:2;Math.abs(nn)>vi?(pt=Vn.current)==null||pt.style.setProperty("--swipe-amount",`${mt}px`):Math.abs(We)>vi&&(Mt.current=null)}},ur&&!_.jsx?we.createElement("button",{"aria-label":Te,"data-disabled":St,"data-close-button":!0,onClick:St||!cr?()=>{}:()=>{var Ve;Je(),(Ve=_.onDismiss)==null||Ve.call(_,_)},className:Ce(re==null?void 0:re.closeButton,(i=_==null?void 0:_.classNames)==null?void 0:i.closeButton)},we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},we.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),we.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,_.jsx||we.isValidElement(_.title)?_.jsx||_.title:we.createElement(we.Fragment,null,Le||_.icon||_.promise?we.createElement("div",{"data-icon":"",className:Ce(re==null?void 0:re.icon,(o=_==null?void 0:_.classNames)==null?void 0:o.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||Pt():null,_.type!=="loading"?_.icon||(fe==null?void 0:fe[Le])||Lk(Le):null):null,we.createElement("div",{"data-content":"",className:Ce(re==null?void 0:re.content,(c=_==null?void 0:_.classNames)==null?void 0:c.content)},we.createElement("div",{"data-title":"",className:Ce(re==null?void 0:re.title,(d=_==null?void 0:_.classNames)==null?void 0:d.title)},_.title),_.description?we.createElement("div",{"data-description":"",className:Ce($,qs,re==null?void 0:re.description,(g=_==null?void 0:_.classNames)==null?void 0:g.description)},_.description):null),we.isValidElement(_.cancel)?_.cancel:_.cancel&&Td(_.cancel)?we.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||L,onClick:Ve=>{var pt,mt;Td(_.cancel)&&cr&&((mt=(pt=_.cancel).onClick)==null||mt.call(pt,Ve),Je())},className:Ce(re==null?void 0:re.cancelButton,(p=_==null?void 0:_.classNames)==null?void 0:p.cancelButton)},_.cancel.label):null,we.isValidElement(_.action)?_.action:_.action&&Td(_.action)?we.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||G,onClick:Ve=>{var pt,mt;Td(_.action)&&(Ve.defaultPrevented||((mt=(pt=_.action).onClick)==null||mt.call(pt,Ve),Je()))},className:Ce(re==null?void 0:re.actionButton,(x=_==null?void 0:_.classNames)==null?void 0:x.actionButton)},_.action.label):null))};function wv(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var s9=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:c,offset:d,theme:g="light",richColors:p,duration:x,style:E,visibleToasts:_=Yk,toastOptions:I,dir:D=wv(),gap:b=e9,loadingIcon:F,icons:R,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:O,cn:U=r9}=t,[Y,Z]=we.useState([]),k=we.useMemo(()=>Array.from(new Set([n].concat(Y.filter(Se=>Se.position).map(Se=>Se.position)))),[Y,n]),[M,L]=we.useState([]),[G,X]=we.useState(!1),[$,j]=we.useState(!1),[he,J]=we.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ie=we.useRef(null),ye=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),re=we.useRef(null),fe=we.useRef(!1),Te=we.useCallback(Se=>{var Ce;(Ce=Y.find(De=>De.id===Se.id))!=null&&Ce.delete||qr.dismiss(Se.id),Z(De=>De.filter(({id:Ke})=>Ke!==Se.id))},[Y]);return we.useEffect(()=>qr.subscribe(Se=>{if(Se.dismiss){Z(Ce=>Ce.map(De=>De.id===Se.id?{...De,delete:!0}:De));return}setTimeout(()=>{AA.flushSync(()=>{Z(Ce=>{let De=Ce.findIndex(Ke=>Ke.id===Se.id);return De!==-1?[...Ce.slice(0,De),{...Ce[De],...Se},...Ce.slice(De+1)]:[Se,...Ce]})})})}),[]),we.useEffect(()=>{if(g!=="system"){J(g);return}g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Se})=>{J(Se?"dark":"light")})},[g]),we.useEffect(()=>{Y.length<=1&&X(!1)},[Y]),we.useEffect(()=>{let Se=Ce=>{var De,Ke;r.every($t=>Ce[$t]||Ce.code===$t)&&(X(!0),(De=Ie.current)==null||De.focus()),Ce.code==="Escape"&&(document.activeElement===Ie.current||(Ke=Ie.current)!=null&&Ke.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",Se),()=>document.removeEventListener("keydown",Se)},[r]),we.useEffect(()=>{if(Ie.current)return()=>{re.current&&(re.current.focus({preventScroll:!0}),re.current=null,fe.current=!1)}},[Ie.current]),Y.length?we.createElement("section",{"aria-label":`${S} ${ye}`,tabIndex:-1},k.map((Se,Ce)=>{var De;let[Ke,$t]=Se.split("-");return we.createElement("ol",{key:Se,dir:D==="auto"?wv():D,tabIndex:-1,ref:Ie,className:c,"data-sonner-toaster":!0,"data-theme":he,"data-y-position":Ke,"data-x-position":$t,style:{"--front-toast-height":`${((De=M[0])==null?void 0:De.height)||0}px`,"--offset":typeof d=="number"?`${d}px`:d||Qk,"--width":`${Jk}px`,"--gap":`${b}px`,...E},onBlur:Ee=>{fe.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(fe.current=!1,re.current&&(re.current.focus({preventScroll:!0}),re.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,re.current=Ee.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{$||X(!1)},onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},Y.filter(Ee=>!Ee.position&&Ce===0||Ee.position===Se).map((Ee,pn)=>{var Et,Kn;return we.createElement(i9,{key:Ee.id,icons:R,index:pn,toast:Ee,defaultRichColors:p,duration:(Et=I==null?void 0:I.duration)!=null?Et:x,className:I==null?void 0:I.className,descriptionClassName:I==null?void 0:I.descriptionClassName,invert:e,visibleToasts:_,closeButton:(Kn=I==null?void 0:I.closeButton)!=null?Kn:o,interacting:$,position:Se,style:I==null?void 0:I.style,unstyled:I==null?void 0:I.unstyled,classNames:I==null?void 0:I.classNames,cancelButtonStyle:I==null?void 0:I.cancelButtonStyle,actionButtonStyle:I==null?void 0:I.actionButtonStyle,removeToast:Te,toasts:Y.filter(_n=>_n.position==Ee.position),heights:M.filter(_n=>_n.position==Ee.position),setHeights:L,expandByDefault:i,gap:b,loadingIcon:F,expanded:G,pauseWhenPageIsHidden:O,cn:U})}))})):null};const o9=({...t})=>{const{theme:e="system"}=Mk();return z.jsx(s9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},a9=["top","right","bottom","left"],ta=Math.min,Xr=Math.max,Yf=Math.round,Sd=Math.floor,na=t=>({x:t,y:t}),l9={left:"right",right:"left",bottom:"top",top:"bottom"},c9={start:"end",end:"start"};function Up(t,e,n){return Xr(t,ta(e,n))}function js(t,e){return typeof t=="function"?t(e):t}function zs(t){return t.split("-")[0]}function Dc(t){return t.split("-")[1]}function Jy(t){return t==="x"?"y":"x"}function ew(t){return t==="y"?"height":"width"}function ra(t){return["top","bottom"].includes(zs(t))?"y":"x"}function tw(t){return Jy(ra(t))}function u9(t,e,n){n===void 0&&(n=!1);const r=Dc(t),i=tw(t),o=ew(i);let c=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Qf(c)),[c,Qf(c)]}function h9(t){const e=Qf(t);return[jp(t),e,jp(e)]}function jp(t){return t.replace(/start|end/g,e=>c9[e])}function d9(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:c;default:return[]}}function f9(t,e,n,r){const i=Dc(t);let o=d9(zs(t),n==="start",r);return i&&(o=o.map(c=>c+"-"+i),e&&(o=o.concat(o.map(jp)))),o}function Qf(t){return t.replace(/left|right|bottom|top/g,e=>l9[e])}function g9(t){return{top:0,right:0,bottom:0,left:0,...t}}function WT(t){return typeof t!="number"?g9(t):{top:t,right:t,bottom:t,left:t}}function Zf(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function xv(t,e,n){let{reference:r,floating:i}=t;const o=ra(e),c=tw(e),d=ew(c),g=zs(e),p=o==="y",x=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,_=r[d]/2-i[d]/2;let I;switch(g){case"top":I={x,y:r.y-i.height};break;case"bottom":I={x,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:E};break;case"left":I={x:r.x-i.width,y:E};break;default:I={x:r.x,y:r.y}}switch(Dc(e)){case"start":I[c]-=_*(n&&p?-1:1);break;case"end":I[c]+=_*(n&&p?-1:1);break}return I}const p9=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=n,d=o.filter(Boolean),g=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:t,floating:e,strategy:i}),{x,y:E}=xv(p,r,g),_=r,I={},D=0;for(let b=0;b<d.length;b++){const{name:F,fn:R}=d[b],{x:S,y:O,data:U,reset:Y}=await R({x,y:E,initialPlacement:r,placement:_,strategy:i,middlewareData:I,rects:p,platform:c,elements:{reference:t,floating:e}});x=S??x,E=O??E,I={...I,[F]:{...I[F],...U}},Y&&D<=50&&(D++,typeof Y=="object"&&(Y.placement&&(_=Y.placement),Y.rects&&(p=Y.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:i}):Y.rects),{x,y:E}=xv(p,_,g)),b=-1)}return{x,y:E,placement:_,strategy:i,middlewareData:I}};async function rh(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:c,elements:d,strategy:g}=t,{boundary:p="clippingAncestors",rootBoundary:x="viewport",elementContext:E="floating",altBoundary:_=!1,padding:I=0}=js(e,t),D=WT(I),F=d[_?E==="floating"?"reference":"floating":E],R=Zf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(F)))==null||n?F:F.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(d.floating)),boundary:p,rootBoundary:x,strategy:g})),S=E==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d.floating)),U=await(o.isElement==null?void 0:o.isElement(O))?await(o.getScale==null?void 0:o.getScale(O))||{x:1,y:1}:{x:1,y:1},Y=Zf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:S,offsetParent:O,strategy:g}):S);return{top:(R.top-Y.top+D.top)/U.y,bottom:(Y.bottom-R.bottom+D.bottom)/U.y,left:(R.left-Y.left+D.left)/U.x,right:(Y.right-R.right+D.right)/U.x}}const m9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:c,elements:d,middlewareData:g}=e,{element:p,padding:x=0}=js(t,e)||{};if(p==null)return{};const E=WT(x),_={x:n,y:r},I=tw(i),D=ew(I),b=await c.getDimensions(p),F=I==="y",R=F?"top":"left",S=F?"bottom":"right",O=F?"clientHeight":"clientWidth",U=o.reference[D]+o.reference[I]-_[I]-o.floating[D],Y=_[I]-o.reference[I],Z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let k=Z?Z[O]:0;(!k||!await(c.isElement==null?void 0:c.isElement(Z)))&&(k=d.floating[O]||o.floating[D]);const M=U/2-Y/2,L=k/2-b[D]/2-1,G=ta(E[R],L),X=ta(E[S],L),$=G,j=k-b[D]-X,he=k/2-b[D]/2+M,J=Up($,he,j),Ie=!g.arrow&&Dc(i)!=null&&he!==J&&o.reference[D]/2-(he<$?G:X)-b[D]/2<0,ye=Ie?he<$?he-$:he-j:0;return{[I]:_[I]+ye,data:{[I]:J,centerOffset:he-J-ye,...Ie&&{alignmentOffset:ye}},reset:Ie}}}),y9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:d,platform:g,elements:p}=e,{mainAxis:x=!0,crossAxis:E=!0,fallbackPlacements:_,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:b=!0,...F}=js(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const R=zs(i),S=ra(d),O=zs(d)===d,U=await(g.isRTL==null?void 0:g.isRTL(p.floating)),Y=_||(O||!b?[Qf(d)]:h9(d)),Z=D!=="none";!_&&Z&&Y.push(...f9(d,b,D,U));const k=[d,...Y],M=await rh(e,F),L=[];let G=((r=o.flip)==null?void 0:r.overflows)||[];if(x&&L.push(M[R]),E){const he=u9(i,c,U);L.push(M[he[0]],M[he[1]])}if(G=[...G,{placement:i,overflows:L}],!L.every(he=>he<=0)){var X,$;const he=(((X=o.flip)==null?void 0:X.index)||0)+1,J=k[he];if(J)return{data:{index:he,overflows:G},reset:{placement:J}};let Ie=($=G.filter(ye=>ye.overflows[0]<=0).sort((ye,re)=>ye.overflows[1]-re.overflows[1])[0])==null?void 0:$.placement;if(!Ie)switch(I){case"bestFit":{var j;const ye=(j=G.filter(re=>{if(Z){const fe=ra(re.placement);return fe===S||fe==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(fe=>fe>0).reduce((fe,Te)=>fe+Te,0)]).sort((re,fe)=>re[1]-fe[1])[0])==null?void 0:j[0];ye&&(Ie=ye);break}case"initialPlacement":Ie=d;break}if(i!==Ie)return{reset:{placement:Ie}}}return{}}}};function vv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ev(t){return a9.some(e=>t[e]>=0)}const w9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=js(t,e);switch(r){case"referenceHidden":{const o=await rh(e,{...i,elementContext:"reference"}),c=vv(o,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Ev(c)}}}case"escaped":{const o=await rh(e,{...i,altBoundary:!0}),c=vv(o,n.floating);return{data:{escapedOffsets:c,escaped:Ev(c)}}}default:return{}}}}};async function x9(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=zs(n),d=Dc(n),g=ra(n)==="y",p=["left","top"].includes(c)?-1:1,x=o&&g?-1:1,E=js(e,t);let{mainAxis:_,crossAxis:I,alignmentAxis:D}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return d&&typeof D=="number"&&(I=d==="end"?D*-1:D),g?{x:I*x,y:_*p}:{x:_*p,y:I*x}}const v9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:c,middlewareData:d}=e,g=await x9(e,t);return c===((n=d.offset)==null?void 0:n.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+g.x,y:o+g.y,data:{...g,placement:c}}}}},E9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:d={fn:F=>{let{x:R,y:S}=F;return{x:R,y:S}}},...g}=js(t,e),p={x:n,y:r},x=await rh(e,g),E=ra(zs(i)),_=Jy(E);let I=p[_],D=p[E];if(o){const F=_==="y"?"top":"left",R=_==="y"?"bottom":"right",S=I+x[F],O=I-x[R];I=Up(S,I,O)}if(c){const F=E==="y"?"top":"left",R=E==="y"?"bottom":"right",S=D+x[F],O=D-x[R];D=Up(S,D,O)}const b=d.fn({...e,[_]:I,[E]:D});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[_]:o,[E]:c}}}}}},_9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:c}=e,{offset:d=0,mainAxis:g=!0,crossAxis:p=!0}=js(t,e),x={x:n,y:r},E=ra(i),_=Jy(E);let I=x[_],D=x[E];const b=js(d,e),F=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(g){const O=_==="y"?"height":"width",U=o.reference[_]-o.floating[O]+F.mainAxis,Y=o.reference[_]+o.reference[O]-F.mainAxis;I<U?I=U:I>Y&&(I=Y)}if(p){var R,S;const O=_==="y"?"width":"height",U=["top","left"].includes(zs(i)),Y=o.reference[E]-o.floating[O]+(U&&((R=c.offset)==null?void 0:R[E])||0)+(U?0:F.crossAxis),Z=o.reference[E]+o.reference[O]+(U?0:((S=c.offset)==null?void 0:S[E])||0)-(U?F.crossAxis:0);D<Y?D=Y:D>Z&&(D=Z)}return{[_]:I,[E]:D}}}},A9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:c,elements:d}=e,{apply:g=()=>{},...p}=js(t,e),x=await rh(e,p),E=zs(i),_=Dc(i),I=ra(i)==="y",{width:D,height:b}=o.floating;let F,R;E==="top"||E==="bottom"?(F=E,R=_===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(R=E,F=_==="end"?"top":"bottom");const S=b-x.top-x.bottom,O=D-x.left-x.right,U=ta(b-x[F],S),Y=ta(D-x[R],O),Z=!e.middlewareData.shift;let k=U,M=Y;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=S),Z&&!_){const G=Xr(x.left,0),X=Xr(x.right,0),$=Xr(x.top,0),j=Xr(x.bottom,0);I?M=D-2*(G!==0||X!==0?G+X:Xr(x.left,x.right)):k=b-2*($!==0||j!==0?$+j:Xr(x.top,x.bottom))}await g({...e,availableWidth:M,availableHeight:k});const L=await c.getDimensions(d.floating);return D!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function Q0(){return typeof window<"u"}function kc(t){return GT(t)?(t.nodeName||"").toLowerCase():"#document"}function ti(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gs(t){var e;return(e=(GT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GT(t){return Q0()?t instanceof Node||t instanceof ti(t).Node:!1}function Bi(t){return Q0()?t instanceof Element||t instanceof ti(t).Element:!1}function fs(t){return Q0()?t instanceof HTMLElement||t instanceof ti(t).HTMLElement:!1}function _v(t){return!Q0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ti(t).ShadowRoot}function Mh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Vi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function C9(t){return["table","td","th"].includes(kc(t))}function Z0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function nw(t){const e=rw(),n=Bi(t)?Vi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function I9(t){let e=ia(t);for(;fs(e)&&!mc(e);){if(nw(e))return e;if(Z0(e))return null;e=ia(e)}return null}function rw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mc(t){return["html","body","#document"].includes(kc(t))}function Vi(t){return ti(t).getComputedStyle(t)}function J0(t){return Bi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ia(t){if(kc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_v(t)&&t.host||gs(t);return _v(e)?e.host:e}function qT(t){const e=ia(t);return mc(e)?t.ownerDocument?t.ownerDocument.body:t.body:fs(e)&&Mh(e)?e:qT(e)}function ih(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=qT(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),c=ti(i);if(o){const d=zp(c);return e.concat(c,c.visualViewport||[],Mh(i)?i:[],d&&n?ih(d):[])}return e.concat(i,ih(i,[],n))}function zp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $T(t){const e=Vi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=fs(t),o=i?t.offsetWidth:n,c=i?t.offsetHeight:r,d=Yf(n)!==o||Yf(r)!==c;return d&&(n=o,r=c),{width:n,height:r,$:d}}function iw(t){return Bi(t)?t:t.contextElement}function ql(t){const e=iw(t);if(!fs(e))return na(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=$T(e);let c=(o?Yf(n.width):n.width)/r,d=(o?Yf(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const T9=na(0);function XT(t){const e=ti(t);return!rw()||!e.visualViewport?T9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function S9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ti(t)?!1:e}function el(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=iw(t);let c=na(1);e&&(r?Bi(r)&&(c=ql(r)):c=ql(t));const d=S9(o,n,r)?XT(o):na(0);let g=(i.left+d.x)/c.x,p=(i.top+d.y)/c.y,x=i.width/c.x,E=i.height/c.y;if(o){const _=ti(o),I=r&&Bi(r)?ti(r):r;let D=_,b=zp(D);for(;b&&r&&I!==D;){const F=ql(b),R=b.getBoundingClientRect(),S=Vi(b),O=R.left+(b.clientLeft+parseFloat(S.paddingLeft))*F.x,U=R.top+(b.clientTop+parseFloat(S.paddingTop))*F.y;g*=F.x,p*=F.y,x*=F.x,E*=F.y,g+=O,p+=U,D=ti(b),b=zp(D)}}return Zf({width:x,height:E,x:g,y:p})}function b9(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",c=gs(r),d=e?Z0(e.floating):!1;if(r===c||d&&o)return n;let g={scrollLeft:0,scrollTop:0},p=na(1);const x=na(0),E=fs(r);if((E||!E&&!o)&&((kc(r)!=="body"||Mh(c))&&(g=J0(r)),fs(r))){const _=el(r);p=ql(r),x.x=_.x+r.clientLeft,x.y=_.y+r.clientTop}return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-g.scrollLeft*p.x+x.x,y:n.y*p.y-g.scrollTop*p.y+x.y}}function R9(t){return Array.from(t.getClientRects())}function Hp(t,e){const n=J0(t).scrollLeft;return e?e.left+n:el(gs(t)).left+n}function N9(t){const e=gs(t),n=J0(t),r=t.ownerDocument.body,i=Xr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Xr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Hp(t);const d=-n.scrollTop;return Vi(r).direction==="rtl"&&(c+=Xr(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:d}}function P9(t,e){const n=ti(t),r=gs(t),i=n.visualViewport;let o=r.clientWidth,c=r.clientHeight,d=0,g=0;if(i){o=i.width,c=i.height;const p=rw();(!p||p&&e==="fixed")&&(d=i.offsetLeft,g=i.offsetTop)}return{width:o,height:c,x:d,y:g}}function O9(t,e){const n=el(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=fs(t)?ql(t):na(1),c=t.clientWidth*o.x,d=t.clientHeight*o.y,g=i*o.x,p=r*o.y;return{width:c,height:d,x:g,y:p}}function Av(t,e,n){let r;if(e==="viewport")r=P9(t,n);else if(e==="document")r=N9(gs(t));else if(Bi(e))r=O9(e,n);else{const i=XT(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Zf(r)}function KT(t,e){const n=ia(t);return n===e||!Bi(n)||mc(n)?!1:Vi(n).position==="fixed"||KT(n,e)}function D9(t,e){const n=e.get(t);if(n)return n;let r=ih(t,[],!1).filter(d=>Bi(d)&&kc(d)!=="body"),i=null;const o=Vi(t).position==="fixed";let c=o?ia(t):t;for(;Bi(c)&&!mc(c);){const d=Vi(c),g=nw(c);!g&&d.position==="fixed"&&(i=null),(o?!g&&!i:!g&&d.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Mh(c)&&!g&&KT(t,c))?r=r.filter(x=>x!==c):i=d,c=ia(c)}return e.set(t,r),r}function k9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const c=[...n==="clippingAncestors"?Z0(e)?[]:D9(e,this._c):[].concat(n),r],d=c[0],g=c.reduce((p,x)=>{const E=Av(e,x,i);return p.top=Xr(E.top,p.top),p.right=ta(E.right,p.right),p.bottom=ta(E.bottom,p.bottom),p.left=Xr(E.left,p.left),p},Av(e,d,i));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function M9(t){const{width:e,height:n}=$T(t);return{width:e,height:n}}function L9(t,e,n){const r=fs(e),i=gs(e),o=n==="fixed",c=el(t,!0,o,e);let d={scrollLeft:0,scrollTop:0};const g=na(0);if(r||!r&&!o)if((kc(e)!=="body"||Mh(i))&&(d=J0(e)),r){const I=el(e,!0,o,e);g.x=I.x+e.clientLeft,g.y=I.y+e.clientTop}else i&&(g.x=Hp(i));let p=0,x=0;if(i&&!r&&!o){const I=i.getBoundingClientRect();x=I.top+d.scrollTop,p=I.left+d.scrollLeft-Hp(i,I)}const E=c.left+d.scrollLeft-g.x-p,_=c.top+d.scrollTop-g.y-x;return{x:E,y:_,width:c.width,height:c.height}}function sg(t){return Vi(t).position==="static"}function Cv(t,e){if(!fs(t)||Vi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gs(t)===n&&(n=n.ownerDocument.body),n}function YT(t,e){const n=ti(t);if(Z0(t))return n;if(!fs(t)){let i=ia(t);for(;i&&!mc(i);){if(Bi(i)&&!sg(i))return i;i=ia(i)}return n}let r=Cv(t,e);for(;r&&C9(r)&&sg(r);)r=Cv(r,e);return r&&mc(r)&&sg(r)&&!nw(r)?n:r||I9(t)||n}const F9=async function(t){const e=this.getOffsetParent||YT,n=this.getDimensions,r=await n(t.floating);return{reference:L9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function B9(t){return Vi(t).direction==="rtl"}const V9={convertOffsetParentRelativeRectToViewportRelativeRect:b9,getDocumentElement:gs,getClippingRect:k9,getOffsetParent:YT,getElementRects:F9,getClientRects:R9,getDimensions:M9,getScale:ql,isElement:Bi,isRTL:B9};function U9(t,e){let n=null,r;const i=gs(t);function o(){var d;clearTimeout(r),(d=n)==null||d.disconnect(),n=null}function c(d,g){d===void 0&&(d=!1),g===void 0&&(g=1),o();const{left:p,top:x,width:E,height:_}=t.getBoundingClientRect();if(d||e(),!E||!_)return;const I=Sd(x),D=Sd(i.clientWidth-(p+E)),b=Sd(i.clientHeight-(x+_)),F=Sd(p),S={rootMargin:-I+"px "+-D+"px "+-b+"px "+-F+"px",threshold:Xr(0,ta(1,g))||1};let O=!0;function U(Y){const Z=Y[0].intersectionRatio;if(Z!==g){if(!O)return c();Z?c(!1,Z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}O=!1}try{n=new IntersectionObserver(U,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(U,S)}n.observe(t)}return c(!0),o}function j9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:g=!1}=r,p=iw(t),x=i||o?[...p?ih(p):[],...ih(e)]:[];x.forEach(R=>{i&&R.addEventListener("scroll",n,{passive:!0}),o&&R.addEventListener("resize",n)});const E=p&&d?U9(p,n):null;let _=-1,I=null;c&&(I=new ResizeObserver(R=>{let[S]=R;S&&S.target===p&&I&&(I.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var O;(O=I)==null||O.observe(e)})),n()}),p&&!g&&I.observe(p),I.observe(e));let D,b=g?el(t):null;g&&F();function F(){const R=el(t);b&&(R.x!==b.x||R.y!==b.y||R.width!==b.width||R.height!==b.height)&&n(),b=R,D=requestAnimationFrame(F)}return n(),()=>{var R;x.forEach(S=>{i&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),E==null||E(),(R=I)==null||R.disconnect(),I=null,g&&cancelAnimationFrame(D)}}const z9=v9,H9=E9,W9=y9,G9=A9,q9=w9,Iv=m9,$9=_9,X9=(t,e,n)=>{const r=new Map,i={platform:V9,...n},o={...i.platform,_c:r};return p9(t,e,{...i,platform:o})};var tf=typeof document<"u"?W.useLayoutEffect:W.useEffect;function Jf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Jf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function QT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Tv(t,e){const n=QT(t);return Math.round(e*n)/n}function og(t){const e=W.useRef(t);return tf(()=>{e.current=t}),e}function K9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:d=!0,whileElementsMounted:g,open:p}=t,[x,E]=W.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[_,I]=W.useState(r);Jf(_,r)||I(r);const[D,b]=W.useState(null),[F,R]=W.useState(null),S=W.useCallback(re=>{re!==Z.current&&(Z.current=re,b(re))},[]),O=W.useCallback(re=>{re!==k.current&&(k.current=re,R(re))},[]),U=o||D,Y=c||F,Z=W.useRef(null),k=W.useRef(null),M=W.useRef(x),L=g!=null,G=og(g),X=og(i),$=og(p),j=W.useCallback(()=>{if(!Z.current||!k.current)return;const re={placement:e,strategy:n,middleware:_};X.current&&(re.platform=X.current),X9(Z.current,k.current,re).then(fe=>{const Te={...fe,isPositioned:$.current!==!1};he.current&&!Jf(M.current,Te)&&(M.current=Te,yh.flushSync(()=>{E(Te)}))})},[_,e,n,X,$]);tf(()=>{p===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,E(re=>({...re,isPositioned:!1})))},[p]);const he=W.useRef(!1);tf(()=>(he.current=!0,()=>{he.current=!1}),[]),tf(()=>{if(U&&(Z.current=U),Y&&(k.current=Y),U&&Y){if(G.current)return G.current(U,Y,j);j()}},[U,Y,j,G,L]);const J=W.useMemo(()=>({reference:Z,floating:k,setReference:S,setFloating:O}),[S,O]),Ie=W.useMemo(()=>({reference:U,floating:Y}),[U,Y]),ye=W.useMemo(()=>{const re={position:n,left:0,top:0};if(!Ie.floating)return re;const fe=Tv(Ie.floating,x.x),Te=Tv(Ie.floating,x.y);return d?{...re,transform:"translate("+fe+"px, "+Te+"px)",...QT(Ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:fe,top:Te}},[n,d,Ie.floating,x.x,x.y]);return W.useMemo(()=>({...x,update:j,refs:J,elements:Ie,floatingStyles:ye}),[x,j,J,Ie,ye])}const Y9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Iv({element:r.current,padding:i}).fn(n):{}:r?Iv({element:r,padding:i}).fn(n):{}}}},Q9=(t,e)=>({...z9(t),options:[t,e]}),Z9=(t,e)=>({...H9(t),options:[t,e]}),J9=(t,e)=>({...$9(t),options:[t,e]}),eM=(t,e)=>({...W9(t),options:[t,e]}),tM=(t,e)=>({...G9(t),options:[t,e]}),nM=(t,e)=>({...q9(t),options:[t,e]}),rM=(t,e)=>({...Y9(t),options:[t,e]});var iM="Arrow",ZT=W.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return z.jsx(Ar.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:z.jsx("polygon",{points:"0,0 30,0 15,10"})})});ZT.displayName=iM;var sM=ZT;function oM(t,e=[]){let n=[];function r(o,c){const d=W.createContext(c),g=n.length;n=[...n,c];function p(E){const{scope:_,children:I,...D}=E,b=(_==null?void 0:_[t][g])||d,F=W.useMemo(()=>D,Object.values(D));return z.jsx(b.Provider,{value:F,children:I})}function x(E,_){const I=(_==null?void 0:_[t][g])||d,D=W.useContext(I);if(D)return D;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return p.displayName=o+"Provider",[p,x]}const i=()=>{const o=n.map(c=>W.createContext(c));return function(d){const g=(d==null?void 0:d[t])||o;return W.useMemo(()=>({[`__scope${t}`]:{...d,[t]:g}}),[d,g])}};return i.scopeName=t,[r,aM(i,...e)]}function aM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((d,{useScope:g,scopeName:p})=>{const E=g(o)[`__scope${p}`];return{...d,...E}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function lM(t){const[e,n]=W.useState(void 0);return $a(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,d;if("borderBoxSize"in o){const g=o.borderBoxSize,p=Array.isArray(g)?g[0]:g;c=p.inlineSize,d=p.blockSize}else c=t.offsetWidth,d=t.offsetHeight;n({width:c,height:d})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var JT="Popper",[eS,tS]=oM(JT),[HF,nS]=eS(JT),rS="PopperAnchor",iS=W.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=nS(rS,n),c=W.useRef(null),d=Mi(e,c);return W.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:z.jsx(Ar.div,{...i,ref:d})});iS.displayName=rS;var sw="PopperContent",[cM,uM]=eS(sw),sS=W.forwardRef((t,e)=>{var pn,Et,Kn,_n,Wt,lr;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:g=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:E="partial",hideWhenDetached:_=!1,updatePositionStrategy:I="optimized",onPlaced:D,...b}=t,F=nS(sw,n),[R,S]=W.useState(null),O=Mi(e,$e=>S($e)),[U,Y]=W.useState(null),Z=lM(U),k=(Z==null?void 0:Z.width)??0,M=(Z==null?void 0:Z.height)??0,L=r+(o!=="center"?"-"+o:""),G=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},X=Array.isArray(p)?p:[p],$=X.length>0,j={padding:G,boundary:X.filter(dM),altBoundary:$},{refs:he,floatingStyles:J,placement:Ie,isPositioned:ye,middlewareData:re}=K9({strategy:"fixed",placement:L,whileElementsMounted:(...$e)=>j9(...$e,{animationFrame:I==="always"}),elements:{reference:F.anchor},middleware:[Q9({mainAxis:i+M,alignmentAxis:c}),g&&Z9({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?J9():void 0,...j}),g&&eM({...j}),tM({...j,apply:({elements:$e,rects:Yn,availableWidth:An,availableHeight:Vn})=>{const{width:Xt,height:ft}=Yn.reference,Le=$e.floating.style;Le.setProperty("--radix-popper-available-width",`${An}px`),Le.setProperty("--radix-popper-available-height",`${Vn}px`),Le.setProperty("--radix-popper-anchor-width",`${Xt}px`),Le.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),U&&rM({element:U,padding:d}),fM({arrowWidth:k,arrowHeight:M}),_&&nM({strategy:"referenceHidden",...j})]}),[fe,Te]=lS(Ie),Se=hs(D);$a(()=>{ye&&(Se==null||Se())},[ye,Se]);const Ce=(pn=re.arrow)==null?void 0:pn.x,De=(Et=re.arrow)==null?void 0:Et.y,Ke=((Kn=re.arrow)==null?void 0:Kn.centerOffset)!==0,[$t,Ee]=W.useState();return $a(()=>{R&&Ee(window.getComputedStyle(R).zIndex)},[R]),z.jsx("div",{ref:he.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:ye?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$t,"--radix-popper-transform-origin":[(_n=re.transformOrigin)==null?void 0:_n.x,(Wt=re.transformOrigin)==null?void 0:Wt.y].join(" "),...((lr=re.hide)==null?void 0:lr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:z.jsx(cM,{scope:n,placedSide:fe,onArrowChange:Y,arrowX:Ce,arrowY:De,shouldHideArrow:Ke,children:z.jsx(Ar.div,{"data-side":fe,"data-align":Te,...b,ref:O,style:{...b.style,animation:ye?void 0:"none"}})})})});sS.displayName=sw;var oS="PopperArrow",hM={top:"bottom",right:"left",bottom:"top",left:"right"},aS=W.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=uM(oS,r),c=hM[o.placedSide];return z.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:z.jsx(sM,{...i,ref:n,style:{...i.style,display:"block"}})})});aS.displayName=oS;function dM(t){return t!==null}var fM=t=>({name:"transformOrigin",options:t,fn(e){var F,R,S;const{placement:n,rects:r,middlewareData:i}=e,c=((F=i.arrow)==null?void 0:F.centerOffset)!==0,d=c?0:t.arrowWidth,g=c?0:t.arrowHeight,[p,x]=lS(n),E={start:"0%",center:"50%",end:"100%"}[x],_=(((R=i.arrow)==null?void 0:R.x)??0)+d/2,I=(((S=i.arrow)==null?void 0:S.y)??0)+g/2;let D="",b="";return p==="bottom"?(D=c?E:`${_}px`,b=`${-g}px`):p==="top"?(D=c?E:`${_}px`,b=`${r.floating.height+g}px`):p==="right"?(D=`${-g}px`,b=c?E:`${I}px`):p==="left"&&(D=`${r.floating.width+g}px`,b=c?E:`${I}px`),{data:{x:D,y:b}}}});function lS(t){const[e,n="center"]=t.split("-");return[e,n]}var gM=iS,pM=sS,mM=aS,[e1,WF]=SA("Tooltip",[tS]),ow=tS(),cS="TooltipProvider",yM=700,Sv="tooltip.open",[wM,uS]=e1(cS),hS=t=>{const{__scopeTooltip:e,delayDuration:n=yM,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,[c,d]=W.useState(!0),g=W.useRef(!1),p=W.useRef(0);return W.useEffect(()=>{const x=p.current;return()=>window.clearTimeout(x)},[]),z.jsx(wM,{scope:e,isOpenDelayed:c,delayDuration:n,onOpen:W.useCallback(()=>{window.clearTimeout(p.current),d(!1)},[]),onClose:W.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>d(!0),r)},[r]),isPointerInTransitRef:g,onPointerInTransitChange:W.useCallback(x=>{g.current=x},[]),disableHoverableContent:i,children:o})};hS.displayName=cS;var dS="Tooltip",[GF,t1]=e1(dS),Wp="TooltipTrigger",xM=W.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=t1(Wp,n),o=uS(Wp,n),c=ow(n),d=W.useRef(null),g=Mi(e,d,i.onTriggerChange),p=W.useRef(!1),x=W.useRef(!1),E=W.useCallback(()=>p.current=!1,[]);return W.useEffect(()=>()=>document.removeEventListener("pointerup",E),[E]),z.jsx(gM,{asChild:!0,...c,children:z.jsx(Ar.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:g,onPointerMove:Nn(t.onPointerMove,_=>{_.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),x.current=!0)}),onPointerLeave:Nn(t.onPointerLeave,()=>{i.onTriggerLeave(),x.current=!1}),onPointerDown:Nn(t.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",E,{once:!0})}),onFocus:Nn(t.onFocus,()=>{p.current||i.onOpen()}),onBlur:Nn(t.onBlur,i.onClose),onClick:Nn(t.onClick,i.onClose)})})});xM.displayName=Wp;var vM="TooltipPortal",[qF,EM]=e1(vM,{forceMount:void 0}),yc="TooltipContent",fS=W.forwardRef((t,e)=>{const n=EM(yc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,c=t1(yc,t.__scopeTooltip);return z.jsx(Qm,{present:r||c.open,children:c.disableHoverableContent?z.jsx(gS,{side:i,...o,ref:e}):z.jsx(_M,{side:i,...o,ref:e})})}),_M=W.forwardRef((t,e)=>{const n=t1(yc,t.__scopeTooltip),r=uS(yc,t.__scopeTooltip),i=W.useRef(null),o=Mi(e,i),[c,d]=W.useState(null),{trigger:g,onClose:p}=n,x=i.current,{onPointerInTransitChange:E}=r,_=W.useCallback(()=>{d(null),E(!1)},[E]),I=W.useCallback((D,b)=>{const F=D.currentTarget,R={x:D.clientX,y:D.clientY},S=TM(R,F.getBoundingClientRect()),O=SM(R,S),U=bM(b.getBoundingClientRect()),Y=NM([...O,...U]);d(Y),E(!0)},[E]);return W.useEffect(()=>()=>_(),[_]),W.useEffect(()=>{if(g&&x){const D=F=>I(F,x),b=F=>I(F,g);return g.addEventListener("pointerleave",D),x.addEventListener("pointerleave",b),()=>{g.removeEventListener("pointerleave",D),x.removeEventListener("pointerleave",b)}}},[g,x,I,_]),W.useEffect(()=>{if(c){const D=b=>{const F=b.target,R={x:b.clientX,y:b.clientY},S=(g==null?void 0:g.contains(F))||(x==null?void 0:x.contains(F)),O=!RM(R,c);S?_():O&&(_(),p())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[g,x,c,p,_]),z.jsx(gS,{...t,ref:o})}),[AM,CM]=e1(dS,{isInside:!1}),gS=W.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:c,...d}=t,g=t1(yc,n),p=ow(n),{onClose:x}=g;return W.useEffect(()=>(document.addEventListener(Sv,x),()=>document.removeEventListener(Sv,x)),[x]),W.useEffect(()=>{if(g.trigger){const E=_=>{const I=_.target;I!=null&&I.contains(g.trigger)&&x()};return window.addEventListener("scroll",E,{capture:!0}),()=>window.removeEventListener("scroll",E,{capture:!0})}},[g.trigger,x]),z.jsx(Ym,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:E=>E.preventDefault(),onDismiss:x,children:z.jsxs(pM,{"data-state":g.stateAttribute,...p,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[z.jsx(TA,{children:r}),z.jsx(AM,{scope:n,isInside:!0,children:z.jsx(uR,{id:g.contentId,role:"tooltip",children:i||r})})]})})});fS.displayName=yc;var pS="TooltipArrow",IM=W.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=ow(n);return CM(pS,n).isInside?null:z.jsx(mM,{...i,...r,ref:e})});IM.displayName=pS;function TM(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function SM(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function bM(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function RM(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,c=e.length-1;o<e.length;c=o++){const d=e[o].x,g=e[o].y,p=e[c].x,x=e[c].y;g>r!=x>r&&n<(p-d)*(r-g)/(x-g)+d&&(i=!i)}return i}function NM(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),PM(e)}function PM(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],c=e[e.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],c=n[n.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var OM=hS,mS=fS;const DM=OM,kM=W.forwardRef(({className:t,sideOffset:e=4,...n},r)=>z.jsx(mS,{ref:r,sideOffset:e,className:Ui("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));kM.displayName=mS.displayName;var n1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},r1=typeof window>"u"||"Deno"in globalThis;function Si(){}function MM(t,e){return typeof t=="function"?t(e):t}function LM(t){return typeof t=="number"&&t>=0&&t!==1/0}function FM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bv(t,e){return typeof t=="function"?t(e):t}function BM(t,e){return typeof t=="function"?t(e):t}function Rv(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:c,stale:d}=t;if(c){if(r){if(e.queryHash!==aw(c,e.options))return!1}else if(!oh(e.queryKey,c))return!1}if(n!=="all"){const g=e.isActive();if(n==="active"&&!g||n==="inactive"&&g)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||i&&i!==e.state.fetchStatus||o&&!o(e))}function Nv(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(sh(e.options.mutationKey)!==sh(o))return!1}else if(!oh(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function aw(t,e){return((e==null?void 0:e.queryKeyHashFn)||sh)(t)}function sh(t){return JSON.stringify(t,(e,n)=>Gp(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function oh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!oh(t[n],e[n])):!1}function yS(t,e){if(t===e)return t;const n=Pv(t)&&Pv(e);if(n||Gp(t)&&Gp(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),c=o.length,d=n?[]:{};let g=0;for(let p=0;p<c;p++){const x=n?p:o[p];(!n&&r.includes(x)||n)&&t[x]===void 0&&e[x]===void 0?(d[x]=void 0,g++):(d[x]=yS(t[x],e[x]),d[x]===t[x]&&t[x]!==void 0&&g++)}return i===c&&g===i?t:d}return e}function Pv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Gp(t){if(!Ov(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ov(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ov(t){return Object.prototype.toString.call(t)==="[object Object]"}function VM(t){return new Promise(e=>{setTimeout(e,t)})}function UM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yS(t,e):e}function jM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function zM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var lw=Symbol();function wS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===lw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ma,vo,Xl,nE,HM=(nE=class extends n1{constructor(){super();vt(this,Ma);vt(this,vo);vt(this,Xl);Qe(this,Xl,e=>{if(!r1&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ue(this,vo)||this.setEventListener(ue(this,Xl))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,vo))==null||e.call(this),Qe(this,vo,void 0))}setEventListener(e){var n;Qe(this,Xl,e),(n=ue(this,vo))==null||n.call(this),Qe(this,vo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ue(this,Ma)!==e&&(Qe(this,Ma,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ue(this,Ma)=="boolean"?ue(this,Ma):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ma=new WeakMap,vo=new WeakMap,Xl=new WeakMap,nE),xS=new HM,Kl,Eo,Yl,rE,WM=(rE=class extends n1{constructor(){super();vt(this,Kl,!0);vt(this,Eo);vt(this,Yl);Qe(this,Yl,e=>{if(!r1&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ue(this,Eo)||this.setEventListener(ue(this,Yl))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,Eo))==null||e.call(this),Qe(this,Eo,void 0))}setEventListener(e){var n;Qe(this,Yl,e),(n=ue(this,Eo))==null||n.call(this),Qe(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){ue(this,Kl)!==e&&(Qe(this,Kl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ue(this,Kl)}},Kl=new WeakMap,Eo=new WeakMap,Yl=new WeakMap,rE),e0=new WM;function GM(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function qM(t){return Math.min(1e3*2**t,3e4)}function vS(t){return(t??"online")==="online"?e0.isOnline():!0}var ES=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ag(t){return t instanceof ES}function _S(t){let e=!1,n=0,r=!1,i;const o=GM(),c=b=>{var F;r||(_(new ES(b)),(F=t.abort)==null||F.call(t))},d=()=>{e=!0},g=()=>{e=!1},p=()=>xS.isFocused()&&(t.networkMode==="always"||e0.isOnline())&&t.canRun(),x=()=>vS(t.networkMode)&&t.canRun(),E=b=>{var F;r||(r=!0,(F=t.onSuccess)==null||F.call(t,b),i==null||i(),o.resolve(b))},_=b=>{var F;r||(r=!0,(F=t.onError)==null||F.call(t,b),i==null||i(),o.reject(b))},I=()=>new Promise(b=>{var F;i=R=>{(r||p())&&b(R)},(F=t.onPause)==null||F.call(t)}).then(()=>{var b;i=void 0,r||(b=t.onContinue)==null||b.call(t)}),D=()=>{if(r)return;let b;const F=n===0?t.initialPromise:void 0;try{b=F??t.fn()}catch(R){b=Promise.reject(R)}Promise.resolve(b).then(E).catch(R=>{var Z;if(r)return;const S=t.retry??(r1?0:3),O=t.retryDelay??qM,U=typeof O=="function"?O(n,R):O,Y=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,R);if(e||!Y){_(R);return}n++,(Z=t.onFail)==null||Z.call(t,n,R),VM(U).then(()=>p()?void 0:I()).then(()=>{e?_(R):D()})})};return{promise:o,cancel:c,continue:()=>(i==null||i(),o),cancelRetry:d,continueRetry:g,canStart:x,start:()=>(x()?D():I().then(D),o)}}function $M(){let t=[],e=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{e?t.push(d):i(()=>{n(d)})},c=()=>{const d=t;t=[],d.length&&i(()=>{r(()=>{d.forEach(g=>{n(g)})})})};return{batch:d=>{let g;e++;try{g=d()}finally{e--,e||c()}return g},batchCalls:d=>(...g)=>{o(()=>{d(...g)})},schedule:o,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{i=d}}}var mr=$M(),La,iE,AS=(iE=class{constructor(){vt(this,La)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LM(this.gcTime)&&Qe(this,La,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(r1?1/0:5*60*1e3))}clearGcTimeout(){ue(this,La)&&(clearTimeout(ue(this,La)),Qe(this,La,void 0))}},La=new WeakMap,iE),Ql,Zl,hi,rr,uh,Fa,bi,As,sE,XM=(sE=class extends AS{constructor(e){super();vt(this,bi);vt(this,Ql);vt(this,Zl);vt(this,hi);vt(this,rr);vt(this,uh);vt(this,Fa);Qe(this,Fa,!1),Qe(this,uh,e.defaultOptions),this.setOptions(e.options),this.observers=[],Qe(this,hi,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Qe(this,Ql,YM(this.options)),this.state=e.state??ue(this,Ql),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ue(this,rr))==null?void 0:e.promise}setOptions(e){this.options={...ue(this,uh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ue(this,hi).remove(this)}setData(e,n){const r=UM(this.state.data,e,this.options);return Jn(this,bi,As).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Jn(this,bi,As).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=ue(this,rr))==null?void 0:r.promise;return(i=ue(this,rr))==null||i.cancel(e),n?n.then(Si).catch(Si):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,Ql))}isActive(){return this.observers.some(e=>BM(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!FM(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ue(this,rr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ue(this,rr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ue(this,hi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ue(this,rr)&&(ue(this,Fa)?ue(this,rr).cancel({revert:!0}):ue(this,rr).cancelRetry()),this.scheduleGc()),ue(this,hi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jn(this,bi,As).call(this,{type:"invalidate"})}fetch(e,n){var g,p,x;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ue(this,rr))return ue(this,rr).continueRetry(),ue(this,rr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(_=>_.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Qe(this,Fa,!0),r.signal)})},o=()=>{const E=wS(this.options,n),_={queryKey:this.queryKey,meta:this.meta};return i(_),Qe(this,Fa,!1),this.options.persister?this.options.persister(E,_,this):E(_)},c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(c),(g=this.options.behavior)==null||g.onFetch(c,this),Qe(this,Zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&Jn(this,bi,As).call(this,{type:"fetch",meta:(x=c.fetchOptions)==null?void 0:x.meta});const d=E=>{var _,I,D,b;ag(E)&&E.silent||Jn(this,bi,As).call(this,{type:"error",error:E}),ag(E)||((I=(_=ue(this,hi).config).onError)==null||I.call(_,E,this),(b=(D=ue(this,hi).config).onSettled)==null||b.call(D,this.state.data,E,this)),this.scheduleGc()};return Qe(this,rr,_S({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:E=>{var _,I,D,b;if(E===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(F){d(F);return}(I=(_=ue(this,hi).config).onSuccess)==null||I.call(_,E,this),(b=(D=ue(this,hi).config).onSettled)==null||b.call(D,E,this.state.error,this),this.scheduleGc()},onError:d,onFail:(E,_)=>{Jn(this,bi,As).call(this,{type:"failed",failureCount:E,error:_})},onPause:()=>{Jn(this,bi,As).call(this,{type:"pause"})},onContinue:()=>{Jn(this,bi,As).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),ue(this,rr).start()}},Ql=new WeakMap,Zl=new WeakMap,hi=new WeakMap,rr=new WeakMap,uh=new WeakMap,Fa=new WeakMap,bi=new WeakSet,As=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...KM(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return ag(i)&&i.revert&&ue(this,Zl)?{...ue(this,Zl),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),mr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ue(this,hi).notify({query:this,type:"updated",action:e})})},sE);function KM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function YM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zi,oE,QM=(oE=class extends n1{constructor(e={}){super();vt(this,Zi);this.config=e,Qe(this,Zi,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??aw(i,n);let c=this.get(o);return c||(c=new XM({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(c)),c}add(e){ue(this,Zi).has(e.queryHash)||(ue(this,Zi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ue(this,Zi).get(e.queryHash);n&&(e.destroy(),n===e&&ue(this,Zi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ue(this,Zi).get(e)}getAll(){return[...ue(this,Zi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Rv(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Rv(e,r)):n}notify(e){mr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){mr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zi=new WeakMap,oE),Ji,gr,Ba,es,ao,aE,ZM=(aE=class extends AS{constructor(e){super();vt(this,es);vt(this,Ji);vt(this,gr);vt(this,Ba);this.mutationId=e.mutationId,Qe(this,gr,e.mutationCache),Qe(this,Ji,[]),this.state=e.state||JM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ue(this,Ji).includes(e)||(ue(this,Ji).push(e),this.clearGcTimeout(),ue(this,gr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Qe(this,Ji,ue(this,Ji).filter(n=>n!==e)),this.scheduleGc(),ue(this,gr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ue(this,Ji).length||(this.state.status==="pending"?this.scheduleGc():ue(this,gr).remove(this))}continue(){var e;return((e=ue(this,Ba))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,c,d,g,p,x,E,_,I,D,b,F,R,S,O,U,Y,Z,k;Qe(this,Ba,_S({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,L)=>{Jn(this,es,ao).call(this,{type:"failed",failureCount:M,error:L})},onPause:()=>{Jn(this,es,ao).call(this,{type:"pause"})},onContinue:()=>{Jn(this,es,ao).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ue(this,gr).canRun(this)}));const n=this.state.status==="pending",r=!ue(this,Ba).canStart();try{if(!n){Jn(this,es,ao).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=ue(this,gr).config).onMutate)==null?void 0:o.call(i,e,this));const L=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e));L!==this.state.context&&Jn(this,es,ao).call(this,{type:"pending",context:L,variables:e,isPaused:r})}const M=await ue(this,Ba).start();return await((p=(g=ue(this,gr).config).onSuccess)==null?void 0:p.call(g,M,e,this.state.context,this)),await((E=(x=this.options).onSuccess)==null?void 0:E.call(x,M,e,this.state.context)),await((I=(_=ue(this,gr).config).onSettled)==null?void 0:I.call(_,M,null,this.state.variables,this.state.context,this)),await((b=(D=this.options).onSettled)==null?void 0:b.call(D,M,null,e,this.state.context)),Jn(this,es,ao).call(this,{type:"success",data:M}),M}catch(M){try{throw await((R=(F=ue(this,gr).config).onError)==null?void 0:R.call(F,M,e,this.state.context,this)),await((O=(S=this.options).onError)==null?void 0:O.call(S,M,e,this.state.context)),await((Y=(U=ue(this,gr).config).onSettled)==null?void 0:Y.call(U,void 0,M,this.state.variables,this.state.context,this)),await((k=(Z=this.options).onSettled)==null?void 0:k.call(Z,void 0,M,e,this.state.context)),M}finally{Jn(this,es,ao).call(this,{type:"error",error:M})}}finally{ue(this,gr).runNext(this)}}},Ji=new WeakMap,gr=new WeakMap,Ba=new WeakMap,es=new WeakSet,ao=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),mr.batch(()=>{ue(this,Ji).forEach(r=>{r.onMutationUpdate(e)}),ue(this,gr).notify({mutation:this,type:"updated",action:e})})},aE);function JM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gr,hh,lE,e7=(lE=class extends n1{constructor(e={}){super();vt(this,Gr);vt(this,hh);this.config=e,Qe(this,Gr,new Map),Qe(this,hh,Date.now())}build(e,n,r){const i=new ZM({mutationCache:this,mutationId:++Jh(this,hh)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=bd(e),r=ue(this,Gr).get(n)??[];r.push(e),ue(this,Gr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=bd(e);if(ue(this,Gr).has(n)){const i=(r=ue(this,Gr).get(n))==null?void 0:r.filter(o=>o!==e);i&&(i.length===0?ue(this,Gr).delete(n):ue(this,Gr).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=ue(this,Gr).get(bd(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=ue(this,Gr).get(bd(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ue(this,Gr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Nv(n,r))}findAll(e={}){return this.getAll().filter(n=>Nv(e,n))}notify(e){mr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return mr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Si))))}},Gr=new WeakMap,hh=new WeakMap,lE);function bd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Dv(t){return{onFetch:(e,n)=>{var x,E,_,I,D;const r=e.options,i=(_=(E=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:E.fetchMore)==null?void 0:_.direction,o=((I=e.state.data)==null?void 0:I.pages)||[],c=((D=e.state.data)==null?void 0:D.pageParams)||[];let d={pages:[],pageParams:[]},g=0;const p=async()=>{let b=!1;const F=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},R=wS(e.options,e.fetchOptions),S=async(O,U,Y)=>{if(b)return Promise.reject();if(U==null&&O.pages.length)return Promise.resolve(O);const Z={queryKey:e.queryKey,pageParam:U,direction:Y?"backward":"forward",meta:e.options.meta};F(Z);const k=await R(Z),{maxPages:M}=e.options,L=Y?zM:jM;return{pages:L(O.pages,k,M),pageParams:L(O.pageParams,U,M)}};if(i&&o.length){const O=i==="backward",U=O?t7:kv,Y={pages:o,pageParams:c},Z=U(r,Y);d=await S(Y,Z,O)}else{const O=t??o.length;do{const U=g===0?c[0]??r.initialPageParam:kv(r,d);if(g>0&&U==null)break;d=await S(d,U),g++}while(g<O)}return d};e.options.persister?e.fetchFn=()=>{var b,F;return(F=(b=e.options).persister)==null?void 0:F.call(b,p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=p}}}function kv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function t7(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var on,_o,Ao,Jl,ec,Co,tc,nc,cE,n7=(cE=class{constructor(t={}){vt(this,on);vt(this,_o);vt(this,Ao);vt(this,Jl);vt(this,ec);vt(this,Co);vt(this,tc);vt(this,nc);Qe(this,on,t.queryCache||new QM),Qe(this,_o,t.mutationCache||new e7),Qe(this,Ao,t.defaultOptions||{}),Qe(this,Jl,new Map),Qe(this,ec,new Map),Qe(this,Co,0)}mount(){Jh(this,Co)._++,ue(this,Co)===1&&(Qe(this,tc,xS.subscribe(async t=>{t&&(await this.resumePausedMutations(),ue(this,on).onFocus())})),Qe(this,nc,e0.subscribe(async t=>{t&&(await this.resumePausedMutations(),ue(this,on).onOnline())})))}unmount(){var t,e;Jh(this,Co)._--,ue(this,Co)===0&&((t=ue(this,tc))==null||t.call(this),Qe(this,tc,void 0),(e=ue(this,nc))==null||e.call(this),Qe(this,nc,void 0))}isFetching(t){return ue(this,on).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ue(this,_o).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ue(this,on).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=ue(this,on).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(bv(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return ue(this,on).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=ue(this,on).get(r.queryHash),o=i==null?void 0:i.state.data,c=MM(e,o);if(c!==void 0)return ue(this,on).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return mr.batch(()=>ue(this,on).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ue(this,on).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ue(this,on);mr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ue(this,on),r={type:"active",...t};return mr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=mr.batch(()=>ue(this,on).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Si).catch(Si)}invalidateQueries(t={},e={}){return mr.batch(()=>{if(ue(this,on).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=mr.batch(()=>ue(this,on).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Si)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Si)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ue(this,on).build(this,e);return n.isStaleByTime(bv(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Si).catch(Si)}fetchInfiniteQuery(t){return t.behavior=Dv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Si).catch(Si)}ensureInfiniteQueryData(t){return t.behavior=Dv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return e0.isOnline()?ue(this,_o).resumePausedMutations():Promise.resolve()}getQueryCache(){return ue(this,on)}getMutationCache(){return ue(this,_o)}getDefaultOptions(){return ue(this,Ao)}setDefaultOptions(t){Qe(this,Ao,t)}setQueryDefaults(t,e){ue(this,Jl).set(sh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ue(this,Jl).values()];let n={};return e.forEach(r=>{oh(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){ue(this,ec).set(sh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ue(this,ec).values()];let n={};return e.forEach(r=>{oh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ue(this,Ao).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=aw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===lw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ue(this,Ao).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ue(this,on).clear(),ue(this,_o).clear()}},on=new WeakMap,_o=new WeakMap,Ao=new WeakMap,Jl=new WeakMap,ec=new WeakMap,Co=new WeakMap,tc=new WeakMap,nc=new WeakMap,cE),r7=W.createContext(void 0),i7=({client:t,children:e})=>(W.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),z.jsx(r7.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ah.apply(this,arguments)}var bo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bo||(bo={}));const Mv="popstate";function s7(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:d}=r.location;return qp("",{pathname:o,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:t0(i)}return a7(e,n,null,t)}function En(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o7(){return Math.random().toString(36).substr(2,8)}function Lv(t,e){return{usr:t.state,key:t.key,idx:e}}function qp(t,e,n,r){return n===void 0&&(n=null),ah({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mc(e):e,{state:n,key:e&&e.key||r||o7()})}function t0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function a7(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d=bo.Pop,g=null,p=x();p==null&&(p=0,c.replaceState(ah({},c.state,{idx:p}),""));function x(){return(c.state||{idx:null}).idx}function E(){d=bo.Pop;let F=x(),R=F==null?null:F-p;p=F,g&&g({action:d,location:b.location,delta:R})}function _(F,R){d=bo.Push;let S=qp(b.location,F,R);p=x()+1;let O=Lv(S,p),U=b.createHref(S);try{c.pushState(O,"",U)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(U)}o&&g&&g({action:d,location:b.location,delta:1})}function I(F,R){d=bo.Replace;let S=qp(b.location,F,R);p=x();let O=Lv(S,p),U=b.createHref(S);c.replaceState(O,"",U),o&&g&&g({action:d,location:b.location,delta:0})}function D(F){let R=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof F=="string"?F:t0(F);return S=S.replace(/ $/,"%20"),En(R,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,R)}let b={get action(){return d},get location(){return t(i,c)},listen(F){if(g)throw new Error("A history only accepts one active listener");return i.addEventListener(Mv,E),g=F,()=>{i.removeEventListener(Mv,E),g=null}},createHref(F){return e(i,F)},createURL:D,encodeLocation(F){let R=D(F);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:I,go(F){return c.go(F)}};return b}var Fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fv||(Fv={}));function l7(t,e,n){return n===void 0&&(n="/"),c7(t,e,n,!1)}function c7(t,e,n,r){let i=typeof e=="string"?Mc(e):e,o=cw(i.pathname||"/",n);if(o==null)return null;let c=IS(t);u7(c);let d=null;for(let g=0;d==null&&g<c.length;++g){let p=E7(o);d=x7(c[g],p,r)}return d}function IS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,d)=>{let g={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};g.relativePath.startsWith("/")&&(En(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let p=Wo([r,g.relativePath]),x=n.concat(g);o.children&&o.children.length>0&&(En(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),IS(o.children,e,x,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:y7(p,o.index),routesMeta:x})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,c);else for(let g of TS(o.path))i(o,c,g)}),e}function TS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=TS(r.join("/")),d=[];return d.push(...c.map(g=>g===""?o:[o,g].join("/"))),i&&d.push(...c),d.map(g=>t.startsWith("/")&&g===""?"/":g)}function u7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:w7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h7=/^:[\w-]+$/,d7=3,f7=2,g7=1,p7=10,m7=-2,Bv=t=>t==="*";function y7(t,e){let n=t.split("/"),r=n.length;return n.some(Bv)&&(r+=m7),e&&(r+=f7),n.filter(i=>!Bv(i)).reduce((i,o)=>i+(h7.test(o)?d7:o===""?g7:p7),r)}function w7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function x7(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let d=0;d<r.length;++d){let g=r[d],p=d===r.length-1,x=o==="/"?e:e.slice(o.length)||"/",E=Vv({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},x),_=g.route;if(!E&&p&&n&&!r[r.length-1].route.index&&(E=Vv({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:Wo([o,E.pathname]),pathnameBase:I7(Wo([o,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(o=Wo([o,E.pathnameBase]))}return c}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v7(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((p,x,E)=>{let{paramName:_,isOptional:I}=x;if(_==="*"){let b=d[E]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const D=d[E];return I&&!D?p[_]=void 0:p[_]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:t}}function v7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),CS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,g)=>(r.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return CS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Mc(t):t;return{pathname:n?n.startsWith("/")?n:A7(n,e):e,search:T7(r),hash:S7(i)}}function A7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function lg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SS(t,e){let n=C7(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Mc(t):(i=ah({},t),En(!i.pathname||!i.pathname.includes("?"),lg("?","pathname","search",i)),En(!i.pathname||!i.pathname.includes("#"),lg("#","pathname","hash",i)),En(!i.search||!i.search.includes("#"),lg("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=n;else{let E=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),E-=1;i.pathname=_.join("/")}d=E>=0?e[E]:"/"}let g=_7(i,d),p=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||x)&&(g.pathname+="/"),g}const Wo=t=>t.join("/").replace(/\/\/+/g,"/"),I7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function b7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RS=["post","put","patch","delete"];new Set(RS);const R7=["get",...RS];new Set(R7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lh.apply(this,arguments)}const uw=W.createContext(null),N7=W.createContext(null),ol=W.createContext(null),i1=W.createContext(null),al=W.createContext({outlet:null,matches:[],isDataRoute:!1}),NS=W.createContext(null);function P7(t,e){let{relative:n}=e===void 0?{}:e;Lh()||En(!1);let{basename:r,navigator:i}=W.useContext(ol),{hash:o,pathname:c,search:d}=OS(t,{relative:n}),g=c;return r!=="/"&&(g=c==="/"?r:Wo([r,c])),i.createHref({pathname:g,search:d,hash:o})}function Lh(){return W.useContext(i1)!=null}function Fh(){return Lh()||En(!1),W.useContext(i1).location}function PS(t){W.useContext(ol).static||W.useLayoutEffect(t)}function Bh(){let{isDataRoute:t}=W.useContext(al);return t?W7():O7()}function O7(){Lh()||En(!1);let t=W.useContext(uw),{basename:e,future:n,navigator:r}=W.useContext(ol),{matches:i}=W.useContext(al),{pathname:o}=Fh(),c=JSON.stringify(SS(i,n.v7_relativeSplatPath)),d=W.useRef(!1);return PS(()=>{d.current=!0}),W.useCallback(function(p,x){if(x===void 0&&(x={}),!d.current)return;if(typeof p=="number"){r.go(p);return}let E=bS(p,JSON.parse(c),o,x.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Wo([e,E.pathname])),(x.replace?r.replace:r.push)(E,x.state,x)},[e,r,c,o,t])}function OS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=W.useContext(ol),{matches:i}=W.useContext(al),{pathname:o}=Fh(),c=JSON.stringify(SS(i,r.v7_relativeSplatPath));return W.useMemo(()=>bS(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function D7(t,e){return k7(t,e)}function k7(t,e,n,r){Lh()||En(!1);let{navigator:i}=W.useContext(ol),{matches:o}=W.useContext(al),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let g=c?c.pathnameBase:"/";c&&c.route;let p=Fh(),x;if(e){var E;let F=typeof e=="string"?Mc(e):e;g==="/"||(E=F.pathname)!=null&&E.startsWith(g)||En(!1),x=F}else x=p;let _=x.pathname||"/",I=_;if(g!=="/"){let F=g.replace(/^\//,"").split("/");I="/"+_.replace(/^\//,"").split("/").slice(F.length).join("/")}let D=l7(t,{pathname:I}),b=V7(D&&D.map(F=>Object.assign({},F,{params:Object.assign({},d,F.params),pathname:Wo([g,i.encodeLocation?i.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Wo([g,i.encodeLocation?i.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),o,n,r);return e&&b?W.createElement(i1.Provider,{value:{location:lh({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:bo.Pop}},b):b}function M7(){let t=H7(),e=b7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,null)}const L7=W.createElement(M7,null);class F7 extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(al.Provider,{value:this.props.routeContext},W.createElement(NS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B7(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(uw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(al.Provider,{value:e},r)}function V7(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=(i=n)==null?void 0:i.errors;if(d!=null){let x=c.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);x>=0||En(!1),c=c.slice(0,Math.min(c.length,x+1))}let g=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<c.length;x++){let E=c[x];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=x),E.route.id){let{loaderData:_,errors:I}=n,D=E.route.loader&&_[E.route.id]===void 0&&(!I||I[E.route.id]===void 0);if(E.route.lazy||D){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((x,E,_)=>{let I,D=!1,b=null,F=null;n&&(I=d&&E.route.id?d[E.route.id]:void 0,b=E.route.errorElement||L7,g&&(p<0&&_===0?(D=!0,F=null):p===_&&(D=!0,F=E.route.hydrateFallbackElement||null)));let R=e.concat(c.slice(0,_+1)),S=()=>{let O;return I?O=b:D?O=F:E.route.Component?O=W.createElement(E.route.Component,null):E.route.element?O=E.route.element:O=x,W.createElement(B7,{match:E,routeContext:{outlet:x,matches:R,isDataRoute:n!=null},children:O})};return n&&(E.route.ErrorBoundary||E.route.errorElement||_===0)?W.createElement(F7,{location:n.location,revalidation:n.revalidation,component:b,error:I,children:S(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):S()},null)}var DS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DS||{}),n0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(n0||{});function U7(t){let e=W.useContext(uw);return e||En(!1),e}function j7(t){let e=W.useContext(N7);return e||En(!1),e}function z7(t){let e=W.useContext(al);return e||En(!1),e}function kS(t){let e=z7(),n=e.matches[e.matches.length-1];return n.route.id||En(!1),n.route.id}function H7(){var t;let e=W.useContext(NS),n=j7(n0.UseRouteError),r=kS(n0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function W7(){let{router:t}=U7(DS.UseNavigateStable),e=kS(n0.UseNavigateStable),n=W.useRef(!1);return PS(()=>{n.current=!0}),W.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lh({fromRouteId:e},o)))},[t,e])}function lo(t){En(!1)}function G7(t){let{basename:e="/",children:n=null,location:r,navigationType:i=bo.Pop,navigator:o,static:c=!1,future:d}=t;Lh()&&En(!1);let g=e.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:g,navigator:o,static:c,future:lh({v7_relativeSplatPath:!1},d)}),[g,d,o,c]);typeof r=="string"&&(r=Mc(r));let{pathname:x="/",search:E="",hash:_="",state:I=null,key:D="default"}=r,b=W.useMemo(()=>{let F=cw(x,g);return F==null?null:{location:{pathname:F,search:E,hash:_,state:I,key:D},navigationType:i}},[g,x,E,_,I,D,i]);return b==null?null:W.createElement(ol.Provider,{value:p},W.createElement(i1.Provider,{children:n,value:b}))}function q7(t){let{children:e,location:n}=t;return D7($p(e),n)}new Promise(()=>{});function $p(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let o=[...e,i];if(r.type===W.Fragment){n.push.apply(n,$p(r.props.children,o));return}r.type!==lo&&En(!1),!r.props.index||!r.props.children||En(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=$p(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xp(){return Xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xp.apply(this,arguments)}function $7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function X7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function K7(t,e){return t.button===0&&(!e||e==="_self")&&!X7(t)}const Y7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Q7="6";try{window.__reactRouterVersion=Q7}catch{}const Z7="startTransition",Uv=A3[Z7];function J7(t){let{basename:e,children:n,future:r,window:i}=t,o=W.useRef();o.current==null&&(o.current=s7({window:i,v5Compat:!0}));let c=o.current,[d,g]=W.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},x=W.useCallback(E=>{p&&Uv?Uv(()=>g(E)):g(E)},[g,p]);return W.useLayoutEffect(()=>c.listen(x),[c,x]),W.createElement(G7,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:c,future:r})}const eL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hs=W.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:d,target:g,to:p,preventScrollReset:x,viewTransition:E}=e,_=$7(e,Y7),{basename:I}=W.useContext(ol),D,b=!1;if(typeof p=="string"&&tL.test(p)&&(D=p,eL))try{let O=new URL(window.location.href),U=p.startsWith("//")?new URL(O.protocol+p):new URL(p),Y=cw(U.pathname,I);U.origin===O.origin&&Y!=null?p=Y+U.search+U.hash:b=!0}catch{}let F=P7(p,{relative:i}),R=nL(p,{replace:c,state:d,target:g,preventScrollReset:x,relative:i,viewTransition:E});function S(O){r&&r(O),O.defaultPrevented||R(O)}return W.createElement("a",Xp({},_,{href:D||F,onClick:b||o?r:S,ref:n,target:g}))});var jv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jv||(jv={}));var zv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zv||(zv={}));function nL(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:d}=e===void 0?{}:e,g=Bh(),p=Fh(),x=OS(t,{relative:c});return W.useCallback(E=>{if(K7(E,n)){E.preventDefault();let _=r!==void 0?r:t0(p)===t0(x);g(t,{replace:_,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[p,g,x,r,i,n,t,o,c,d])}const MS=W.createContext(null),rL=({children:t})=>{const[e,n]=W.useState(null);W.useEffect(()=>{let g=null;const p=fD(Id,x=>{if(x){const E=xl(xo,"users",x.uid);g=o5(E,_=>{if(_.exists()){const I=_.data();console.log("User data updated in real-time:",{name:I.name,purchases:I.purchases,isRewardReady:I.isRewardReady}),n(I)}else console.log("User document does not exist"),n(null)},_=>{console.error("Error listening to user data:",_),n(null)})}else n(null),g&&(g(),g=null)});return()=>{p(),g&&g()}},[]);const r=async(g,p)=>{const x=await uD(Id,g,p),E=await i5(xl(xo,"users",x.user.uid));return E.exists()?E.data():null},i=async(g,p,x,E)=>{console.log("registering user",g,p,x,E);const _=await cD(Id,p,x),I={id:_.user.uid,name:g,email:p,feedback:E,purchases:0,isRewardReady:!1,createdAt:Tt.now(),rewards:[]};return await s5(xl(xo,"users",_.user.uid),I),I},o=async()=>{if(!e)return;const g=xl(xo,"users",e.id),x=e.purchases+1>=5;await Qx(g,{purchases:h5(1),isRewardReady:x,lastScanAt:Tt.now()})},c=async()=>{if(!e)return;const g=xl(xo,"users",e.id),p={rewardId:`reward_${Date.now()}`,claimedAt:Tt.now()};await Qx(g,{purchases:0,isRewardReady:!1,rewards:[...e.rewards||[],p]})},d=async()=>{await gD(Id),n(null)};return z.jsx(MS.Provider,{value:{user:e,login:r,register:i,addPurchase:o,useReward:c,logout:d},children:t})},s1=()=>{const t=W.useContext(MS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},iL=ty("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),us=W.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const c=r?qu:"button";return z.jsx(c,{className:Ui(iL({variant:e,size:n,className:t})),ref:o,...i})});us.displayName="Button";const sL=()=>z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[z.jsxs("div",{className:"absolute inset-0 opacity-20",children:[z.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),z.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),z.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),z.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[z.jsxs("div",{className:"mb-8",children:[z.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-4 tracking-tight",children:["VAPE ",z.jsx("span",{className:"text-red-500",children:"MASTER"})]}),z.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-red-500 to-red-700 mx-auto rounded-full"})]}),z.jsxs("div",{className:"mb-12 max-w-md",children:[z.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-white mb-4",children:"Loyalty Program"}),z.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),z.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[z.jsx(Hs,{to:"/register",className:"block",children:z.jsx(us,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),z.jsx(Hs,{to:"/login",className:"block",children:z.jsx(us,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),z.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:z.jsx("p",{className:"text-sm",children:"Smoke responsibly • 21+ only"})})]})]}),$l=W.forwardRef(({className:t,type:e,...n},r)=>z.jsx("input",{type:e,className:Ui("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));$l.displayName="Input";var oL="Label",LS=W.forwardRef((t,e)=>z.jsx(Ar.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LS.displayName=oL;var FS=LS;const aL=ty("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ka=W.forwardRef(({className:t,...e},n)=>z.jsx(FS,{ref:n,className:Ui(aL(),t),...e}));ka.displayName=FS.displayName;const BS=W.forwardRef(({className:t,...e},n)=>z.jsx("textarea",{className:Ui("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));BS.displayName="Textarea";const lL=()=>{const[t,e]=W.useState(""),[n,r]=W.useState(""),[i,o]=W.useState(""),[c,d]=W.useState(""),[g,p]=W.useState(!1),{register:x}=s1(),E=Bh(),_=async I=>{if(I.preventDefault(),!t.trim()||!n.trim()||!c.trim()){yr({title:"Missing Information",description:"Please fill in your name, email, and password.",variant:"destructive"});return}p(!0);try{await x(t.trim(),n.trim(),c.trim(),i.trim()||null),yr({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),E("/dashboard")}catch(D){let b="Please try again.";D&&typeof D=="object"&&"message"in D&&typeof D.message=="string"&&(b=D.message),yr({title:"Registration Failed",description:b,variant:"destructive"})}finally{p(!1)}};return z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[z.jsxs("div",{className:"absolute inset-0 opacity-10",children:[z.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),z.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),z.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[z.jsxs("div",{className:"p-6 flex items-center",children:[z.jsx(Hs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:z.jsx(b0,{className:"w-6 h-6"})}),z.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Join Vape Master"})]}),z.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:z.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[z.jsxs("div",{className:"text-center mb-8",children:[z.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),z.jsx("p",{className:"text-gray-400",children:"Get your loyalty card in seconds"})]}),z.jsxs("form",{onSubmit:_,className:"space-y-6",children:[z.jsxs("div",{className:"space-y-2",children:[z.jsx(ka,{htmlFor:"name",className:"text-white font-medium",children:"Full Name"}),z.jsx($l,{id:"name",type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"Enter your full name",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500",required:!0})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsx(ka,{htmlFor:"email",className:"text-white font-medium",children:"Email Address"}),z.jsx($l,{id:"email",type:"email",value:n,onChange:I=>r(I.target.value),placeholder:"Enter your email",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500",required:!0})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsx(ka,{htmlFor:"password",className:"text-white font-medium",children:"Password"}),z.jsx($l,{id:"password",type:"password",value:c,onChange:I=>d(I.target.value),placeholder:"Create a password",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500",required:!0})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsxs(ka,{htmlFor:"feedback",className:"text-white font-medium",children:["Feedback"," ",z.jsx("span",{className:"text-gray-500 text-sm",children:"(Optional)"})]}),z.jsx(BS,{id:"feedback",value:i,onChange:I=>o(I.target.value),placeholder:"Tell us how we can improve...",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500 min-h-[100px] resize-none"})]}),z.jsx(us,{type:"submit",disabled:g,className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:g?"Creating Account...":"Get My Loyalty Card"})]}),z.jsx("div",{className:"mt-6 text-center",children:z.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",z.jsx(Hs,{to:"/login",className:"text-red-400 hover:text-red-300 font-medium",children:"Sign in here"})]})})]})})]})]})},cL=()=>{const[t,e]=W.useState(""),[n,r]=W.useState(""),[i,o]=W.useState(!1),{login:c}=s1(),d=Bh(),g=async p=>{if(p.preventDefault(),!t.trim()||!n.trim()){yr({title:"Missing Information",description:"Please enter your email and password.",variant:"destructive"});return}o(!0);try{const x=await c(t.trim(),n.trim());x?(yr({title:"Welcome back!",description:`Good to see you again, ${x.name}!`}),d("/dashboard")):yr({title:"User Not Found",description:"No account found with this email. Please register first.",variant:"destructive"})}catch(x){let E="Please try again.";x&&typeof x=="object"&&"message"in x&&typeof x.message=="string"&&(E=x.message),yr({title:"Login Failed",description:E,variant:"destructive"})}finally{o(!1)}};return z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[z.jsxs("div",{className:"absolute inset-0 opacity-10",children:[z.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),z.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),z.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[z.jsxs("div",{className:"p-6 flex items-center",children:[z.jsx(Hs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:z.jsx(b0,{className:"w-6 h-6"})}),z.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Member Login"})]}),z.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:z.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[z.jsxs("div",{className:"text-center mb-8",children:[z.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),z.jsx("p",{className:"text-gray-400",children:"Access your loyalty dashboard"})]}),z.jsxs("form",{onSubmit:g,className:"space-y-6",children:[z.jsxs("div",{className:"space-y-2",children:[z.jsx(ka,{htmlFor:"email",className:"text-white font-medium",children:"Email Address"}),z.jsx($l,{id:"email",type:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Enter your email",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500",required:!0})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsx(ka,{htmlFor:"password",className:"text-white font-medium",children:"Password"}),z.jsx($l,{id:"password",type:"password",value:n,onChange:p=>r(p.target.value),placeholder:"Enter your password",className:"bg-black/50 border-red-900/50 text-white placeholder:text-gray-500 focus:border-red-500 focus:ring-red-500",required:!0})]}),z.jsx(us,{type:"submit",disabled:i,className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?"Signing In...":"Access Dashboard"})]}),z.jsx("div",{className:"mt-6 text-center",children:z.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",z.jsx(Hs,{to:"/register",className:"text-red-400 hover:text-red-300 font-medium",children:"Join now"})]})})]})})]})]})};var Vh={},uL=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},VS={},si={};let hw;const hL=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];si.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};si.getSymbolTotalCodewords=function(e){return hL[e]};si.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};si.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');hw=e};si.isKanjiModeEnabled=function(){return typeof hw<"u"};si.toSJIS=function(e){return hw(e)};var o1={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(o1);function US(){this.buffer=[],this.length=0}US.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var dL=US;function Uh(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Uh.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};Uh.prototype.get=function(t,e){return this.data[t*this.size+e]};Uh.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Uh.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var fL=Uh,jS={};(function(t){const e=si.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=e(r),c=o===145?26:Math.ceil((o-13)/(2*i-2))*2,d=[o-7];for(let g=1;g<i-1;g++)d[g]=d[g-1]-c;return d.push(6),d.reverse()},t.getPositions=function(r){const i=[],o=t.getRowColCoords(r),c=o.length;for(let d=0;d<c;d++)for(let g=0;g<c;g++)d===0&&g===0||d===0&&g===c-1||d===c-1&&g===0||i.push([o[d],o[g]]);return i}})(jS);var zS={};const gL=si.getSymbolSize,Hv=7;zS.getPositions=function(e){const n=gL(e);return[[0,0],[n-Hv,0],[0,n-Hv]]};var HS={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const o=i.size;let c=0,d=0,g=0,p=null,x=null;for(let E=0;E<o;E++){d=g=0,p=x=null;for(let _=0;_<o;_++){let I=i.get(E,_);I===p?d++:(d>=5&&(c+=e.N1+(d-5)),p=I,d=1),I=i.get(_,E),I===x?g++:(g>=5&&(c+=e.N1+(g-5)),x=I,g=1)}d>=5&&(c+=e.N1+(d-5)),g>=5&&(c+=e.N1+(g-5))}return c},t.getPenaltyN2=function(i){const o=i.size;let c=0;for(let d=0;d<o-1;d++)for(let g=0;g<o-1;g++){const p=i.get(d,g)+i.get(d,g+1)+i.get(d+1,g)+i.get(d+1,g+1);(p===4||p===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){const o=i.size;let c=0,d=0,g=0;for(let p=0;p<o;p++){d=g=0;for(let x=0;x<o;x++)d=d<<1&2047|i.get(p,x),x>=10&&(d===1488||d===93)&&c++,g=g<<1&2047|i.get(x,p),x>=10&&(g===1488||g===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){let o=0;const c=i.data.length;for(let g=0;g<c;g++)o+=i.data[g];return Math.abs(Math.ceil(o*100/c/5)-10)*e.N4};function n(r,i,o){switch(r){case t.Patterns.PATTERN000:return(i+o)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(i+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return i*o%2+i*o%3===0;case t.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case t.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,o){const c=o.size;for(let d=0;d<c;d++)for(let g=0;g<c;g++)o.isReserved(g,d)||o.xor(g,d,n(i,g,d))},t.getBestMask=function(i,o){const c=Object.keys(t.Patterns).length;let d=0,g=1/0;for(let p=0;p<c;p++){o(p),t.applyMask(p,i);const x=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(p,i),x<g&&(g=x,d=p)}return d}})(HS);var a1={};const Ro=o1,Rd=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Nd=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];a1.getBlocksCount=function(e,n){switch(n){case Ro.L:return Rd[(e-1)*4+0];case Ro.M:return Rd[(e-1)*4+1];case Ro.Q:return Rd[(e-1)*4+2];case Ro.H:return Rd[(e-1)*4+3];default:return}};a1.getTotalCodewordsCount=function(e,n){switch(n){case Ro.L:return Nd[(e-1)*4+0];case Ro.M:return Nd[(e-1)*4+1];case Ro.Q:return Nd[(e-1)*4+2];case Ro.H:return Nd[(e-1)*4+3];default:return}};var WS={},l1={};const Su=new Uint8Array(512),r0=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Su[n]=e,r0[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Su[n]=Su[n-255]})();l1.log=function(e){if(e<1)throw new Error("log("+e+")");return r0[e]};l1.exp=function(e){return Su[e]};l1.mul=function(e,n){return e===0||n===0?0:Su[r0[e]+r0[n]]};(function(t){const e=l1;t.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let c=0;c<r.length;c++)for(let d=0;d<i.length;d++)o[c+d]^=e.mul(r[c],i[d]);return o},t.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const c=o[0];for(let g=0;g<i.length;g++)o[g]^=e.mul(i[g],c);let d=0;for(;d<o.length&&o[d]===0;)d++;o=o.slice(d)}return o},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=t.mul(i,new Uint8Array([1,e.exp(o)]));return i}})(WS);const GS=WS;function dw(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}dw.prototype.initialize=function(e){this.degree=e,this.genPoly=GS.generateECPolynomial(this.degree)};dw.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=GS.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(r,i),o}return r};var pL=dw,qS={},da={},fw={};fw.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ps={};const $S="[0-9]+",mL="[A-Z $%*+\\-./:]+";let ch="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ch=ch.replace(/u/g,"\\u");const yL="(?:(?![A-Z0-9 $%*+\\-./:]|"+ch+`)(?:.|[\r
]))+`;ps.KANJI=new RegExp(ch,"g");ps.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ps.BYTE=new RegExp(yL,"g");ps.NUMERIC=new RegExp($S,"g");ps.ALPHANUMERIC=new RegExp(mL,"g");const wL=new RegExp("^"+ch+"$"),xL=new RegExp("^"+$S+"$"),vL=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ps.testKanji=function(e){return wL.test(e)};ps.testNumeric=function(e){return xL.test(e)};ps.testAlphanumeric=function(e){return vL.test(e)};(function(t){const e=fw,n=ps;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,c){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?o.ccBits[0]:c<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return n.testNumeric(o)?t.NUMERIC:n.testAlphanumeric(o)?t.ALPHANUMERIC:n.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(o,c){if(t.isValid(o))return o;try{return r(o)}catch{return c}}})(da);(function(t){const e=si,n=a1,r=o1,i=da,o=fw,c=7973,d=e.getBCHDigit(c);function g(_,I,D){for(let b=1;b<=40;b++)if(I<=t.getCapacity(b,D,_))return b}function p(_,I){return i.getCharCountIndicator(_,I)+4}function x(_,I){let D=0;return _.forEach(function(b){const F=p(b.mode,I);D+=F+b.getBitsLength()}),D}function E(_,I){for(let D=1;D<=40;D++)if(x(_,D)<=t.getCapacity(D,I,i.MIXED))return D}t.from=function(I,D){return o.isValid(I)?parseInt(I,10):D},t.getCapacity=function(I,D,b){if(!o.isValid(I))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=i.BYTE);const F=e.getSymbolTotalCodewords(I),R=n.getTotalCodewordsCount(I,D),S=(F-R)*8;if(b===i.MIXED)return S;const O=S-p(b,I);switch(b){case i.NUMERIC:return Math.floor(O/10*3);case i.ALPHANUMERIC:return Math.floor(O/11*2);case i.KANJI:return Math.floor(O/13);case i.BYTE:default:return Math.floor(O/8)}},t.getBestVersionForData=function(I,D){let b;const F=r.from(D,r.M);if(Array.isArray(I)){if(I.length>1)return E(I,F);if(I.length===0)return 1;b=I[0]}else b=I;return g(b.mode,b.getLength(),F)},t.getEncodedBits=function(I){if(!o.isValid(I)||I<7)throw new Error("Invalid QR Code version");let D=I<<12;for(;e.getBCHDigit(D)-d>=0;)D^=c<<e.getBCHDigit(D)-d;return I<<12|D}})(qS);var XS={};const Kp=si,KS=1335,EL=21522,Wv=Kp.getBCHDigit(KS);XS.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;Kp.getBCHDigit(i)-Wv>=0;)i^=KS<<Kp.getBCHDigit(i)-Wv;return(r<<10|i)^EL};var YS={};const _L=da;function wc(t){this.mode=_L.NUMERIC,this.data=t.toString()}wc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};wc.prototype.getLength=function(){return this.data.length};wc.prototype.getBitsLength=function(){return wc.getBitsLength(this.data.length)};wc.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const o=this.data.length-n;o>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,o*3+1))};var AL=wc;const CL=da,cg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xc(t){this.mode=CL.ALPHANUMERIC,this.data=t}xc.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};xc.prototype.getLength=function(){return this.data.length};xc.prototype.getBitsLength=function(){return xc.getBitsLength(this.data.length)};xc.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=cg.indexOf(this.data[n])*45;r+=cg.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(cg.indexOf(this.data[n]),6)};var IL=xc;const TL=da;function vc(t){this.mode=TL.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}vc.getBitsLength=function(e){return e*8};vc.prototype.getLength=function(){return this.data.length};vc.prototype.getBitsLength=function(){return vc.getBitsLength(this.data.length)};vc.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var SL=vc;const bL=da,RL=si;function Ec(t){this.mode=bL.KANJI,this.data=t}Ec.getBitsLength=function(e){return e*13};Ec.prototype.getLength=function(){return this.data.length};Ec.prototype.getBitsLength=function(){return Ec.getBitsLength(this.data.length)};Ec.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=RL.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var NL=Ec,QS={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var o={},c={};c[r]=0;var d=e.PriorityQueue.make();d.push(r,0);for(var g,p,x,E,_,I,D,b,F;!d.empty();){g=d.pop(),p=g.value,E=g.cost,_=n[p]||{};for(x in _)_.hasOwnProperty(x)&&(I=_[x],D=E+I,b=c[x],F=typeof c[x]>"u",(F||b>D)&&(c[x]=D,d.push(x,D),o[x]=p))}if(typeof i<"u"&&typeof c[i]>"u"){var R=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(R)}return o},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],o=r;o;)i.push(o),n[o],o=n[o];return i.reverse(),i},find_path:function(n,r,i){var o=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},o;n=n||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(QS);var PL=QS.exports;(function(t){const e=da,n=AL,r=IL,i=SL,o=NL,c=ps,d=si,g=PL;function p(R){return unescape(encodeURIComponent(R)).length}function x(R,S,O){const U=[];let Y;for(;(Y=R.exec(O))!==null;)U.push({data:Y[0],index:Y.index,mode:S,length:Y[0].length});return U}function E(R){const S=x(c.NUMERIC,e.NUMERIC,R),O=x(c.ALPHANUMERIC,e.ALPHANUMERIC,R);let U,Y;return d.isKanjiModeEnabled()?(U=x(c.BYTE,e.BYTE,R),Y=x(c.KANJI,e.KANJI,R)):(U=x(c.BYTE_KANJI,e.BYTE,R),Y=[]),S.concat(O,U,Y).sort(function(k,M){return k.index-M.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function _(R,S){switch(S){case e.NUMERIC:return n.getBitsLength(R);case e.ALPHANUMERIC:return r.getBitsLength(R);case e.KANJI:return o.getBitsLength(R);case e.BYTE:return i.getBitsLength(R)}}function I(R){return R.reduce(function(S,O){const U=S.length-1>=0?S[S.length-1]:null;return U&&U.mode===O.mode?(S[S.length-1].data+=O.data,S):(S.push(O),S)},[])}function D(R){const S=[];for(let O=0;O<R.length;O++){const U=R[O];switch(U.mode){case e.NUMERIC:S.push([U,{data:U.data,mode:e.ALPHANUMERIC,length:U.length},{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.ALPHANUMERIC:S.push([U,{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.KANJI:S.push([U,{data:U.data,mode:e.BYTE,length:p(U.data)}]);break;case e.BYTE:S.push([{data:U.data,mode:e.BYTE,length:p(U.data)}])}}return S}function b(R,S){const O={},U={start:{}};let Y=["start"];for(let Z=0;Z<R.length;Z++){const k=R[Z],M=[];for(let L=0;L<k.length;L++){const G=k[L],X=""+Z+L;M.push(X),O[X]={node:G,lastCount:0},U[X]={};for(let $=0;$<Y.length;$++){const j=Y[$];O[j]&&O[j].node.mode===G.mode?(U[j][X]=_(O[j].lastCount+G.length,G.mode)-_(O[j].lastCount,G.mode),O[j].lastCount+=G.length):(O[j]&&(O[j].lastCount=G.length),U[j][X]=_(G.length,G.mode)+4+e.getCharCountIndicator(G.mode,S))}}Y=M}for(let Z=0;Z<Y.length;Z++)U[Y[Z]].end=0;return{map:U,table:O}}function F(R,S){let O;const U=e.getBestModeForData(R);if(O=e.from(S,U),O!==e.BYTE&&O.bit<U.bit)throw new Error('"'+R+'" cannot be encoded with mode '+e.toString(O)+`.
 Suggested mode is: `+e.toString(U));switch(O===e.KANJI&&!d.isKanjiModeEnabled()&&(O=e.BYTE),O){case e.NUMERIC:return new n(R);case e.ALPHANUMERIC:return new r(R);case e.KANJI:return new o(R);case e.BYTE:return new i(R)}}t.fromArray=function(S){return S.reduce(function(O,U){return typeof U=="string"?O.push(F(U,null)):U.data&&O.push(F(U.data,U.mode)),O},[])},t.fromString=function(S,O){const U=E(S,d.isKanjiModeEnabled()),Y=D(U),Z=b(Y,O),k=g.find_path(Z.map,"start","end"),M=[];for(let L=1;L<k.length-1;L++)M.push(Z.table[k[L]].node);return t.fromArray(I(M))},t.rawSplit=function(S){return t.fromArray(E(S,d.isKanjiModeEnabled()))}})(YS);const c1=si,ug=o1,OL=dL,DL=fL,kL=jS,ML=zS,Yp=HS,Qp=a1,LL=pL,i0=qS,FL=XS,BL=da,hg=YS;function VL(t,e){const n=t.size,r=ML.getPositions(e);for(let i=0;i<r.length;i++){const o=r[i][0],c=r[i][1];for(let d=-1;d<=7;d++)if(!(o+d<=-1||n<=o+d))for(let g=-1;g<=7;g++)c+g<=-1||n<=c+g||(d>=0&&d<=6&&(g===0||g===6)||g>=0&&g<=6&&(d===0||d===6)||d>=2&&d<=4&&g>=2&&g<=4?t.set(o+d,c+g,!0,!0):t.set(o+d,c+g,!1,!0))}}function UL(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function jL(t,e){const n=kL.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],o=n[r][1];for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)c===-2||c===2||d===-2||d===2||c===0&&d===0?t.set(i+c,o+d,!0,!0):t.set(i+c,o+d,!1,!0)}}function zL(t,e){const n=t.size,r=i0.getEncodedBits(e);let i,o,c;for(let d=0;d<18;d++)i=Math.floor(d/3),o=d%3+n-8-3,c=(r>>d&1)===1,t.set(i,o,c,!0),t.set(o,i,c,!0)}function dg(t,e,n){const r=t.size,i=FL.getEncodedBits(e,n);let o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?t.set(o,8,c,!0):o<8?t.set(o+1,8,c,!0):t.set(r-15+o,8,c,!0),o<8?t.set(8,r-o-1,c,!0):o<9?t.set(8,15-o-1+1,c,!0):t.set(8,15-o-1,c,!0);t.set(r-8,8,1,!0)}function HL(t,e){const n=t.size;let r=-1,i=n-1,o=7,c=0;for(let d=n-1;d>0;d-=2)for(d===6&&d--;;){for(let g=0;g<2;g++)if(!t.isReserved(i,d-g)){let p=!1;c<e.length&&(p=(e[c]>>>o&1)===1),t.set(i,d-g,p),o--,o===-1&&(c++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function WL(t,e,n){const r=new OL;n.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),BL.getCharCountIndicator(g.mode,t)),g.write(r)});const i=c1.getSymbolTotalCodewords(t),o=Qp.getTotalCodewordsCount(t,e),c=(i-o)*8;for(r.getLengthInBits()+4<=c&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const d=(c-r.getLengthInBits())/8;for(let g=0;g<d;g++)r.put(g%2?17:236,8);return GL(r,t,e)}function GL(t,e,n){const r=c1.getSymbolTotalCodewords(e),i=Qp.getTotalCodewordsCount(e,n),o=r-i,c=Qp.getBlocksCount(e,n),d=r%c,g=c-d,p=Math.floor(r/c),x=Math.floor(o/c),E=x+1,_=p-x,I=new LL(_);let D=0;const b=new Array(c),F=new Array(c);let R=0;const S=new Uint8Array(t.buffer);for(let k=0;k<c;k++){const M=k<g?x:E;b[k]=S.slice(D,D+M),F[k]=I.encode(b[k]),D+=M,R=Math.max(R,M)}const O=new Uint8Array(r);let U=0,Y,Z;for(Y=0;Y<R;Y++)for(Z=0;Z<c;Z++)Y<b[Z].length&&(O[U++]=b[Z][Y]);for(Y=0;Y<_;Y++)for(Z=0;Z<c;Z++)O[U++]=F[Z][Y];return O}function qL(t,e,n,r){let i;if(Array.isArray(t))i=hg.fromArray(t);else if(typeof t=="string"){let p=e;if(!p){const x=hg.rawSplit(t);p=i0.getBestVersionForData(x,n)}i=hg.fromString(t,p||40)}else throw new Error("Invalid data");const o=i0.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const c=WL(e,n,i),d=c1.getSymbolSize(e),g=new DL(d);return VL(g,e),UL(g),jL(g,e),dg(g,n,0),e>=7&&zL(g,e),HL(g,c),isNaN(r)&&(r=Yp.getBestMask(g,dg.bind(null,g,n))),Yp.applyMask(r,g),dg(g,n,r),{modules:g,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}VS.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=ug.M,i,o;return typeof n<"u"&&(r=ug.from(n.errorCorrectionLevel,ug.M),i=i0.from(n.version),o=Yp.from(n.maskPattern),n.toSJISFunc&&c1.setToSJISFunction(n.toSJISFunc)),qL(e,i,r,o)};var ZS={},gw={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,c=r.scale||4;return{width:o,scale:o?4:c,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const o=t.getScale(r,i);return Math.floor((r+i.margin*2)*o)},t.qrToImageData=function(r,i,o){const c=i.modules.size,d=i.modules.data,g=t.getScale(c,o),p=Math.floor((c+o.margin*2)*g),x=o.margin*g,E=[o.color.light,o.color.dark];for(let _=0;_<p;_++)for(let I=0;I<p;I++){let D=(_*p+I)*4,b=o.color.light;if(_>=x&&I>=x&&_<p-x&&I<p-x){const F=Math.floor((_-x)/g),R=Math.floor((I-x)/g);b=E[d[F*c+R]?1:0]}r[D++]=b.r,r[D++]=b.g,r[D++]=b.b,r[D]=b.a}}})(gw);(function(t){const e=gw;function n(i,o,c){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=c,o.width=c,o.style.height=c+"px",o.style.width=c+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,c,d){let g=d,p=c;typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),c||(p=r()),g=e.getOptions(g);const x=e.getImageWidth(o.modules.size,g),E=p.getContext("2d"),_=E.createImageData(x,x);return e.qrToImageData(_.data,o,g),n(E,p,x),E.putImageData(_,0,0),p},t.renderToDataURL=function(o,c,d){let g=d;typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),g||(g={});const p=t.render(o,c,g),x=g.type||"image/png",E=g.rendererOpts||{};return p.toDataURL(x,E.quality)}})(ZS);var JS={};const $L=gw;function Gv(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function fg(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function XL(t,e,n){let r="",i=0,o=!1,c=0;for(let d=0;d<t.length;d++){const g=Math.floor(d%e),p=Math.floor(d/e);!g&&!o&&(o=!0),t[d]?(c++,d>0&&g>0&&t[d-1]||(r+=o?fg("M",g+n,.5+p+n):fg("m",i,0),i=0,o=!1),g+1<e&&t[d+1]||(r+=fg("h",c),c=0)):i++}return r}JS.render=function(e,n,r){const i=$L.getOptions(n),o=e.modules.size,c=e.modules.data,d=o+i.margin*2,g=i.color.light.a?"<path "+Gv(i.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",p="<path "+Gv(i.color.dark,"stroke")+' d="'+XL(c,o,i.margin)+'"/>',x='viewBox="0 0 '+d+" "+d+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+x+' shape-rendering="crispEdges">'+g+p+`</svg>
`;return typeof r=="function"&&r(null,_),_};const KL=uL,Zp=VS,e3=ZS,YL=JS;function pw(t,e,n,r,i){const o=[].slice.call(arguments,1),c=o.length,d=typeof o[c-1]=="function";if(!d&&!KL())throw new Error("Callback required as last argument");if(d){if(c<2)throw new Error("Too few arguments provided");c===2?(i=n,n=e,e=r=void 0):c===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(n=e,e=r=void 0):c===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(g,p){try{const x=Zp.create(n,r);g(t(x,e,r))}catch(x){p(x)}})}try{const g=Zp.create(n,r);i(null,t(g,e,r))}catch(g){i(g)}}Vh.create=Zp.create;Vh.toCanvas=pw.bind(null,e3.render);Vh.toDataURL=pw.bind(null,e3.renderToDataURL);Vh.toString=pw.bind(null,function(t,e,n){return YL.render(t,n)});const QL=({value:t,size:e=200,className:n=""})=>{const r=W.useRef(null);return W.useEffect(()=>{r.current&&Vh.toCanvas(r.current,t,{width:e,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})},[t,e]),z.jsx("div",{className:`flex justify-center ${n}`,children:z.jsx("canvas",{ref:r,className:"border-4 border-white rounded-lg shadow-lg"})})};var nf={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,o,c,d;return d=1.70158,c=0,o=i,t===0?e:(t/=r)===1?e+i:(c||(c=r*.3),o<Math.abs(i)?(o=i,d=c/4):d=c/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-d)*(2*Math.PI)/c))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,o,c,d;return d=1.70158,c=0,o=i,t===0?e:(t/=r)===1?e+i:(c||(c=r*.3),o<Math.abs(i)?(o=i,d=c/4):d=c/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin((t*r-d)*(2*Math.PI)/c)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,o,c,d;return d=1.70158,c=0,o=i,t===0?e:(t/=r/2)===2?e+i:(c||(c=r*(.3*1.5)),o<Math.abs(i)?(o=i,d=c/4):d=c/(2*Math.PI)*Math.asin(i/o),t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-d)*(2*Math.PI)/c))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*r-d)*(2*Math.PI)/c)*.5+i+e)},easeInBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),o*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),o*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?o/2*(t*t*(((i*=1.525)+1)*t-i))+e:o/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,o;return o=nf.easeOutBounce(r-t,0,i,r),i-o+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,o;return t<r/2?(o=nf.easeInBounce(t*2,0,i,r),o*.5+e):(o=nf.easeOutBounce(t*2-r,0,i,r),o*.5+i*.5+e)}},ZL=nf;function JL(t){return t*Math.PI/180}function Hr(t,e){return t+Math.random()*(e-t)}function eF(t,e){return Math.floor(t+Math.random()*(e-t+1))}var bu;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(bu||(bu={}));var ho;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(ho||(ho={}));const tF=1e3/60;class nF{constructor(e,n,r,i){this.getOptions=n;const{colors:o,initialVelocityX:c,initialVelocityY:d}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Hr(5,20),this.h=Hr(5,20),this.radius=Hr(5,10),this.vx=typeof c=="number"?Hr(-c,c):Hr(c.min,c.max),this.vy=typeof d=="number"?Hr(-d,0):Hr(d.min,d.max),this.shape=eF(0,2),this.angle=JL(Hr(0,360)),this.angularSpin=Hr(-.2,.2),this.color=o[Math.floor(Math.random()*o.length)],this.rotateY=Hr(0,1),this.rotationDirection=Hr(0,1)?ho.Positive:ho.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:o,drawShape:c}=this.getOptions(),d=e/tF;this.x+=this.vx*d,this.y+=this.vy*d,this.vy+=n*d,this.vx+=r*d,this.vx*=i**d,this.vy*=i**d,this.rotateY>=1&&this.rotationDirection===ho.Positive?this.rotationDirection=ho.Negative:this.rotateY<=-1&&this.rotationDirection===ho.Negative&&(this.rotationDirection=ho.Positive);const g=.1*this.rotationDirection*d;if(this.rotateY+=g,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,c&&typeof c=="function")c.call(this,this.context);else switch(this.shape){case bu.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case bu.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case bu.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class rF{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Hr(this.x,this.w+this.x),o=Hr(this.y,this.h+this.y);return new nF(this.context,this.getOptions,i,o)},this.animate=i=>{const{canvas:o,context:c,particlesGenerated:d,lastNumberOfPieces:g}=this,{run:p,recycle:x,numberOfPieces:E,debug:_,tweenFunction:I,tweenDuration:D}=this.getOptions();if(!p)return!1;const b=this.particles.length,F=x?b:d;if(F<E){g!==E&&(this.tweenProgress=0,this.tweenFrom=F,this.lastNumberOfPieces=E),this.tweenProgress=Math.min(D,Math.max(0,this.tweenProgress+i));const R=I(this.tweenProgress,this.tweenFrom,E,D),S=Math.round(R-F);for(let O=0;O<S;O++)this.particles.push(this.getParticle());this.particlesGenerated+=S}_&&(c.font="12px sans-serif",c.fillStyle="#333",c.textAlign="right",c.fillText(`Particles: ${b}`,o.width-10,o.height-20));for(let R=this.particles.length-1;R>=0;R--){const S=this.particles[R];S.update(i),(S.y>o.height||S.y<-100||S.x>o.width+100||S.x<-100)&&(x&&F<=E?this.particles[R]=this.getParticle():this.removeParticleAt(R))}return b>0||F<E},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const mw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:ZL.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class iF{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const o={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...o,...mw,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:o,onConfettiComplete:c,frameRate:d},canvas:g,context:p}=this,x=Math.min(i-this.lastFrameTime,50);if(d&&x<1e3/d){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(d?x%d:0),o&&(p.fillStyle="white",p.clearRect(0,0,g.width,g.height)),this.generator.animate(x)?this.rafId=requestAnimationFrame(this.update):(c&&typeof c=="function"&&this.generator.particlesGenerated>0&&c.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new rF(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,o;const n=(i=this._options)==null?void 0:i.run,r=(o=this._options)==null?void 0:o.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const sF=we.createRef();class yw extends we.Component{constructor(e){super(e),this.canvas=we.createRef(),this.canvas=e.canvasRef||sF}componentDidMount(){if(this.canvas.current){const e=gg(this.props)[0];this.confetti=new iF(this.canvas.current,e)}}componentDidUpdate(){const e=gg(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=gg(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return z.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}yw.defaultProps={...mw};yw.displayName="ReactConfetti";function gg(t){const e={},n={},r={},i=[...Object.keys(mw),"confettiSource","drawShape","onConfettiComplete","frameRate"],o=["canvasRef"];for(const c in t){const d=t[c];i.includes(c)?e[c]=d:o.includes(c)?o[c]=d:r[c]=d}return[e,r,n]}const s0=we.forwardRef((t,e)=>z.jsx(yw,{canvasRef:e,...t})),oF=({value:t,max:e})=>{const n=Math.min(100,Math.max(0,t/e*100)),r=48,i=8,o=r-i/2,c=2*Math.PI*o,d=c-n/100*c;return z.jsx("div",{className:"flex flex-col items-center justify-center",children:z.jsxs("div",{className:"relative group w-28 h-28",children:[z.jsxs("svg",{width:r*2,height:r*2,className:"block",children:[z.jsx("circle",{cx:r,cy:r,r:o,fill:"none",stroke:"#18181b",strokeWidth:i}),z.jsx("circle",{cx:r,cy:r,r:o,fill:"none",stroke:"#ef4444",strokeWidth:i,strokeDasharray:c,strokeDashoffset:d,strokeLinecap:"round",className:"transition-all duration-700 ease-in-out",style:{filter:"drop-shadow(0 0 8px #ef4444cc)"}})]}),z.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center select-none",children:z.jsxs("span",{className:"text-xl font-bold text-white drop-shadow-sm",children:[t," of ",e]})}),z.jsx("div",{className:"absolute inset-0 rounded-full group-hover:scale-105 group-hover:shadow-[0_0_16px_4px_#ef4444cc] transition-transform transition-shadow duration-300"})]})})},aF=()=>{const{user:t,addPurchase:e,logout:n}=s1(),r=Bh(),[i,o]=W.useState(!1),c=we.useRef(null),[d,g]=W.useState(!1),[p,x]=W.useState(0),[E,_]=W.useState(null);if(W.useEffect(()=>{t||r("/login")},[t,r]),W.useEffect(()=>{t&&(_(new Date),c.current!==null&&c.current!==t.purchases&&t.purchases-c.current>0&&(yr({title:"Purchase Updated! 📱",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/5`}),g(!0),x(R=>R+1),setTimeout(()=>g(!1),2500),t.isRewardReady&&c.current<5&&setTimeout(()=>{yr({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>r("/rewards"),1500)},1e3)),c.current===0&&t.purchases===1&&(o(!0),setTimeout(()=>o(!1),3e3)),c.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,r]),!t)return null;t.purchases/5*100;const I=Math.max(0,5-t.purchases),D=()=>{t.purchases>=5||(e(),g(!0),x(F=>F+1),setTimeout(()=>g(!1),2500),t.purchases+1>=5?(yr({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>r("/rewards"),1500)):yr({title:"Purchase Added!",description:`${4-t.purchases} more purchases until your next reward!`}))},b=()=>{n(),yr({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),r("/")};return z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[i&&z.jsx(s0,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1,colors:["#ef4444","#fff"],style:{position:"fixed",left:0,top:0,zIndex:50}}),d&&z.jsx(s0,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1,colors:["#ef4444","#fff","#facc15","#22d3ee","#a3e635"],style:{position:"fixed",left:0,top:0,zIndex:50}},p),z.jsxs("div",{className:"absolute inset-0 opacity-10",children:[z.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),z.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),z.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[z.jsxs("div",{className:"p-6 flex items-center justify-between",children:[z.jsxs("div",{className:"flex items-center",children:[z.jsx(Hs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:z.jsx(b0,{className:"w-6 h-6"})}),z.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Dashboard"})]}),z.jsx(us,{onClick:b,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",children:"Logout"})]}),z.jsx("div",{className:"flex-1 px-6 pb-6",children:z.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[z.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-6 text-center",children:[z.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["Welcome, ",t.name,"!"]}),z.jsx("p",{className:"text-gray-400",children:"Your loyalty card is ready to use"}),E&&z.jsxs("div",{className:"mt-2 flex items-center justify-center text-xs text-gray-500",children:[z.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Last updated: ",E.toLocaleTimeString()]})]}),z.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-6",children:[z.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Your Progress"}),z.jsxs("div",{className:"space-y-4",children:[z.jsxs("div",{className:"flex justify-between items-center text-white",children:[z.jsx("span",{className:"font-medium",children:"Purchases"}),z.jsxs("span",{className:"text-red-400 font-bold",children:[t.purchases," of 5"]})]}),z.jsx(oF,{value:t.purchases,max:5}),I>0?z.jsxs("p",{className:"text-gray-400 text-sm text-center",children:[I," more purchase",I!==1?"s":""," until your next reward!"]}):z.jsx("p",{className:"text-red-400 font-semibold text-center",children:"🎉 Reward Ready! Visit the rewards page."})]})]}),z.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-6",children:[z.jsx("h3",{className:"text-xl font-semibold text-white mb-4 text-center",children:"Your Loyalty Card"}),z.jsx(QL,{value:`LOYALTY:${t.email}:${t.id}`,size:200}),z.jsx("p",{className:"text-gray-400 text-sm text-center mt-4",children:"Show this QR code at checkout"})]}),z.jsxs("div",{className:"space-y-4",children:[z.jsx(us,{onClick:D,className:`w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 ${t.purchases>=5?"opacity-50 cursor-not-allowed grayscale":""}`,disabled:t.purchases>=5,children:"Add Purchase"}),t.isRewardReady&&z.jsx(Hs,{to:"/rewards",className:"block",children:z.jsx(us,{variant:"outline",className:"w-full py-4 text-lg font-semibold border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"View Reward 🎁"})})]})]})})]})]})},lF=()=>{const{user:t,useReward:e}=s1(),n=Bh(),[r,i]=W.useState(!1),[o,c]=W.useState(!1),[d,g]=W.useState(!1),[p,x]=W.useState(30),[E,_]=W.useState(!1),[I,D]=W.useState(!1),[b,F]=W.useState(!0),R=W.useRef(null);return W.useEffect(()=>(t?t.isRewardReady?(D(!0),setTimeout(()=>D(!1),3e3),R.current=setInterval(()=>{F(!1),setTimeout(()=>F(!0),100)},3500)):n("/dashboard"):n("/login"),()=>{R.current&&clearInterval(R.current)}),[t,n]),W.useEffect(()=>{if(!(!t||r||E))if(t.isRewardReady&&p>0){const S=setInterval(()=>{x(O=>O-1)},1e3);return()=>clearInterval(S)}else p===0&&t.isRewardReady&&(_(!0),setTimeout(()=>{e(),n("/dashboard")},2e3))},[t,p,r,E,e,n]),W.useEffect(()=>{let S;return d&&(S=setTimeout(()=>g(!1),2500)),()=>clearTimeout(S)},[d]),W.useEffect(()=>{let S;return o&&(S=setTimeout(()=>c(!1),2500)),()=>clearTimeout(S)},[o]),!t||!t.isRewardReady?null:E?z.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-black via-gray-900 to-red-950",children:z.jsxs("div",{className:"bg-gradient-to-r from-red-700/80 to-black/80 rounded-2xl p-10 shadow-2xl text-center",children:[z.jsx("div",{className:"text-6xl mb-4",children:"⏰"}),z.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Reward expired"}),z.jsx("p",{className:"text-red-200 text-lg",children:"Start collecting again."})]})}):r?z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex flex-col items-center justify-center relative overflow-hidden",children:[o&&z.jsx(s0,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:400,recycle:!1}),z.jsxs("div",{className:"bg-gradient-to-r from-green-600/80 to-green-400/80 backdrop-blur-sm border border-green-900/30 rounded-2xl p-10 shadow-2xl text-center",children:[z.jsx("div",{className:"text-6xl mb-4",children:"🥳"}),z.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Reward Redeemed!"}),z.jsx("p",{className:"text-green-200 text-lg",children:"Your reward has been used."}),z.jsx("p",{className:"text-white/80 mt-2",children:"Your scan count has been reset. Start earning your next reward!"}),z.jsx("button",{className:"mt-8 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold rounded-lg shadow-lg hover:from-red-700 hover:to-red-800 transition-all duration-300",onClick:()=>n("/dashboard"),children:"Back to Dashboard"})]})]}):z.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden bg-gradient-to-br from-black via-red-900 to-orange-900 animate-shimmer",children:[z.jsx("style",{children:`
        @keyframes shimmer {
          0% { background-position: 0% 50%; }
          100% { background-position: 100% 50%; }
        }
        .animate-shimmer {
          background-size: 200% 200%;
          animation: shimmer 8s linear infinite;
        }
        @keyframes fire {
          0% { transform: scaleY(1) translateY(0); opacity: 1; }
          50% { transform: scaleY(1.1) translateY(-10px); opacity: 0.85; }
          100% { transform: scaleY(1) translateY(0); opacity: 1; }
        }
        .fire-flame {
          animation: fire 1.2s infinite alternate cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes lightning {
          0%, 97%, 100% { opacity: 0; }
          98% { opacity: 1; }
          99% { opacity: 0.5; }
        }
        .lightning {
          animation: lightning 4s infinite;
        }
      `}),b&&z.jsx(s0,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:180,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635"],style:{position:"fixed",left:0,top:0,zIndex:40}}),z.jsxs("div",{className:"pointer-events-none",children:[z.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 lightning",style:{boxShadow:"0 0 60px 20px #fff8"}}),z.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 lightning",style:{boxShadow:"0 0 60px 20px #fff8"}}),z.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 lightning",style:{boxShadow:"0 0 60px 20px #fff8"}}),z.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 lightning",style:{boxShadow:"0 0 60px 20px #fff8"}})]}),z.jsx("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-end z-30 pointer-events-none",children:[...Array(12)].map((S,O)=>z.jsx("div",{className:"fire-flame",style:{width:`${16+Math.random()*16}px`,height:`${40+Math.random()*32}px`,marginLeft:4,marginRight:4,borderRadius:"50% 50% 40% 40%",background:"radial-gradient(circle at 50% 30%, #ff9800 60%, #ef4444 100%)",opacity:.7+Math.random()*.3,filter:"blur(1.5px)",animationDelay:`${Math.random()}s`}},O))}),z.jsxs("div",{className:"relative z-20 bg-gradient-to-r from-red-700/80 to-black/80 rounded-2xl p-10 shadow-2xl text-center animate-bounceIn",children:[z.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"🎉"}),z.jsx("h2",{className:"text-3xl font-extrabold text-white mb-2 animate-pulse drop-shadow-[0_0_16px_#ff9800]",children:"You Got 20% OFF! 🎉"}),z.jsx("p",{className:"text-red-200 text-lg mb-6 animate-fadeIn",children:"Show this at checkout to redeem your reward."}),z.jsx("button",{className:"mt-8 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold rounded-lg shadow-lg hover:from-red-700 hover:to-red-800 transition-all duration-300",onClick:()=>{e(),n("/dashboard")},children:"Back to Dashboard"})]})]})},cF=()=>{const t=Fh();return W.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),z.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:z.jsxs("div",{className:"text-center",children:[z.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),z.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),z.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var Ne;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ne||(Ne={}));var qv=new Map([[Ne.QR_CODE,"QR_CODE"],[Ne.AZTEC,"AZTEC"],[Ne.CODABAR,"CODABAR"],[Ne.CODE_39,"CODE_39"],[Ne.CODE_93,"CODE_93"],[Ne.CODE_128,"CODE_128"],[Ne.DATA_MATRIX,"DATA_MATRIX"],[Ne.MAXICODE,"MAXICODE"],[Ne.ITF,"ITF"],[Ne.EAN_13,"EAN_13"],[Ne.EAN_8,"EAN_8"],[Ne.PDF_417,"PDF_417"],[Ne.RSS_14,"RSS_14"],[Ne.RSS_EXPANDED,"RSS_EXPANDED"],[Ne.UPC_A,"UPC_A"],[Ne.UPC_E,"UPC_E"],[Ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),$v;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})($v||($v={}));function uF(t){return Object.values(Ne).includes(t)}var o0;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(o0||(o0={}));var hF=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[o0.SCAN_TYPE_CAMERA,o0.SCAN_TYPE_FILE],t}(),t3=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!qv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,qv.get(e))},t}(),Xv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Jp;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Jp||(Jp={}));var dF=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Jp.UNKWOWN_ERROR}},t}(),fF=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Cs(t){return typeof t>"u"||t===null}var kl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),n3=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),d=0,g=c;d<g.length;d++){var p=g[d];if(o.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),em={exports:{}};(function(t,e){(function(n,r){r(e)})(Hc,function(n){function r(N){return N==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,s){N.__proto__=s}||function(N,s){for(var a in s)s.hasOwnProperty(a)&&(N[a]=s[a])};function o(N,s){i(N,s);function a(){this.constructor=N}N.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function c(N,s){var a=Object.setPrototypeOf;a?a(N,s):N.__proto__=s}function d(N,s){s===void 0&&(s=N.constructor);var a=Error.captureStackTrace;a&&a(N,s)}var g=function(N){o(s,N);function s(a){var l=this.constructor,u=N.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),c(u,l.prototype),d(u),u}return s}(Error);class p extends g{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}p.kind="Exception";class x extends p{}x.kind="ArgumentException";class E extends p{}E.kind="IllegalArgumentException";class _{constructor(s){if(this.binarizer=s,s===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){const h=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new _(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends p{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class D{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class b{static arraycopy(s,a,l,u,h){for(;h--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}class F extends p{}F.kind="IndexOutOfBoundsException";class R extends F{constructor(s=void 0,a=void 0){super(a),this.index=s,this.message=a}}R.kind="ArrayIndexOutOfBoundsException";class S{static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){S.rangeCheck(s.length,a,l);for(let h=a;h<l;h++)s[h]=u}static rangeCheck(s,a,l){if(a>l)throw new E("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new R(a);if(l>s)throw new R(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(h=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(h=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(const l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){const l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){const u=l-a,h=new Int32Array(u);return b.arraycopy(s,a,h,0,u),h}static binarySearch(s,a,l){l===void 0&&(l=S.numberComparator);let u=0,h=s.length-1;for(;u<=h;){const f=h+u>>1,m=l(a,s[f]);if(m>0)u=f+1;else if(m<0)h=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class O{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=U.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const a=U.makeArray(s);b.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),h=l[u];h&=~((1<<(s&31))-1);const f=l.length;for(;h===0;){if(++u===f)return a;h=l[u]}const m=u*32+O.numberOfTrailingZeros(h);return m>a?a:m}getNextUnset(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),h=~l[u];h&=~((1<<(s&31))-1);const f=l.length;for(;h===0;){if(++u===f)return a;h=~l[u]}const m=u*32+O.numberOfTrailingZeros(h);return m>a?a:m}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new E;if(a===s)return;a--;const l=Math.floor(s/32),u=Math.floor(a/32),h=this.bits;for(let f=l;f<=u;f++){const m=f>l?0:s&31,v=(2<<(f<u?31:a&31))-(1<<m);h[f]|=v}}clear(){const s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new E;if(a===s)return!0;a--;const u=Math.floor(s/32),h=Math.floor(a/32),f=this.bits;for(let m=u;m<=h;m++){const w=m>u?0:s&31,C=(2<<(m<h?31:a&31))-(1<<w)&4294967295;if((f[m]&C)!==(l?C:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new E("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let h=0;h<u;h++){let f=0;for(let m=0;m<8;m++)this.get(s)&&(f|=1<<7-m),s++;a[l+h]=f}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let h=0;h<l;h++){let f=u[h];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-h]=f}if(this.size!==l*32){const h=l*32-this.size;let f=s[0]>>>h;for(let m=1;m<l;m++){const w=s[m];f|=w<<32-h,s[m-1]=f,f=w>>>h}s[l-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof U))return!1;const a=s;return this.size===a.size&&S.equals(this.bits,a.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new U(this.size,this.bits.slice())}}var Y;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var Z=Y;class k extends p{static getFormatInstance(){return new k}}k.kind="FormatException";var M;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(M||(M={}));class L{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,L.VALUE_IDENTIFIER_TO_ECI.set(s,this),L.NAME_TO_ECI.set(l,this);const h=this.values;for(let f=0,m=h.length;f!==m;f++){const w=h[f];L.VALUES_TO_ECI.set(w,this)}for(const f of u)L.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new k("incorect value");const a=L.VALUES_TO_ECI.get(s);if(a===void 0)throw new k("incorect value");return a}static getCharacterSetECIByName(s){const a=L.NAME_TO_ECI.get(s);if(a===void 0)throw new k("incorect value");return a}equals(s){if(!(s instanceof L))return!1;const a=s;return this.getName()===a.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(M.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(M.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(M.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(M.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(M.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(M.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(M.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(M.Big5,28,"Big5"),L.GB18030=new L(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(M.EUC_KR,30,"EUC_KR","EUC-KR");class G extends p{}G.kind="UnsupportedOperationException";class X{static decode(s,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!X.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof L?s:L.getCharacterSetECIByName(s)}static decodeFallback(s,a){const l=this.encodingCharacterSet(a);if(X.isDecodeFallbackSupported(l)){let u="";for(let h=0,f=s.length;h<f;h++){let m=s[h].toString(16);m.length<2&&(m="0"+m),u+="%"+m}return decodeURIComponent(u)}if(l.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new G(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(L.UTF8)||s.equals(L.ISO8859_1)||s.equals(L.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let h=0;h<l.length;h++)u.push(l[h].charCodeAt(0));return new Uint8Array(u)}}class ${static castAsNonUtf8Char(s,a=null){const l=a?a.getName():this.ISO88591;return X.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(Z.CHARACTER_SET)!==void 0)return a.get(Z.CHARACTER_SET).toString();const l=s.length;let u=!0,h=!0,f=!0,m=0,w=0,v=0,C=0,P=0,B=0,q=0,K=0,Q=0,ne=0,oe=0;const pe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let me=0;me<l&&(u||h||f);me++){const de=s[me]&255;f&&(m>0?de&128?m--:f=!1:de&128&&(de&64?(m++,de&32?(m++,de&16?(m++,de&8?f=!1:C++):v++):w++):f=!1)),u&&(de>127&&de<160?u=!1:de>159&&(de<192||de===215||de===247)&&oe++),h&&(P>0?de<64||de===127||de>252?h=!1:P--:de===128||de===160||de>239?h=!1:de>160&&de<224?(B++,K=0,q++,q>Q&&(Q=q)):de>127?(P++,q=0,K++,K>ne&&(ne=K)):(q=0,K=0))}return f&&m>0&&(f=!1),h&&P>0&&(h=!1),f&&(pe||w+v+C>0)?$.UTF8:h&&($.ASSUME_SHIFT_JIS||Q>=3||ne>=3)?$.SHIFT_JIS:u&&h?Q===2&&B===2||oe*10>=l?$.SHIFT_JIS:$.ISO88591:u?$.ISO88591:h?$.SHIFT_JIS:f?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(f,m,w,v,C,P){if(f==="%%")return"%";if(a[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let B=C?parseInt(C.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(f);break;case"p":q=parseFloat(a[l]).toPrecision(f);break;case"e":q=parseFloat(a[l]).toExponential(f);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(f)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let K=parseInt(w),Q=w&&w[0]+""=="0"?"0":" ";for(;q.length<K;)q=m!==void 0?q+Q:Q+q;return q}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,u)}static getBytes(s,a){return X.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}$.SHIFT_JIS=L.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=L.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=L.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class j{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=$.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class he{constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new E("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const a=s.length,l=s[0].length,u=new he(l,a);for(let h=0;h<a;h++){const f=s[h];for(let m=0;m<l;m++)f[m]&&u.set(m,h)}return u}static parseFromString(s,a,l){if(s===null)throw new E("stringRepresentation cannot be null");const u=new Array(s.length);let h=0,f=0,m=-1,w=0,v=0;for(;v<s.length;)if(s.charAt(v)===`
`||s.charAt(v)==="\r"){if(h>f){if(m===-1)m=h-f;else if(h-f!==m)throw new E("row lengths do not match");f=h,w++}v++}else if(s.substring(v,v+a.length)===a)v+=a.length,u[h]=!0,h++;else if(s.substring(v,v+l.length)===l)v+=l.length,u[h]=!1,h++;else throw new E("illegal character encountered: "+s.substring(v));if(h>f){if(m===-1)m=h-f;else if(h-f!==m)throw new E("row lengths do not match");w++}const C=new he(m,w);for(let P=0;P<h;P++)u[P]&&C.set(Math.floor(P%m),Math.floor(P/m));return C}get(s,a){const l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new E("input matrix dimensions do not match");const a=new U(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let h=0,f=this.height;h<f;h++){const m=h*l,w=s.getRow(h,a).getBitArray();for(let v=0;v<l;v++)u[m+v]^=w[v]}}clear(){const s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new E("Left and top must be nonnegative");if(u<1||l<1)throw new E("Height and width must be at least 1");const h=s+l,f=a+u;if(f>this.height||h>this.width)throw new E("The region must fit inside the matrix");const m=this.rowSize,w=this.bits;for(let v=a;v<f;v++){const C=v*m;for(let P=s;P<h;P++)w[C+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new U(this.width):a.clear();const l=this.rowSize,u=this.bits,h=s*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[h+f]);return a}setRow(s,a){b.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),a=this.getHeight();let l=new U(s),u=new U(s);for(let h=0,f=Math.floor((a+1)/2);h<f;h++)l=this.getRow(h,l),u=this.getRow(a-1-h,u),l.reverse(),u.reverse(),this.setRow(h,u),this.setRow(a-1-h,l)}getEnclosingRectangle(){const s=this.width,a=this.height,l=this.rowSize,u=this.bits;let h=s,f=a,m=-1,w=-1;for(let v=0;v<a;v++)for(let C=0;C<l;C++){const P=u[v*l+C];if(P!==0){if(v<f&&(f=v),v>w&&(w=v),C*32<h){let B=0;for(;!(P<<31-B&4294967295);)B++;C*32+B<h&&(h=C*32+B)}if(C*32+31>m){let B=31;for(;!(P>>>B);)B--;C*32+B>m&&(m=C*32+B)}}}return m<h||w<f?null:Int32Array.from([h,f,m-h+1,w-f+1])}getTopLeftOnBit(){const s=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/s;let h=l%s*32;const f=a[l];let m=0;for(;!(f<<31-m&4294967295);)m++;return h+=m,Int32Array.from([h,u])}getBottomRightOnBit(){const s=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/s);let h=Math.floor(l%s)*32;const f=a[l];let m=31;for(;!(f>>>m);)m--;return h+=m,Int32Array.from([h,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof he))return!1;const a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&S.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+S.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new j;for(let h=0,f=this.height;h<f;h++){for(let m=0,w=this.width;m<w;m++)u.append(this.get(m,h)?s:a);u.append(l)}return u.toString()}clone(){return new he(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends p{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class Ie extends D{constructor(s){super(s),this.luminances=Ie.EMPTY,this.buckets=new Int32Array(Ie.LUMINANCE_BUCKETS)}getBlackRow(s,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new U(u):a.clear(),this.initArrays(u);const h=l.getRow(s,this.luminances),f=this.buckets;for(let w=0;w<u;w++)f[(h[w]&255)>>Ie.LUMINANCE_SHIFT]++;const m=Ie.estimateBlackPoint(f);if(u<3)for(let w=0;w<u;w++)(h[w]&255)<m&&a.set(w);else{let w=h[0]&255,v=h[1]&255;for(let C=1;C<u-1;C++){const P=h[C+1]&255;(v*4-w-P)/2<m&&a.set(C),w=v,v=P}}return a}getBlackMatrix(){const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new he(a,l);this.initArrays(a);const h=this.buckets;for(let w=1;w<5;w++){const v=Math.floor(l*w/5),C=s.getRow(v,this.luminances),P=Math.floor(a*4/5);for(let B=Math.floor(a/5);B<P;B++){const q=C[B]&255;h[q>>Ie.LUMINANCE_SHIFT]++}}const f=Ie.estimateBlackPoint(h),m=s.getMatrix();for(let w=0;w<l;w++){const v=w*a;for(let C=0;C<a;C++)(m[v+C]&255)<f&&u.set(C,w)}return u}createBinarizer(s){return new Ie(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const a=this.buckets;for(let l=0;l<Ie.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){const a=s.length;let l=0,u=0,h=0;for(let C=0;C<a;C++)s[C]>h&&(u=C,h=s[C]),s[C]>l&&(l=s[C]);let f=0,m=0;for(let C=0;C<a;C++){const P=C-u,B=s[C]*P*P;B>m&&(f=C,m=B)}if(u>f){const C=u;u=f,f=C}if(f-u<=a/16)throw new J;let w=f-1,v=-1;for(let C=f-1;C>u;C--){const P=C-u,B=P*P*(f-C)*(l-s[C]);B>v&&(w=C,v=B)}return w<<Ie.LUMINANCE_SHIFT}}Ie.LUMINANCE_BITS=5,Ie.LUMINANCE_SHIFT=8-Ie.LUMINANCE_BITS,Ie.LUMINANCE_BUCKETS=1<<Ie.LUMINANCE_BITS,Ie.EMPTY=Uint8ClampedArray.from([0]);class ye extends Ie{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=ye.MINIMUM_DIMENSION&&l>=ye.MINIMUM_DIMENSION){const u=s.getMatrix();let h=a>>ye.BLOCK_SIZE_POWER;a&ye.BLOCK_SIZE_MASK&&h++;let f=l>>ye.BLOCK_SIZE_POWER;l&ye.BLOCK_SIZE_MASK&&f++;const m=ye.calculateBlackPoints(u,h,f,a,l),w=new he(a,l);ye.calculateThresholdForBlock(u,h,f,a,l,m,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new ye(s)}static calculateThresholdForBlock(s,a,l,u,h,f,m){const w=h-ye.BLOCK_SIZE,v=u-ye.BLOCK_SIZE;for(let C=0;C<l;C++){let P=C<<ye.BLOCK_SIZE_POWER;P>w&&(P=w);const B=ye.cap(C,2,l-3);for(let q=0;q<a;q++){let K=q<<ye.BLOCK_SIZE_POWER;K>v&&(K=v);const Q=ye.cap(q,2,a-3);let ne=0;for(let pe=-2;pe<=2;pe++){const me=f[B+pe];ne+=me[Q-2]+me[Q-1]+me[Q]+me[Q+1]+me[Q+2]}const oe=ne/25;ye.thresholdBlock(s,K,P,oe,u,m)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,h,f){for(let m=0,w=l*h+a;m<ye.BLOCK_SIZE;m++,w+=h)for(let v=0;v<ye.BLOCK_SIZE;v++)(s[w+v]&255)<=u&&f.set(a+v,l+m)}static calculateBlackPoints(s,a,l,u,h){const f=h-ye.BLOCK_SIZE,m=u-ye.BLOCK_SIZE,w=new Array(l);for(let v=0;v<l;v++){w[v]=new Int32Array(a);let C=v<<ye.BLOCK_SIZE_POWER;C>f&&(C=f);for(let P=0;P<a;P++){let B=P<<ye.BLOCK_SIZE_POWER;B>m&&(B=m);let q=0,K=255,Q=0;for(let oe=0,pe=C*u+B;oe<ye.BLOCK_SIZE;oe++,pe+=u){for(let me=0;me<ye.BLOCK_SIZE;me++){const de=s[pe+me]&255;q+=de,de<K&&(K=de),de>Q&&(Q=de)}if(Q-K>ye.MIN_DYNAMIC_RANGE)for(oe++,pe+=u;oe<ye.BLOCK_SIZE;oe++,pe+=u)for(let me=0;me<ye.BLOCK_SIZE;me++)q+=s[pe+me]&255}let ne=q>>ye.BLOCK_SIZE_POWER*2;if(Q-K<=ye.MIN_DYNAMIC_RANGE&&(ne=K/2,v>0&&P>0)){const oe=(w[v-1][P]+2*w[v][P-1]+w[v-1][P-1])/4;K<oe&&(ne=oe)}w[v][P]=ne}}return w}}ye.BLOCK_SIZE_POWER=3,ye.BLOCK_SIZE=1<<ye.BLOCK_SIZE_POWER,ye.BLOCK_SIZE_MASK=ye.BLOCK_SIZE-1,ye.MINIMUM_DIMENSION=ye.BLOCK_SIZE*5,ye.MIN_DYNAMIC_RANGE=24;class re{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let a=new j;for(let l=0;l<this.height;l++){const u=this.getRow(l,s);for(let h=0;h<this.width;h++){const f=u[h]&255;let m;f<64?m="#":f<128?m="+":f<192?m=".":m=" ",a.append(m)}a.append(`
`)}return a.toString()}}class fe extends re{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){const l=this.delegate.getRow(s,a),u=this.getWidth();for(let h=0;h<u;h++)l[h]=255-(l[h]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new fe(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class Te extends re{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Te.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const a=s.getContext("2d").getImageData(0,0,s.width,s.height);return Te.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){const u=new Uint8ClampedArray(a*l);for(let h=0,f=0,m=s.length;h<m;h+=4,f++){let w;if(s[h+3]===0)w=255;else{const C=s[h],P=s[h+1],B=s[h+2];w=306*C+601*P+117*B+512>>10}u[f]=w}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*Te.DEGREE_TO_RADIANS,h=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(u))*h+Math.abs(Math.sin(u))*f),w=Math.ceil(Math.abs(Math.sin(u))*h+Math.abs(Math.cos(u))*f);return a.width=m,a.height=w,l.translate(m/2,w/2),l.rotate(u),l.drawImage(this.canvas,h/-2,f/-2),this.buffer=Te.makeBufferFromCanvasImageData(a),this}invert(){return new fe(this)}}Te.DEGREE_TO_RADIANS=Math.PI/180;class Se{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ce=(globalThis||Hc||self||window||void 0)&&(globalThis||Hc||self||window||void 0).__awaiter||function(N,s,a,l){function u(h){return h instanceof a?h:new a(function(f){f(h)})}return new(a||(a=Promise))(function(h,f){function m(C){try{v(l.next(C))}catch(P){f(P)}}function w(C){try{v(l.throw(C))}catch(P){f(P)}}function v(C){C.done?h(C.value):u(C.value).then(m,w)}v((l=l.apply(N,s||[])).next())})};class De{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of s){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const h=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,m=l.groupId,w={deviceId:h,label:f,kind:u,groupId:m};a.push(w)}return a})}getVideoInputDevices(){return Ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new Se(a.deviceId,a.label))})}findDeviceById(s){return Ce(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return Ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return Ce(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return Ce(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return Ce(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return Ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return Ce(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const h={video:u};return yield this.decodeFromConstraints(h,a,l)})}decodeFromConstraints(s,a,l){return Ce(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return Ce(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return Ce(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){const l=document.getElementById(s);if(!l)throw new x(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new x(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new x("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new x("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new x("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new x("An image element must be provided.");this.reset();const a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){const a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new x("A video element must be provided.");this.reset();const a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new x("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new x("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return Ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(h,f)=>{if(this._stopAsyncDecode){f(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(s);h(m)}catch(m){const w=a&&m instanceof J,C=(m instanceof I||m instanceof k)&&l;if(w||C)return setTimeout(u,this._timeBetweenDecodingAttempts,h,f);f(m)}};return new Promise((h,f)=>u(h,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const h=u instanceof I||u instanceof k,f=u instanceof J;(h||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const a=this.getCaptureCanvas(s),l=new Te(a),u=new ye(l);return new _(u)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Ke{constructor(s,a,l=a==null?0:8*a.length,u,h,f=b.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=h,this.timestamp=f,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=h,this.resultMetadata=null,f==null?this.timestamp=b.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(a.length+s.length);b.arraycopy(a,0,l,0,a.length),b.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $t;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($t||($t={}));var Ee=$t,pn;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(pn||(pn={}));var Et=pn;class Kn{constructor(s,a,l,u,h=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class _n{exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Wt{constructor(s,a){if(a.length===0)throw new E;this.field=s;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),b.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(s===1){l=0;for(let f=0,m=a.length;f!==m;f++){const w=a[f];l=_n.addOrSubtract(l,w)}return l}l=a[0];const u=a.length,h=this.field;for(let f=1;f<u;f++)l=_n.addOrSubtract(h.multiply(s,l),a[f]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){const f=a;a=l,l=f}let u=new Int32Array(l.length);const h=l.length-a.length;b.arraycopy(l,0,u,0,h);for(let f=h;f<l.length;f++)u[f]=_n.addOrSubtract(a[f-h],l[f]);return new Wt(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=s.coefficients,h=u.length,f=new Int32Array(l+h-1),m=this.field;for(let w=0;w<l;w++){const v=a[w];for(let C=0;C<h;C++)f[w+C]=_n.addOrSubtract(f[w+C],m.multiply(v,u[C]))}return new Wt(m,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),h=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(h[f],s);return new Wt(l,u)}multiplyByMonomial(s,a){if(s<0)throw new E;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,h=new Int32Array(u+s),f=this.field;for(let m=0;m<u;m++)h[m]=f.multiply(l[m],a);return new Wt(f,h)}divide(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new E("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const h=s.getCoefficient(s.getDegree()),f=a.inverse(h);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){const m=u.getDegree()-s.getDegree(),w=a.multiply(u.getCoefficient(u.getDegree()),f),v=s.multiplyByMonomial(m,w),C=a.buildMonomial(m,w);l=l.addOrSubtract(C),u=u.addOrSubtract(v)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}class lr extends p{}lr.kind="ArithmeticException";class $e extends _n{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let h=1;for(let m=0;m<a;m++)u[m]=h,h*=2,h>=a&&(h^=s,h&=a-1);this.expTable=u;const f=new Int32Array(a);for(let m=0;m<a-1;m++)f[u[m]]=m;this.logTable=f,this.zero=new Wt(this,Int32Array.from([0])),this.one=new Wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new E;if(a===0)return this.zero;const l=new Int32Array(s+1);return l[0]=a,new Wt(this,l)}inverse(s){if(s===0)throw new lr;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}$e.AZTEC_DATA_12=new $e(4201,4096,1),$e.AZTEC_DATA_10=new $e(1033,1024,1),$e.AZTEC_DATA_6=new $e(67,64,1),$e.AZTEC_PARAM=new $e(19,16,1),$e.QR_CODE_FIELD_256=new $e(285,256,0),$e.DATA_MATRIX_FIELD_256=new $e(301,256,1),$e.AZTEC_DATA_8=$e.DATA_MATRIX_FIELD_256,$e.MAXICODE_FIELD_64=$e.AZTEC_DATA_6;class Yn extends p{}Yn.kind="ReedSolomonException";class An extends p{}An.kind="IllegalStateException";class Vn{constructor(s){this.field=s}decode(s,a){const l=this.field,u=new Wt(l,s),h=new Int32Array(a);let f=!0;for(let q=0;q<a;q++){const K=u.evaluateAt(l.exp(q+l.getGeneratorBase()));h[h.length-1-q]=K,K!==0&&(f=!1)}if(f)return;const m=new Wt(l,h),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),m,a),v=w[0],C=w[1],P=this.findErrorLocations(v),B=this.findErrorMagnitudes(C,P);for(let q=0;q<P.length;q++){const K=s.length-1-l.log(P[q]);if(K<0)throw new Yn("Bad error location");s[K]=$e.addOrSubtract(s[K],B[q])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){const q=s;s=a,a=q}const u=this.field;let h=s,f=a,m=u.getZero(),w=u.getOne();for(;f.getDegree()>=(l/2|0);){let q=h,K=m;if(h=f,m=w,h.isZero())throw new Yn("r_{i-1} was zero");f=q;let Q=u.getZero();const ne=h.getCoefficient(h.getDegree()),oe=u.inverse(ne);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){const pe=f.getDegree()-h.getDegree(),me=u.multiply(f.getCoefficient(f.getDegree()),oe);Q=Q.addOrSubtract(u.buildMonomial(pe,me)),f=f.addOrSubtract(h.multiplyByMonomial(pe,me))}if(w=Q.multiply(m).addOrSubtract(K),f.getDegree()>=h.getDegree())throw new An("Division algorithm failed to reduce polynomial?")}const v=w.getCoefficient(0);if(v===0)throw new Yn("sigmaTilde(0) was zero");const C=u.inverse(v),P=w.multiplyScalar(C),B=f.multiplyScalar(C);return[P,B]}findErrorLocations(s){const a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const h=this.field;for(let f=1;f<h.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(l[u]=h.inverse(f),u++);if(u!==a)throw new Yn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){const l=a.length,u=new Int32Array(l),h=this.field;for(let f=0;f<l;f++){const m=h.inverse(a[f]);let w=1;for(let v=0;v<l;v++)if(f!==v){const C=h.multiply(a[v],m),P=C&1?C&-2:C|1;w=h.multiply(w,P)}u[f]=h.multiply(s.evaluateAt(m),h.inverse(w)),h.getGeneratorBase()!==0&&(u[f]=h.multiply(u[f],m))}return u}}var Xt;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(Xt||(Xt={}));class ft{decode(s){this.ddata=s;let a=s.getBits(),l=this.extractBits(a),u=this.correctBits(l),h=ft.convertBoolArrayToByteArray(u),f=ft.getEncodedData(u),m=new Kn(h,f,null,null);return m.setNumBits(u.length),m}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let a=s.length,l=Xt.UPPER,u=Xt.UPPER,h="",f=0;for(;f<a;)if(u===Xt.BINARY){if(a-f<5)break;let m=ft.readCode(s,f,5);if(f+=5,m===0){if(a-f<11)break;m=ft.readCode(s,f,11)+31,f+=11}for(let w=0;w<m;w++){if(a-f<8){f=a;break}const v=ft.readCode(s,f,8);h+=$.castAsNonUtf8Char(v),f+=8}u=l}else{let m=u===Xt.DIGIT?4:5;if(a-f<m)break;let w=ft.readCode(s,f,m);f+=m;let v=ft.getCharacter(u,w);v.startsWith("CTRL_")?(l=u,u=ft.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=u)):(h+=v,u=l)}return h}static getTable(s){switch(s){case"L":return Xt.LOWER;case"P":return Xt.PUNCT;case"M":return Xt.MIXED;case"D":return Xt.DIGIT;case"B":return Xt.BINARY;case"U":default:return Xt.UPPER}}static getCharacter(s,a){switch(s){case Xt.UPPER:return ft.UPPER_TABLE[a];case Xt.LOWER:return ft.LOWER_TABLE[a];case Xt.MIXED:return ft.MIXED_TABLE[a];case Xt.PUNCT:return ft.PUNCT_TABLE[a];case Xt.DIGIT:return ft.DIGIT_TABLE[a];default:throw new An("Bad table")}}correctBits(s){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=$e.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=$e.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=$e.AZTEC_DATA_10):(l=12,a=$e.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),h=s.length/l;if(h<u)throw new k;let f=s.length%l,m=new Int32Array(h);for(let B=0;B<h;B++,f+=l)m[B]=ft.readCode(s,f,l);try{new Vn(a).decode(m,h-u)}catch(B){throw new k(B)}let w=(1<<l)-1,v=0;for(let B=0;B<u;B++){let q=m[B];if(q===0||q===w)throw new k;(q===1||q===w-1)&&v++}let C=new Array(u*l-v),P=0;for(let B=0;B<u;B++){let q=m[B];if(q===1||q===w-1)C.fill(q>1,P,P+l-1),P+=l-1;else for(let K=l-1;K>=0;--K)C[P++]=(q&1<<K)!==0}return C}extractBits(s){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,h=new Int32Array(u),f=new Array(this.totalBitsInLayer(l,a));if(a)for(let m=0;m<h.length;m++)h[m]=m;else{let m=u+1+2*O.truncDivision(O.truncDivision(u,2)-1,15),w=u/2,v=O.truncDivision(m,2);for(let C=0;C<w;C++){let P=C+O.truncDivision(C,15);h[w-C-1]=v-P-1,h[w+C]=v+P+1}}for(let m=0,w=0;m<l;m++){let v=(l-m)*4+(a?9:12),C=m*2,P=u-1-C;for(let B=0;B<v;B++){let q=B*2;for(let K=0;K<2;K++)f[w+q+K]=s.get(h[C+K],h[C+B]),f[w+2*v+q+K]=s.get(h[C+B],h[P-K]),f[w+4*v+q+K]=s.get(h[P-K],h[P-B]),f[w+6*v+q+K]=s.get(h[P-B],h[C+K])}w+=v*8}return f}static readCode(s,a,l){let u=0;for(let h=a;h<a+l;h++)u<<=1,s[h]&&(u|=1);return u}static readByte(s,a){let l=s.length-a;return l>=8?ft.readCode(s,a,8):ft.readCode(s,a,l)<<8-l}static convertBoolArrayToByteArray(s){let a=new Uint8Array((s.length+7)/8);for(let l=0;l<a.length;l++)a[l]=ft.readByte(s,8*l);return a}totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Le{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){const h=s-l,f=a-u;return Math.sqrt(h*h+f*f)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){const h=s[l];a+=h}return a}}class cr{static floatToIntBits(s){return s}}cr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Pe){const a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*cr.floatToIntBits(this.x)+cr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]);let h,f,m;if(l>=a&&l>=u?(f=s[0],h=s[1],m=s[2]):u>=l&&u>=a?(f=s[1],h=s[0],m=s[2]):(f=s[2],h=s[0],m=s[1]),this.crossProductZ(h,f,m)<0){const w=h;h=m,m=w}s[0]=h,s[1]=f,s[2]=m}static distance(s,a){return Le.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){const u=a.x,h=a.y;return(l.x-u)*(s.y-h)-(l.y-h)*(s.x-u)}}class qs{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class xi extends qs{constructor(s,a,l,u,h){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ur{constructor(s,a,l,u){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),a==null&&(a=ur.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),u==null&&(u=s.getHeight()/2|0);const h=a/2|0;if(this.leftInit=l-h,this.rightInit=l+h,this.upInit=u-h,this.downInit=u+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let s=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,h=!1,f=!0,m=!1,w=!1,v=!1,C=!1,P=!1;const B=this.width,q=this.height;for(;f;){f=!1;let K=!0;for(;(K||!w)&&a<B;)K=this.containsBlackPoint(l,u,a,!1),K?(a++,f=!0,w=!0):w||a++;if(a>=B){h=!0;break}let Q=!0;for(;(Q||!v)&&u<q;)Q=this.containsBlackPoint(s,a,u,!0),Q?(u++,f=!0,v=!0):v||u++;if(u>=q){h=!0;break}let ne=!0;for(;(ne||!C)&&s>=0;)ne=this.containsBlackPoint(l,u,s,!1),ne?(s--,f=!0,C=!0):C||s--;if(s<0){h=!0;break}let oe=!0;for(;(oe||!P)&&l>=0;)oe=this.containsBlackPoint(s,a,l,!0),oe?(l--,f=!0,P=!0):P||l--;if(l<0){h=!0;break}f&&(m=!0)}if(!h&&m){const K=a-s;let Q=null;for(let me=1;Q===null&&me<K;me++)Q=this.getBlackPointOnSegment(s,u-me,s+me,u);if(Q==null)throw new J;let ne=null;for(let me=1;ne===null&&me<K;me++)ne=this.getBlackPointOnSegment(s,l+me,s+me,l);if(ne==null)throw new J;let oe=null;for(let me=1;oe===null&&me<K;me++)oe=this.getBlackPointOnSegment(a,l+me,a-me,l);if(oe==null)throw new J;let pe=null;for(let me=1;pe===null&&me<K;me++)pe=this.getBlackPointOnSegment(a,u-me,a-me,u);if(pe==null)throw new J;return this.centerEdges(pe,Q,oe,ne)}else throw new J}getBlackPointOnSegment(s,a,l,u){const h=Le.round(Le.distance(s,a,l,u)),f=(l-s)/h,m=(u-a)/h,w=this.image;for(let v=0;v<h;v++){const C=Le.round(s+v*f),P=Le.round(a+v*m);if(w.get(C,P))return new Pe(C,P)}return null}centerEdges(s,a,l,u){const h=s.getX(),f=s.getY(),m=a.getX(),w=a.getY(),v=l.getX(),C=l.getY(),P=u.getX(),B=u.getY(),q=ur.CORR;return h<this.width/2?[new Pe(P-q,B+q),new Pe(m+q,w+q),new Pe(v-q,C-q),new Pe(h+q,f-q)]:[new Pe(P+q,B+q),new Pe(m+q,w-q),new Pe(v-q,C+q),new Pe(h-q,f-q)]}containsBlackPoint(s,a,l,u){const h=this.image;if(u){for(let f=s;f<=a;f++)if(h.get(f,l))return!0}else for(let f=s;f<=a;f++)if(h.get(l,f))return!0;return!1}}ur.INIT_SIZE=10,ur.CORR=1;class ms{static checkAndNudgePoints(s,a){const l=s.getWidth(),u=s.getHeight();let h=!0;for(let f=0;f<a.length&&h;f+=2){const m=Math.floor(a[f]),w=Math.floor(a[f+1]);if(m<-1||m>l||w<-1||w>u)throw new J;h=!1,m===-1?(a[f]=0,h=!0):m===l&&(a[f]=l-1,h=!0),w===-1?(a[f+1]=0,h=!0):w===u&&(a[f+1]=u-1,h=!0)}h=!0;for(let f=a.length-2;f>=0&&h;f-=2){const m=Math.floor(a[f]),w=Math.floor(a[f+1]);if(m<-1||m>l||w<-1||w>u)throw new J;h=!1,m===-1?(a[f]=0,h=!0):m===l&&(a[f]=l-1,h=!0),w===-1?(a[f+1]=0,h=!0):w===u&&(a[f+1]=u-1,h=!0)}}}class gt{constructor(s,a,l,u,h,f,m,w,v){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=h,this.a32=f,this.a13=m,this.a23=w,this.a33=v}static quadrilateralToQuadrilateral(s,a,l,u,h,f,m,w,v,C,P,B,q,K,Q,ne){const oe=gt.quadrilateralToSquare(s,a,l,u,h,f,m,w);return gt.squareToQuadrilateral(v,C,P,B,q,K,Q,ne).times(oe)}transformPoints(s){const a=s.length,l=this.a11,u=this.a12,h=this.a13,f=this.a21,m=this.a22,w=this.a23,v=this.a31,C=this.a32,P=this.a33;for(let B=0;B<a;B+=2){const q=s[B],K=s[B+1],Q=h*q+w*K+P;s[B]=(l*q+f*K+v)/Q,s[B+1]=(u*q+m*K+C)/Q}}transformPointsWithValues(s,a){const l=this.a11,u=this.a12,h=this.a13,f=this.a21,m=this.a22,w=this.a23,v=this.a31,C=this.a32,P=this.a33,B=s.length;for(let q=0;q<B;q++){const K=s[q],Q=a[q],ne=h*K+w*Q+P;s[q]=(l*K+f*Q+v)/ne,a[q]=(u*K+m*Q+C)/ne}}static squareToQuadrilateral(s,a,l,u,h,f,m,w){const v=s-l+h-m,C=a-u+f-w;if(v===0&&C===0)return new gt(l-s,h-l,s,u-a,f-u,a,0,0,1);{const P=l-h,B=m-h,q=u-f,K=w-f,Q=P*K-B*q,ne=(v*K-B*C)/Q,oe=(P*C-v*q)/Q;return new gt(l-s+ne*l,m-s+oe*m,s,u-a+ne*u,w-a+oe*w,a,ne,oe,1)}}static quadrilateralToSquare(s,a,l,u,h,f,m,w){return gt.squareToQuadrilateral(s,a,l,u,h,f,m,w).buildAdjoint()}buildAdjoint(){return new gt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new gt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class kt extends ms{sampleGrid(s,a,l,u,h,f,m,w,v,C,P,B,q,K,Q,ne,oe,pe,me){const de=gt.quadrilateralToQuadrilateral(u,h,f,m,w,v,C,P,B,q,K,Q,ne,oe,pe,me);return this.sampleGridWithTransform(s,a,l,de)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new J;const h=new he(a,l),f=new Float32Array(2*a);for(let m=0;m<l;m++){const w=f.length,v=m+.5;for(let C=0;C<w;C+=2)f[C]=C/2+.5,f[C+1]=v;u.transformPoints(f),ms.checkAndNudgePoints(s,f);try{for(let C=0;C<w;C+=2)s.get(Math.floor(f[C]),Math.floor(f[C+1]))&&h.set(C/2,m)}catch{throw new J}}return h}}class Qn{static setGridSampler(s){Qn.gridSampler=s}static getInstance(){return Qn.gridSampler}}Qn.gridSampler=new kt;class Mt{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class $s{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),h=this.getMatrixCornerPoints(l);return new xi(u,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new J;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let m=l[(this.shift+f)%4];this.compact?(u<<=7,u+=m>>1&127):(u<<=10,u+=(m>>2&992)+(m>>1&31))}let h=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,h,f)=>{let m=(u>>a-2<<1)+(u&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(O.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new J}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let h=l-u,f=new Int32Array(l);for(let w=l-1;w>=0;--w)f[w]=s&15,s>>=4;try{new Vn($e.AZTEC_PARAM).decode(f,h)}catch{throw new J}let m=0;for(let w=0;w<u;w++)m=(m<<4)+f[w];return m}getBullsEyeCorners(s){let a=s,l=s,u=s,h=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(a,f,1,-1),B=this.getFirstDifferent(l,f,1,1),q=this.getFirstDifferent(u,f,-1,1),K=this.getFirstDifferent(h,f,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(K,P)*this.nbCenterLayers/(this.distancePoint(h,a)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(P,B,q,K))break}a=P,l=B,u=q,h=K,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let m=new Pe(a.getX()+.5,a.getY()-.5),w=new Pe(l.getX()+.5,l.getY()+.5),v=new Pe(u.getX()-.5,u.getY()+.5),C=new Pe(h.getX()-.5,h.getY()-.5);return this.expandSquare([m,w,v,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let m=new ur(this.image).detect();s=m[0],a=m[1],l=m[2],u=m[3]}catch{let w=this.image.getWidth()/2,v=this.image.getHeight()/2;s=this.getFirstDifferent(new Mt(w+7,v-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Mt(w+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Mt(w-7,v+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Mt(w-7,v-7),!1,-1,-1).toResultPoint()}let h=Le.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=Le.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let m=new ur(this.image,15,h,f).detect();s=m[0],a=m[1],l=m[2],u=m[3]}catch{s=this.getFirstDifferent(new Mt(h+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Mt(h+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Mt(h-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Mt(h-7,f-7),!1,-1,-1).toResultPoint()}return h=Le.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=Le.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Mt(h,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,h){let f=Qn.getInstance(),m=this.getDimension(),w=m/2-this.nbCenterLayers,v=m/2+this.nbCenterLayers;return f.sampleGrid(s,m,m,w,w,v,w,v,v,w,v,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),h.getX(),h.getY())}sampleLine(s,a,l){let u=0,h=this.distanceResultPoint(s,a),f=h/l,m=s.getX(),w=s.getY(),v=f*(a.getX()-s.getX())/h,C=f*(a.getY()-s.getY())/h;for(let P=0;P<l;P++)this.image.get(Le.round(m+P*v),Le.round(w+P*C))&&(u|=1<<l-P-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let h=3;s=new Mt(s.getX()-h,s.getY()+h),a=new Mt(a.getX()-h,a.getY()-h),l=new Mt(l.getX()+h,l.getY()-h),u=new Mt(u.getX()+h,u.getY()+h);let f=this.getColor(u,s);if(f===0)return!1;let m=this.getColor(s,a);return m!==f||(m=this.getColor(a,l),m!==f)?!1:(m=this.getColor(l,u),m===f)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,h=(a.getY()-s.getY())/l,f=0,m=s.getX(),w=s.getY(),v=this.image.get(s.getX(),s.getY()),C=Math.ceil(l);for(let B=0;B<C;B++)m+=u,w+=h,this.image.get(Le.round(m),Le.round(w))!==v&&f++;let P=f/l;return P>.1&&P<.9?0:P<=.1===v?1:-1}getFirstDifferent(s,a,l,u){let h=s.getX()+l,f=s.getY()+u;for(;this.isValid(h,f)&&this.image.get(h,f)===a;)h+=l,f+=u;for(h-=l,f-=u;this.isValid(h,f)&&this.image.get(h,f)===a;)h+=l;for(h-=l;this.isValid(h,f)&&this.image.get(h,f)===a;)f+=u;return f-=u,new Mt(h,f)}expandSquare(s,a,l){let u=l/(2*a),h=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),m=(s[0].getX()+s[2].getX())/2,w=(s[0].getY()+s[2].getY())/2,v=new Pe(m+u*h,w+u*f),C=new Pe(m-u*h,w-u*f);h=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),m=(s[1].getX()+s[3].getX())/2,w=(s[1].getY()+s[3].getY())/2;let P=new Pe(m+u*h,w+u*f),B=new Pe(m-u*h,w-u*f);return[v,P,C,B]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=Le.round(s.getX()),l=Le.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return Le.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return Le.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class Xs{decode(s,a=null){let l=null,u=new $s(s.getBlackMatrix()),h=null,f=null;try{let C=u.detectMirror(!1);h=C.getPoints(),this.reportFoundResultPoints(a,h),f=new ft().decode(C)}catch(C){l=C}if(f==null)try{let C=u.detectMirror(!0);h=C.getPoints(),this.reportFoundResultPoints(a,h),f=new ft().decode(C)}catch(C){throw l??C}let m=new Ke(f.getText(),f.getRawBytes(),f.getNumBits(),h,Ee.AZTEC,b.currentTimeMillis()),w=f.getByteSegments();w!=null&&m.putMetadata(Et.BYTE_SEGMENTS,w);let v=f.getECLevel();return v!=null&&m.putMetadata(Et.ERROR_CORRECTION_LEVEL,v),m}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(Z.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,h,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class ji extends De{constructor(s=500){super(new Xs,s)}}class Nt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(Z.TRY_HARDER)===!0&&s.isRotateSupported()){const h=s.rotateCounterClockwise(),f=this.doDecode(h,a),m=f.getResultMetadata();let w=270;m!==null&&m.get(Et.ORIENTATION)===!0&&(w=w+m.get(Et.ORIENTATION)%360),f.putMetadata(Et.ORIENTATION,w);const v=f.getResultPoints();if(v!==null){const C=h.getHeight();for(let P=0;P<v.length;P++)v[P]=new Pe(C-v[P].getY()-1,v[P].getX())}return f}else throw new J}}reset(){}doDecode(s,a){const l=s.getWidth(),u=s.getHeight();let h=new U(l);const f=a&&a.get(Z.TRY_HARDER)===!0,m=Math.max(1,u>>(f?8:5));let w;f?w=u:w=15;const v=Math.trunc(u/2);for(let C=0;C<w;C++){const P=Math.trunc((C+1)/2),B=(C&1)===0,q=v+m*(B?P:-P);if(q<0||q>=u)break;try{h=s.getBlackRow(q,h)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(h.reverse(),a&&a.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;a.forEach((ne,oe)=>Q.set(oe,ne)),Q.delete(Z.NEED_RESULT_POINT_CALLBACK),a=Q}try{const Q=this.decodeRow(q,h,a);if(K===1){Q.putMetadata(Et.ORIENTATION,180);const ne=Q.getResultPoints();ne!==null&&(ne[0]=new Pe(l-ne[0].getX()-1,ne[0].getY()),ne[1]=new Pe(l-ne[1].getX()-1,ne[1].getY()))}return Q}catch{}}}throw new J}static recordPattern(s,a,l){const u=l.length;for(let v=0;v<u;v++)l[v]=0;const h=s.getSize();if(a>=h)throw new J;let f=!s.get(a),m=0,w=a;for(;w<h;){if(s.get(w)!==f)l[m]++;else{if(++m===u)break;l[m]=1,f=!f}w++}if(!(m===u||m===u-1&&w===h))throw new J}static recordPatternInReverse(s,a,l){let u=l.length,h=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==h&&(u--,h=!h);if(u>=0)throw new J;Nt.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){const u=s.length;let h=0,f=0;for(let v=0;v<u;v++)h+=s[v],f+=a[v];if(h<f)return Number.POSITIVE_INFINITY;const m=h/f;l*=m;let w=0;for(let v=0;v<u;v++){const C=s[v],P=a[v]*m,B=C>P?C-P:P-C;if(B>l)return Number.POSITIVE_INFINITY;w+=B}return w/h}}class xe extends Nt{static findStartPattern(s){const a=s.getSize(),l=s.getNextSet(0);let u=0,h=Int32Array.from([0,0,0,0,0,0]),f=l,m=!1;const w=6;for(let v=l;v<a;v++)if(s.get(v)!==m)h[u]++;else{if(u===w-1){let C=xe.MAX_AVG_VARIANCE,P=-1;for(let B=xe.CODE_START_A;B<=xe.CODE_START_C;B++){const q=Nt.patternMatchVariance(h,xe.CODE_PATTERNS[B],xe.MAX_INDIVIDUAL_VARIANCE);q<C&&(C=q,P=B)}if(P>=0&&s.isRange(Math.max(0,f-(v-f)/2),f,!1))return Int32Array.from([f,v,P]);f+=h[0]+h[1],h=h.slice(2,h.length-1),h[u-1]=0,h[u]=0,u--}else u++;h[u]=1,m=!m}throw new J}static decodeCode(s,a,l){Nt.recordPattern(s,l,a);let u=xe.MAX_AVG_VARIANCE,h=-1;for(let f=0;f<xe.CODE_PATTERNS.length;f++){const m=xe.CODE_PATTERNS[f],w=this.patternMatchVariance(a,m,xe.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,h=f)}if(h>=0)return h;throw new J}decodeRow(s,a,l){const u=l&&l.get(Z.ASSUME_GS1)===!0,h=xe.findStartPattern(a),f=h[2];let m=0;const w=new Uint8Array(20);w[m++]=f;let v;switch(f){case xe.CODE_START_A:v=xe.CODE_CODE_A;break;case xe.CODE_START_B:v=xe.CODE_CODE_B;break;case xe.CODE_START_C:v=xe.CODE_CODE_C;break;default:throw new k}let C=!1,P=!1,B="",q=h[0],K=h[1];const Q=Int32Array.from([0,0,0,0,0,0]);let ne=0,oe=0,pe=f,me=0,de=!0,rt=!1,Xe=!1;for(;!C;){const fl=P;switch(P=!1,ne=oe,oe=xe.decodeCode(a,Q,K),w[m++]=oe,oe!==xe.CODE_STOP&&(de=!0),oe!==xe.CODE_STOP&&(me++,pe+=me*oe),q=K,K+=Q.reduce((o3,a3)=>o3+a3,0),oe){case xe.CODE_START_A:case xe.CODE_START_B:case xe.CODE_START_C:throw new k}switch(v){case xe.CODE_CODE_A:if(oe<64)Xe===rt?B+=String.fromCharCode(32+oe):B+=String.fromCharCode(32+oe+128),Xe=!1;else if(oe<96)Xe===rt?B+=String.fromCharCode(oe-64):B+=String.fromCharCode(oe+64),Xe=!1;else switch(oe!==xe.CODE_STOP&&(de=!1),oe){case xe.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_A:!rt&&Xe?(rt=!0,Xe=!1):rt&&Xe?(rt=!1,Xe=!1):Xe=!0;break;case xe.CODE_SHIFT:P=!0,v=xe.CODE_CODE_B;break;case xe.CODE_CODE_B:v=xe.CODE_CODE_B;break;case xe.CODE_CODE_C:v=xe.CODE_CODE_C;break;case xe.CODE_STOP:C=!0;break}break;case xe.CODE_CODE_B:if(oe<96)Xe===rt?B+=String.fromCharCode(32+oe):B+=String.fromCharCode(32+oe+128),Xe=!1;else switch(oe!==xe.CODE_STOP&&(de=!1),oe){case xe.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_B:!rt&&Xe?(rt=!0,Xe=!1):rt&&Xe?(rt=!1,Xe=!1):Xe=!0;break;case xe.CODE_SHIFT:P=!0,v=xe.CODE_CODE_A;break;case xe.CODE_CODE_A:v=xe.CODE_CODE_A;break;case xe.CODE_CODE_C:v=xe.CODE_CODE_C;break;case xe.CODE_STOP:C=!0;break}break;case xe.CODE_CODE_C:if(oe<100)oe<10&&(B+="0"),B+=oe;else switch(oe!==xe.CODE_STOP&&(de=!1),oe){case xe.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case xe.CODE_CODE_A:v=xe.CODE_CODE_A;break;case xe.CODE_CODE_B:v=xe.CODE_CODE_B;break;case xe.CODE_STOP:C=!0;break}break}fl&&(v=v===xe.CODE_CODE_A?xe.CODE_CODE_B:xe.CODE_CODE_A)}const br=K-q;if(K=a.getNextUnset(K),!a.isRange(K,Math.min(a.getSize(),K+(K-q)/2),!1))throw new J;if(pe-=me*ne,pe%103!==ne)throw new I;const Ci=B.length;if(Ci===0)throw new J;Ci>0&&de&&(v===xe.CODE_CODE_C?B=B.substring(0,Ci-2):B=B.substring(0,Ci-1));const Rr=(h[1]+h[0])/2,Rt=q+br/2,zn=w.length,zr=new Uint8Array(zn);for(let fl=0;fl<zn;fl++)zr[fl]=w[fl];const dl=[new Pe(Rr,s),new Pe(Rt,s)];return new Ke(B,zr,0,dl,Ee.CODE_128,new Date().getTime())}}xe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],xe.MAX_AVG_VARIANCE=.25,xe.MAX_INDIVIDUAL_VARIANCE=.7,xe.CODE_SHIFT=98,xe.CODE_CODE_C=99,xe.CODE_CODE_B=100,xe.CODE_CODE_A=101,xe.CODE_FNC_1=102,xe.CODE_FNC_2=97,xe.CODE_FNC_3=96,xe.CODE_FNC_4_A=101,xe.CODE_FNC_4_B=100,xe.CODE_START_A=103,xe.CODE_START_B=104,xe.CODE_START_C=105,xe.CODE_STOP=106;class St extends Nt{constructor(s=!1,a=!1){super(),this.usingCheckDigit=s,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let h=St.findAsteriskPattern(a,u),f=a.getNextSet(h[1]),m=a.getSize(),w,v;do{St.recordPattern(a,f,u);let Q=St.toNarrowWidePattern(u);if(Q<0)throw new J;w=St.patternToChar(Q),this.decodeRowResult+=w,v=f;for(let ne of u)f+=ne;f=a.getNextSet(f)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let Q of u)C+=Q;let P=f-v-C;if(f!==m&&P*2<C)throw new J;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,ne=0;for(let oe=0;oe<Q;oe++)ne+=St.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(oe));if(this.decodeRowResult.charAt(Q)!==St.ALPHABET_STRING.charAt(ne%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new J;let B;this.extendedMode?B=St.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(h[1]+h[0])/2,K=v+C/2;return new Ke(B,null,0,[new Pe(q,s),new Pe(K,s)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(s,a){let l=s.getSize(),u=s.getNextSet(0),h=0,f=u,m=!1,w=a.length;for(let v=u;v<l;v++)if(s.get(v)!==m)a[h]++;else{if(h===w-1){if(this.toNarrowWidePattern(a)===St.ASTERISK_ENCODING&&s.isRange(Math.max(0,f-Math.floor((v-f)/2)),f,!1))return[f,v];f+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,m=!m}throw new J}static toNarrowWidePattern(s){let a=s.length,l=0,u;do{let h=2147483647;for(let w of s)w<h&&w>l&&(h=w);l=h,u=0;let f=0,m=0;for(let w=0;w<a;w++){let v=s[w];v>l&&(m|=1<<a-1-w,u++,f+=v)}if(u===3){for(let w=0;w<a&&u>0;w++){let v=s[w];if(v>l&&(u--,v*2>=f))return-1}return m}}while(u>3);return-1}static patternToChar(s){for(let a=0;a<St.CHARACTER_ENCODINGS.length;a++)if(St.CHARACTER_ENCODINGS[a]===s)return St.ALPHABET_STRING.charAt(a);if(s===St.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(s){let a=s.length,l="";for(let u=0;u<a;u++){let h=s.charAt(u);if(h==="+"||h==="$"||h==="%"||h==="/"){let f=s.charAt(u+1),m="\0";switch(h){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new k;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new k;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new k;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new k;break}l+=m,u++}else l+=h}return l}}St.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",St.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],St.ASTERISK_ENCODING=148;class Je extends Nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),h=this.decodeEnd(a),f=new j;Je.decodeMiddle(a,u[1],h[0],f);let m=f.toString(),w=null;l!=null&&(w=l.get(Z.ALLOWED_LENGTHS)),w==null&&(w=Je.DEFAULT_ALLOWED_LENGTHS);let v=m.length,C=!1,P=0;for(let K of w){if(v===K){C=!0;break}K>P&&(P=K)}if(!C&&v>P&&(C=!0),!C)throw new k;const B=[new Pe(u[1],s),new Pe(h[0],s)];return new Ke(m,null,0,B,Ee.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let h=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(h.fill(0),f.fill(0),m.fill(0);a<l;){Nt.recordPattern(s,a,h);for(let v=0;v<5;v++){let C=2*v;f[v]=h[C],m[v]=h[C+1]}let w=Je.decodeDigit(f);u.append(w.toString()),w=this.decodeDigit(m),u.append(w.toString()),h.forEach(function(v){a+=v})}}decodeStart(s){let a=Je.skipWhiteSpace(s),l=Je.findGuardPattern(s,a,Je.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new J}static skipWhiteSpace(s){const a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new J;return l}decodeEnd(s){s.reverse();try{let a=Je.skipWhiteSpace(s),l;try{l=Je.findGuardPattern(s,a,Je.END_PATTERN_REVERSED[0])}catch(h){h instanceof J&&(l=Je.findGuardPattern(s,a,Je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,h=new Int32Array(u),f=s.getSize(),m=!1,w=0,v=a;h.fill(0);for(let C=a;C<f;C++)if(s.get(C)!==m)h[w]++;else{if(w===u-1){if(Nt.patternMatchVariance(h,l,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return[v,C];v+=h[0]+h[1],b.arraycopy(h,2,h,0,w-1),h[w-1]=0,h[w]=0,w--}else w++;h[w]=1,m=!m}throw new J}static decodeDigit(s){let a=Je.MAX_AVG_VARIANCE,l=-1,u=Je.PATTERNS.length;for(let h=0;h<u;h++){let f=Je.PATTERNS[h],m=Nt.patternMatchVariance(s,f,Je.MAX_INDIVIDUAL_VARIANCE);m<a?(a=m,l=h):m===a&&(l=-1)}if(l>=0)return l%10;throw new J}}Je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Je.MAX_AVG_VARIANCE=.38,Je.MAX_INDIVIDUAL_VARIANCE=.5,Je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Je.START_PATTERN=Int32Array.from([1,1,1,1]),Je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends Nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,h=Int32Array.from([0,0,0]);for(;!a;){h=Int32Array.from([0,0,0]),l=Pt.findGuardPattern(s,u,!1,this.START_END_PATTERN,h);let f=l[0];u=l[1];let m=f-(u-f);m>=0&&(a=s.isRange(m,f,!1))}return l}static checkChecksum(s){return Pt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Pt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}static decodeEnd(s,a){return Pt.findGuardPattern(s,a,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,h){let f=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let m=0,w=a,v=u.length,C=l;for(let P=a;P<f;P++)if(s.get(P)!==C)h[m]++;else{if(m===v-1){if(Nt.patternMatchVariance(h,u,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=h[0]+h[1];let B=h.slice(2,h.length-1);for(let q=0;q<m-1;q++)h[q]=B[q];h[m-1]=0,h[m]=0,m--}else m++;h[m]=1,C=!C}throw new J}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let h=this.MAX_AVG_VARIANCE,f=-1,m=u.length;for(let w=0;w<m;w++){let v=u[w],C=Nt.patternMatchVariance(a,v,Pt.MAX_INDIVIDUAL_VARIANCE);C<h&&(h=C,f=w)}if(f>=0)return f;throw new J}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ve{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),f=u.toString(),m=Ve.parseExtensionString(f),w=[new Pe((l[0]+l[1])/2,s),new Pe(h,s)],v=new Ke(f,null,0,w,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),f=a[1],m=0;for(let v=0;v<5&&f<h;v++){let C=Pt.decodeDigit(s,u,f,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let P of u)f+=P;C>=10&&(m|=1<<4-v),v!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==5)throw new J;let w=this.determineCheckDigit(m);if(Ve.extensionChecksum(l.toString())!==w)throw new J;return f}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new J}static parseExtensionString(s){if(s.length!==5)return null;let a=Ve.parseExtension5String(s);return a==null?null:new Map([[Et.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="£";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),h=l%100,f=h<10?"0"+h:h.toString();return a+u+"."+f}}class pt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),f=u.toString(),m=pt.parseExtensionString(f),w=[new Pe((l[0]+l[1])/2,s),new Pe(h,s)],v=new Ke(f,null,0,w,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),f=a[1],m=0;for(let w=0;w<2&&f<h;w++){let v=Pt.decodeDigit(s,u,f,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let C of u)f+=C;v>=10&&(m|=1<<1-w),w!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==2)throw new J;if(parseInt(l.toString())%4!==m)throw new J;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[Et.ISSUE_NUMBER,parseInt(s)]])}}class mt{static decodeRow(s,a,l){let u=Pt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ve().decodeRow(s,a,u)}catch{return new pt().decodeRow(s,a,u)}}}mt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class We extends Pt{constructor(){super(),this.decodeRowStringBuffer="",We.L_AND_G_PATTERNS=We.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=We.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];We.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=We.findStartGuardPattern(a),h=l==null?null:l.get(Z.NEED_RESULT_POINT_CALLBACK);if(h!=null){const de=new Pe((u[0]+u[1])/2,s);h.foundPossibleResultPoint(de)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),m=f.rowOffset,w=f.resultString;if(h!=null){const de=new Pe(m,s);h.foundPossibleResultPoint(de)}let v=this.decodeEnd(a,m);if(h!=null){const de=new Pe((v[0]+v[1])/2,s);h.foundPossibleResultPoint(de)}let C=v[1],P=C+(C-v[0]);if(P>=a.getSize()||!a.isRange(C,P,!1))throw new J;let B=w.toString();if(B.length<8)throw new k;if(!We.checkChecksum(B))throw new I;let q=(u[1]+u[0])/2,K=(v[1]+v[0])/2,Q=this.getBarcodeFormat(),ne=[new Pe(q,s),new Pe(K,s)],oe=new Ke(B,null,0,ne,Q,new Date().getTime()),pe=0;try{let de=mt.decodeRow(s,a,v[1]);oe.putMetadata(Et.UPC_EAN_EXTENSION,de.getText()),oe.putAllMetadata(de.getResultMetadata()),oe.addResultPoints(de.getResultPoints()),pe=de.getText().length}catch{}let me=l==null?null:l.get(Z.ALLOWED_EAN_EXTENSIONS);if(me!=null){let de=!1;for(let rt in me)if(pe.toString()===rt){de=!0;break}if(!de)throw new J}return oe}decodeEnd(s,a){return We.findGuardPattern(s,a,!1,We.START_END_PATTERN,new Int32Array(We.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return We.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return We.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}}class nn extends We{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),f=a[1],m=0;for(let v=0;v<6&&f<h;v++){let C=We.decodeDigit(s,u,f,We.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let P of u)f+=P;C>=10&&(m|=1<<5-v)}l=nn.determineFirstDigit(l,m),f=We.findGuardPattern(s,f,!0,We.MIDDLE_PATTERN,new Int32Array(We.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&f<h;v++){let C=We.decodeDigit(s,u,f,We.L_PATTERNS);l+=String.fromCharCode(48+C);for(let P of u)f+=P}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(s,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new J}}nn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vi extends We{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),f=a[1];for(let w=0;w<4&&f<h;w++){let v=We.decodeDigit(s,u,f,We.L_PATTERNS);l+=String.fromCharCode(48+v);for(let C of u)f+=C}f=We.findGuardPattern(s,f,!0,We.MIDDLE_PATTERN,new Int32Array(We.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&f<h;w++){let v=We.decodeDigit(s,u,f,We.L_PATTERNS);l+=String.fromCharCode(48+v);for(let C of u)f+=C}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ee.EAN_8}}class oi extends We{constructor(){super(...arguments),this.ean13Reader=new nn}getBarcodeFormat(){return Ee.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new Ke(a.substring(1),null,null,s.getResultPoints(),Ee.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new J}reset(){this.ean13Reader.reset()}}class Cr extends We{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters.map(v=>v);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const h=s.getSize();let f=a[1],m=0;for(let v=0;v<6&&f<h;v++){const C=Cr.decodeDigit(s,u,f,Cr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let P of u)f+=P;C>=10&&(m|=1<<5-v)}let w=Cr.determineNumSysAndCheckDigit(l,m);return{rowOffset:f,resultString:w}}decodeEnd(s,a){return Cr.findGuardPatternWithoutCounters(s,a,!0,Cr.MIDDLE_END_PATTERN)}checkChecksum(s){return We.checkChecksum(Cr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let h=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return h+s+f}throw J.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(s){const a=s.slice(1,7).split("").map(h=>h.charCodeAt(0)),l=new j;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}Cr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Cr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ks extends Nt{constructor(s){super();let a=s==null?null:s.get(Z.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new nn),l.push(new oi),l.push(new vi),l.push(new Cr)):(a.indexOf(Ee.EAN_13)>-1&&l.push(new nn),a.indexOf(Ee.UPC_A)>-1&&l.push(new oi),a.indexOf(Ee.EAN_8)>-1&&l.push(new vi),a.indexOf(Ee.UPC_E)>-1&&l.push(new Cr)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{const h=u.decodeRow(s,a,l),f=h.getBarcodeFormat()===Ee.EAN_13&&h.getText().charAt(0)==="0",m=l==null?null:l.get(Z.POSSIBLE_FORMATS),w=m==null||m.includes(Ee.UPC_A);if(f&&w){const v=h.getRawBytes(),C=new Ke(h.getText().substring(1),v,v?v.length:null,h.getResultPoints(),Ee.UPC_A);return C.putAllMetadata(h.getResultMetadata()),C}return h}catch{}throw new J}reset(){for(let s of this.readers)s.reset()}}class Cn extends Nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,a){for(let l=0;l<a.length;l++)if(Nt.patternMatchVariance(s,a[l],Cn.MAX_INDIVIDUAL_VARIANCE)<Cn.MAX_AVG_VARIANCE)return l;throw new J}static count(s){return Le.sum(new Int32Array(s))}static increment(s,a){let l=0,u=a[0];for(let h=1;h<s.length;h++)a[h]>u&&(u=a[h],l=h);s[l]++}static decrement(s,a){let l=0,u=a[0];for(let h=1;h<s.length;h++)a[h]<u&&(u=a[h],l=h);s[l]--}static isFinderPattern(s){let a=s[0]+s[1],l=a+s[2]+s[3],u=a/l;if(u>=Cn.MIN_FINDER_PATTERN_RATIO&&u<=Cn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let m of s)m>f&&(f=m),m<h&&(h=m);return f<10*h}return!1}}Cn.MAX_AVG_VARIANCE=.2,Cn.MAX_INDIVIDUAL_VARIANCE=.45,Cn.MIN_FINDER_PATTERN_RATIO=9.5/12,Cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ai{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof ai))return!1;const a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fa{constructor(s,a,l,u,h){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Pe(l,h)),this.resultPoints.push(new Pe(u,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof fa))return!1;const a=s;return this.value===a.value}hashCode(){return this.value}}class Ot{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let w of s)u+=w;let h=0,f=0,m=s.length;for(let w=0;w<m-1;w++){let v;for(v=1,f|=1<<w;v<s[w];v++,f&=~(1<<w)){let C=Ot.combins(u-v-1,m-w-2);if(l&&f===0&&u-v-(m-w-1)>=m-w-1&&(C-=Ot.combins(u-v-(m-w),m-w-2)),m-w-1>1){let P=0;for(let B=u-v-(m-w-2);B>a;B--)P+=Ot.combins(u-v-B-1,m-w-3);C-=P*(m-1-w)}else u-v>a&&C--;h+=C}u-=v}return h}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let h=1,f=1;for(let m=s;m>l;m--)h*=m,f<=u&&(h/=f,f++);for(;f<=u;)h/=f,f++;return h}}class jh{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new U(l),h=0,m=s[0].getRightChar().getValue();for(let w=11;w>=0;--w)m&1<<w&&u.set(h),h++;for(let w=1;w<s.length;++w){let v=s[w],C=v.getLeftChar().getValue();for(let P=11;P>=0;--P)C&1<<P&&u.set(h),h++;if(v.getRightChar()!=null){let P=v.getRightChar().getValue();for(let B=11;B>=0;--B)P&1<<B&&u.set(h),h++}}return u}}class Lr{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ys{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Zn extends ys{constructor(s,a){super(s),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Zn.FNC1}}Zn.FNC1="$";class ws extends ys{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends ys{constructor(s,a,l){if(super(s),a<0||a>10||l<0||l>10)throw new k;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class be{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new J;let a=s.substring(0,2);for(let h of be.TWO_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===be.VARIABLE_LENGTH?be.processVariableAI(2,h[2],s):be.processFixedAI(2,h[1],s);if(s.length<3)throw new J;let l=s.substring(0,3);for(let h of be.THREE_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===be.VARIABLE_LENGTH?be.processVariableAI(3,h[2],s):be.processFixedAI(3,h[1],s);for(let h of be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===be.VARIABLE_LENGTH?be.processVariableAI(4,h[2],s):be.processFixedAI(4,h[1],s);if(s.length<4)throw new J;let u=s.substring(0,4);for(let h of be.FOUR_DIGIT_DATA_LENGTH)if(h[0]===u)return h[1]===be.VARIABLE_LENGTH?be.processVariableAI(4,h[2],s):be.processFixedAI(4,h[1],s);throw new J}static processFixedAI(s,a,l){if(l.length<s)throw new J;let u=l.substring(0,s);if(l.length<s+a)throw new J;let h=l.substring(s,s+a),f=l.substring(s+a),m="("+u+")"+h,w=be.parseFieldsInGeneralPurpose(f);return w==null?m:m+w}static processVariableAI(s,a,l){let u=l.substring(0,s),h;l.length<s+a?h=l.length:h=s+a;let f=l.substring(s,h),m=l.substring(h),w="("+u+")"+f,v=be.parseFieldsInGeneralPurpose(m);return v==null?w:w+v}}be.VARIABLE_LENGTH=[],be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",be.VARIABLE_LENGTH,20],["22",be.VARIABLE_LENGTH,29],["30",be.VARIABLE_LENGTH,8],["37",be.VARIABLE_LENGTH,8],["90",be.VARIABLE_LENGTH,30],["91",be.VARIABLE_LENGTH,30],["92",be.VARIABLE_LENGTH,30],["93",be.VARIABLE_LENGTH,30],["94",be.VARIABLE_LENGTH,30],["95",be.VARIABLE_LENGTH,30],["96",be.VARIABLE_LENGTH,30],["97",be.VARIABLE_LENGTH,3],["98",be.VARIABLE_LENGTH,30],["99",be.VARIABLE_LENGTH,30]],be.THREE_DIGIT_DATA_LENGTH=[["240",be.VARIABLE_LENGTH,30],["241",be.VARIABLE_LENGTH,30],["242",be.VARIABLE_LENGTH,6],["250",be.VARIABLE_LENGTH,30],["251",be.VARIABLE_LENGTH,30],["253",be.VARIABLE_LENGTH,17],["254",be.VARIABLE_LENGTH,20],["400",be.VARIABLE_LENGTH,30],["401",be.VARIABLE_LENGTH,30],["402",17],["403",be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",be.VARIABLE_LENGTH,20],["421",be.VARIABLE_LENGTH,15],["422",3],["423",be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",be.VARIABLE_LENGTH,15],["391",be.VARIABLE_LENGTH,18],["392",be.VARIABLE_LENGTH,15],["393",be.VARIABLE_LENGTH,18],["703",be.VARIABLE_LENGTH,30]],be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",be.VARIABLE_LENGTH,20],["8003",be.VARIABLE_LENGTH,30],["8004",be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",be.VARIABLE_LENGTH,30],["8008",be.VARIABLE_LENGTH,12],["8018",18],["8020",be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",be.VARIABLE_LENGTH,70],["8200",be.VARIABLE_LENGTH,70]];class Ys{constructor(s){this.buffer=new j,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let h=this.decodeGeneralPurposeField(l,u),f=be.parseFieldsInGeneralPurpose(h.getNewString());if(f!=null&&s.append(f),h.isRemaining()?u=""+h.getRemainingValue():u=null,l===h.getNewPosition())break;l=h.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(s,4);return h===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),h-1,In.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new In(s+7,l,u)}extractNumericValueFromBitArray(s,a){return Ys.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let h=0;h<l;++h)s.get(a+h)&&(u|=1<<l-h-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ws(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ws(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new ws(this.current.getPosition(),this.buffer.toString()):a=new ws(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Lr(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new ws(this.current.getPosition(),this.buffer.toString());return new Lr(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new ws(this.current.getPosition(),this.buffer.toString());return new Lr(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new ws(this.current.getPosition(),this.buffer.toString());return new Lr(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lr(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Zn(s+5,Zn.FNC1);if(a>=5&&a<15)return new Zn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new Zn(s+7,""+(l+1));if(l>=90&&l<116)return new Zn(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),h;switch(u){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new k}return new Zn(s+8,h)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Zn(s+5,Zn.FNC1);if(a>=5&&a<15)return new Zn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new Zn(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new An("Decoding invalid alphanumeric value: "+l)}return new Zn(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Qs{constructor(s){this.information=s,this.generalDecoder=new Ys(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Un extends Qs{constructor(s){super(s)}encodeCompressedGtin(s,a){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,a,l)}encodeCompressedGtinWithoutAI(s,a,l){for(let u=0;u<4;++u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);h/100===0&&s.append("0"),h/10===0&&s.append("0"),s.append(h)}Un.appendCheckDigit(s,l)}static appendCheckDigit(s,a){let l=0;for(let u=0;u<13;u++){let h=s.charAt(u+a).charCodeAt(0)-48;l+=u&1?h:3*h}l=10-l%10,l===10&&(l=0),s.append(l)}}Un.GTIN_SIZE=40;class zi extends Un{constructor(s){super(s)}parseInformation(){let s=new j;s.append("(01)");let a=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(zi.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,zi.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(s,zi.HEADER_SIZE+44)}}zi.HEADER_SIZE=4;class xs extends Qs{constructor(s){super(s)}parseInformation(){let s=new j;return this.getGeneralDecoder().decodeAllCodes(s,xs.HEADER_SIZE)}}xs.HEADER_SIZE=5;class Fr extends Un{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let h=this.checkWeight(u),f=1e5;for(let m=0;m<5;++m)h/f===0&&s.append("0"),f/=10;s.append(h)}}class Br extends Fr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Br.HEADER_SIZE+Fr.GTIN_SIZE+Br.WEIGHT_SIZE)throw new J;let s=new j;return this.encodeCompressedGtin(s,Br.HEADER_SIZE),this.encodeCompressedWeight(s,Br.HEADER_SIZE+Fr.GTIN_SIZE,Br.WEIGHT_SIZE),s.toString()}}Br.HEADER_SIZE=5,Br.WEIGHT_SIZE=15;class zh extends Br{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class Lc extends Br{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Ir extends Un{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ir.HEADER_SIZE+Un.GTIN_SIZE)throw new J;let s=new j;this.encodeCompressedGtin(s,Ir.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Ir.HEADER_SIZE+Un.GTIN_SIZE,Ir.LAST_DIGIT_SIZE);s.append("(392"),s.append(a),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ir.HEADER_SIZE+Un.GTIN_SIZE+Ir.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}Ir.HEADER_SIZE=8,Ir.LAST_DIGIT_SIZE=2;class Dn extends Un{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Dn.HEADER_SIZE+Un.GTIN_SIZE)throw new J;let s=new j;this.encodeCompressedGtin(s,Dn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+Un.GTIN_SIZE,Dn.LAST_DIGIT_SIZE);s.append("(393"),s.append(a),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+Un.GTIN_SIZE+Dn.LAST_DIGIT_SIZE,Dn.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Dn.HEADER_SIZE+Un.GTIN_SIZE+Dn.LAST_DIGIT_SIZE+Dn.FIRST_THREE_DIGITS_SIZE,null);return s.append(u.getNewString()),s.toString()}}Dn.HEADER_SIZE=8,Dn.LAST_DIGIT_SIZE=2,Dn.FIRST_THREE_DIGITS_SIZE=10;class bt extends Fr{constructor(s,a,l){super(s),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE+bt.DATE_SIZE)throw new J;let s=new j;return this.encodeCompressedGtin(s,bt.HEADER_SIZE),this.encodeCompressedWeight(s,bt.HEADER_SIZE+bt.GTIN_SIZE,bt.WEIGHT_SIZE),this.encodeCompressedDate(s,bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,bt.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let u=l%32;l/=32;let h=l%12+1;l/=12;let f=l;f/10==0&&s.append("0"),s.append(f),h/10==0&&s.append("0"),s.append(h),u/10==0&&s.append("0"),s.append(u)}addWeightCode(s,a){s.append("("),s.append(this.firstAIdigits),s.append(a/1e5),s.append(")")}checkWeight(s){return s%1e5}}bt.HEADER_SIZE=8,bt.WEIGHT_SIZE=20,bt.DATE_SIZE=16;function Hh(N){try{if(N.get(1))return new zi(N);if(!N.get(2))return new xs(N);switch(Ys.extractNumericValueFromBitArray(N,1,4)){case 4:return new zh(N);case 5:return new Lc(N)}switch(Ys.extractNumericValueFromBitArray(N,1,5)){case 12:return new Ir(N);case 13:return new Dn(N)}switch(Ys.extractNumericValueFromBitArray(N,1,7)){case 56:return new bt(N,"310","11");case 57:return new bt(N,"320","11");case 58:return new bt(N,"310","13");case 59:return new bt(N,"320","13");case 60:return new bt(N,"310","15");case 61:return new bt(N,"320","15");case 62:return new bt(N,"310","17");case 63:return new bt(N,"320","17")}}catch(s){throw console.log(s),new An("unknown decoder: "+N)}}class Vr{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof Vr?Vr.equalsOrNull(s.leftchar,a.leftchar)&&Vr.equalsOrNull(s.rightchar,a.rightchar)&&Vr.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:Vr.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ll{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof ll?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,h)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class ce extends Cn{constructor(s){super(...arguments),this.pairs=new Array(ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return ce.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ce.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(h){if(h instanceof J){if(!this.pairs.length)throw new J;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new J}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(s);h.push(u);try{return this.checkRows(h,l+1)}catch(f){this.verbose&&console.log(f)}}throw new J}static isValidSequence(s){for(let a of ce.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,h=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>s){h=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}h||u||ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new ll(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let h of s)if(Vr.equals(u,h))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let h of s){let f=!1;for(let m of l.getPairs())if(h.equals(m)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=jh.buildBitArray(s),u=Hh(a).parseInformation(),h=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),m=[h[0],h[1],f[0],f[1]];return new Ke(u,null,null,m,Ee.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),h=2;for(let m=1;m<this.pairs.size();++m){let w=this.pairs.get(m);u+=w.getLeftChar().getChecksumPortion(),h++;let v=w.getRightChar();v!=null&&(u+=v.getChecksumPortion(),h++)}return u%=211,211*(h-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let h,f=!0,m=-1;do this.findNextPair(s,a,m),h=this.parseFoundFinderPattern(s,l,u),h==null?m=ce.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let w=this.decodeDataCharacter(s,h,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new J;let v;try{v=this.decodeDataCharacter(s,h,u,!1)}catch(C){v=null,this.verbose&&console.log(C)}return new Vr(w,v,h,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let m=a.length%2!=0;this.startFromEven&&(m=!m);let w=!1;for(;f<h&&(w=!s.get(f),!!w);)f++;let v=0,C=f;for(let P=f;P<h;P++)if(s.get(P)!=w)u[v]++;else{if(v==3){if(m&&ce.reverseCounters(u),ce.isFinderPattern(u)){this.startEnd[0]=C,this.startEnd[1]=P;return}m&&ce.reverseCounters(u),C+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,w=!w}throw new J}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,h,f;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!s.get(v);)v--;v++,u=this.startEnd[0]-v,h=v,f=this.startEnd[1]}else h=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let m=this.getDecodeFinderCounters();b.arraycopy(m,0,m,1,m.length-1),m[0]=u;let w;try{w=this.parseFinderValue(m,ce.FINDER_PATTERNS)}catch{return null}return new fa(w,[h,f],h,f,a)}decodeDataCharacter(s,a,l,u){let h=this.getDataCharacterCounters();for(let Rt=0;Rt<h.length;Rt++)h[Rt]=0;if(u)ce.recordPatternInReverse(s,a.getStartEnd()[0],h);else{ce.recordPattern(s,a.getStartEnd()[1],h);for(let Rt=0,zn=h.length-1;Rt<zn;Rt++,zn--){let zr=h[Rt];h[Rt]=h[zn],h[zn]=zr}}let f=17,m=Le.sum(new Int32Array(h))/f,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(m-w)/w>.3)throw new J;let v=this.getOddCounts(),C=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Rt=0;Rt<h.length;Rt++){let zn=1*h[Rt]/m,zr=zn+.5;if(zr<1){if(zn<.3)throw new J;zr=1}else if(zr>8){if(zn>8.7)throw new J;zr=8}let dl=Rt/2;Rt&1?(C[dl]=zr,B[dl]=zn-zr):(v[dl]=zr,P[dl]=zn-zr)}this.adjustOddEvenCounts(f);let q=4*a.getValue()+(l?0:2)+(u?0:1)-1,K=0,Q=0;for(let Rt=v.length-1;Rt>=0;Rt--){if(ce.isNotA1left(a,l,u)){let zn=ce.WEIGHTS[q][2*Rt];Q+=v[Rt]*zn}K+=v[Rt]}let ne=0;for(let Rt=C.length-1;Rt>=0;Rt--)if(ce.isNotA1left(a,l,u)){let zn=ce.WEIGHTS[q][2*Rt+1];ne+=C[Rt]*zn}let oe=Q+ne;if(K&1||K>13||K<4)throw new J;let pe=(13-K)/2,me=ce.SYMBOL_WIDEST[pe],de=9-me,rt=Ot.getRSSvalue(v,me,!0),Xe=Ot.getRSSvalue(C,de,!1),br=ce.EVEN_TOTAL_SUBSET[pe],Ci=ce.GSUM[pe],Rr=rt*br+Xe+Ci;return new ai(Rr,oe)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=Le.sum(new Int32Array(this.getOddCounts())),l=Le.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1;a>13?h=!0:a<4&&(u=!0);let f=!1,m=!1;l>13?m=!0:l<4&&(f=!0);let w=a+l-s,v=(a&1)==1,C=(l&1)==0;if(w==1)if(v){if(C)throw new J;h=!0}else{if(!C)throw new J;m=!0}else if(w==-1)if(v){if(C)throw new J;u=!0}else{if(!C)throw new J;f=!0}else if(w==0){if(v){if(!C)throw new J;a<l?(u=!0,m=!0):(h=!0,f=!0)}else if(C)throw new J}else throw new J;if(u){if(h)throw new J;ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new J;ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ce.SYMBOL_WIDEST=[7,5,4,3,1],ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ce.GSUM=[0,348,1388,2948,3988],ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ce.FINDER_PAT_A=0,ce.FINDER_PAT_B=1,ce.FINDER_PAT_C=2,ce.FINDER_PAT_D=3,ce.FINDER_PAT_E=4,ce.FINDER_PAT_F=5,ce.FINDER_PATTERN_SEQUENCES=[[ce.FINDER_PAT_A,ce.FINDER_PAT_A],[ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B],[ce.FINDER_PAT_A,ce.FINDER_PAT_C,ce.FINDER_PAT_B,ce.FINDER_PAT_D],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_C],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_D,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_D],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_E],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F]],ce.MAX_PAIRS=11;class ga extends ai{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class yt extends Cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){const u=this.decodePair(a,!1,s,l);yt.addOrTally(this.possibleLeftPairs,u),a.reverse();let h=this.decodePair(a,!0,s,l);yt.addOrTally(this.possibleRightPairs,h),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&yt.checkChecksum(f,m))return yt.constructResult(f,m)}throw new J}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),h=new j;for(let v=13-u.length;v>0;v--)h.append("0");h.append(u);let f=0;for(let v=0;v<13;v++){let C=h.charAt(v).charCodeAt(0)-48;f+=v&1?C:3*C}f=10-f%10,f===10&&(f=0),h.append(f.toString());let m=s.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Ke(h.toString(),null,0,[m[0],m[1],w[0],w[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let h=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,l,a,h),m=u==null?null:u.get(Z.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(h[0]+h[1])/2;a&&(C=s.getSize()-1-C),m.foundPossibleResultPoint(new Pe(C,l))}let w=this.decodeDataCharacter(s,f,!0),v=this.decodeDataCharacter(s,f,!1);return new ga(1597*w.getValue()+v.getValue(),w.getChecksumPortion()+4*v.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let ne=0;ne<u.length;ne++)u[ne]=0;if(l)Nt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{Nt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let ne=0,oe=u.length-1;ne<oe;ne++,oe--){let pe=u[ne];u[ne]=u[oe],u[oe]=pe}}let h=l?16:15,f=Le.sum(new Int32Array(u))/h,m=this.getOddCounts(),w=this.getEvenCounts(),v=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let ne=0;ne<u.length;ne++){let oe=u[ne]/f,pe=Math.floor(oe+.5);pe<1?pe=1:pe>8&&(pe=8);let me=Math.floor(ne/2);ne&1?(w[me]=pe,C[me]=oe-pe):(m[me]=pe,v[me]=oe-pe)}this.adjustOddEvenCounts(l,h);let P=0,B=0;for(let ne=m.length-1;ne>=0;ne--)B*=9,B+=m[ne],P+=m[ne];let q=0,K=0;for(let ne=w.length-1;ne>=0;ne--)q*=9,q+=w[ne],K+=w[ne];let Q=B+3*q;if(l){if(P&1||P>12||P<4)throw new J;let ne=(12-P)/2,oe=yt.OUTSIDE_ODD_WIDEST[ne],pe=9-oe,me=Ot.getRSSvalue(m,oe,!1),de=Ot.getRSSvalue(w,pe,!0),rt=yt.OUTSIDE_EVEN_TOTAL_SUBSET[ne],Xe=yt.OUTSIDE_GSUM[ne];return new ai(me*rt+de+Xe,Q)}else{if(K&1||K>10||K<4)throw new J;let ne=(10-K)/2,oe=yt.INSIDE_ODD_WIDEST[ne],pe=9-oe,me=Ot.getRSSvalue(m,oe,!0),de=Ot.getRSSvalue(w,pe,!1),rt=yt.INSIDE_ODD_TOTAL_SUBSET[ne],Xe=yt.INSIDE_GSUM[ne];return new ai(de*rt+me+Xe,Q)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),h=!1,f=0;for(;f<u&&(h=!s.get(f),a!==h);)f++;let m=0,w=f;for(let v=f;v<u;v++)if(s.get(v)!==h)l[m]++;else{if(m===3){if(Cn.isFinderPattern(l))return[w,v];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,h=!h}throw new J}parseFoundFinderPattern(s,a,l,u){let h=s.get(u[0]),f=u[0]-1;for(;f>=0&&h!==s.get(f);)f--;f++;const m=u[0]-f,w=this.getDecodeFinderCounters(),v=new Int32Array(w.length);b.arraycopy(w,0,v,1,w.length-1),v[0]=m;const C=this.parseFinderValue(v,yt.FINDER_PATTERNS);let P=f,B=u[1];return l&&(P=s.getSize()-1-P,B=s.getSize()-1-B),new fa(C,[f,u[1]],P,B,a)}adjustOddEvenCounts(s,a){let l=Le.sum(new Int32Array(this.getOddCounts())),u=Le.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1,m=!1,w=!1;s?(l>12?f=!0:l<4&&(h=!0),u>12?w=!0:u<4&&(m=!0)):(l>11?f=!0:l<5&&(h=!0),u>10?w=!0:u<4&&(m=!0));let v=l+u-a,C=(l&1)===(s?1:0),P=(u&1)===1;if(v===1)if(C){if(P)throw new J;f=!0}else{if(!P)throw new J;w=!0}else if(v===-1)if(C){if(P)throw new J;h=!0}else{if(!P)throw new J;m=!0}else if(v===0){if(C){if(!P)throw new J;l<u?(h=!0,w=!0):(f=!0,m=!0)}else if(P)throw new J}else throw new J;if(h){if(f)throw new J;Cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(w)throw new J;Cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}yt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],yt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],yt.OUTSIDE_GSUM=[0,161,961,2015,2715],yt.INSIDE_GSUM=[0,336,1036,1516],yt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],yt.INSIDE_ODD_WIDEST=[2,4,6,8],yt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hi extends Nt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;const l=s?s.get(Z.POSSIBLE_FORMATS):null,u=s&&s.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ee.EAN_13)||l.includes(Ee.UPC_A)||l.includes(Ee.EAN_8)||l.includes(Ee.UPC_E))&&this.readers.push(new Ks(s)),l.includes(Ee.CODE_39)&&this.readers.push(new St(u)),l.includes(Ee.CODE_128)&&this.readers.push(new xe),l.includes(Ee.ITF)&&this.readers.push(new Je),l.includes(Ee.RSS_14)&&this.readers.push(new yt),l.includes(Ee.RSS_EXPANDED)&&this.readers.push(new ce(this.verbose))):(this.readers.push(new Ks(s)),this.readers.push(new St),this.readers.push(new Ks(s)),this.readers.push(new xe),this.readers.push(new Je),this.readers.push(new yt),this.readers.push(new ce(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new J}reset(){this.readers.forEach(s=>s.reset())}}class u1 extends De{constructor(s=500,a){super(new Hi(a),s,a)}}class ut{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ot{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(s,a,l,u,h,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=h,this.ecBlocks=f;let m=0;const w=f.getECCodewords(),v=f.getECBlocks();for(let C of v)m+=C.getCount()*(C.getDataCodewords()+w);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new k;for(let l of et.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new et(1,10,10,8,8,new ut(5,new ot(1,3))),new et(2,12,12,10,10,new ut(7,new ot(1,5))),new et(3,14,14,12,12,new ut(10,new ot(1,8))),new et(4,16,16,14,14,new ut(12,new ot(1,12))),new et(5,18,18,16,16,new ut(14,new ot(1,18))),new et(6,20,20,18,18,new ut(18,new ot(1,22))),new et(7,22,22,20,20,new ut(20,new ot(1,30))),new et(8,24,24,22,22,new ut(24,new ot(1,36))),new et(9,26,26,24,24,new ut(28,new ot(1,44))),new et(10,32,32,14,14,new ut(36,new ot(1,62))),new et(11,36,36,16,16,new ut(42,new ot(1,86))),new et(12,40,40,18,18,new ut(48,new ot(1,114))),new et(13,44,44,20,20,new ut(56,new ot(1,144))),new et(14,48,48,22,22,new ut(68,new ot(1,174))),new et(15,52,52,24,24,new ut(42,new ot(2,102))),new et(16,64,64,14,14,new ut(56,new ot(2,140))),new et(17,72,72,16,16,new ut(36,new ot(4,92))),new et(18,80,80,18,18,new ut(48,new ot(4,114))),new et(19,88,88,20,20,new ut(56,new ot(4,144))),new et(20,96,96,22,22,new ut(68,new ot(4,174))),new et(21,104,104,24,24,new ut(56,new ot(6,136))),new et(22,120,120,18,18,new ut(68,new ot(6,175))),new et(23,132,132,20,20,new ut(62,new ot(8,163))),new et(24,144,144,22,22,new ut(62,new ot(8,156),new ot(2,155))),new et(25,8,18,6,16,new ut(7,new ot(1,5))),new et(26,8,32,6,14,new ut(11,new ot(1,10))),new et(27,12,26,10,24,new ut(14,new ot(1,16))),new et(28,12,36,10,16,new ut(18,new ot(1,22))),new et(29,16,36,14,16,new ut(24,new ot(1,32))),new et(30,16,48,14,22,new ut(28,new ot(1,49)))]}}et.VERSIONS=et.buildVersions();class pa{constructor(s){const a=s.getHeight();if(a<8||a>144||a&1)throw new k;this.version=pa.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new he(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const a=s.getHeight(),l=s.getWidth();return et.getVersionForDimensions(a,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const h=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let m=!1,w=!1,v=!1,C=!1;do if(l===h&&u===0&&!m)s[a++]=this.readCorner1(h,f)&255,l-=2,u+=2,m=!0;else if(l===h-2&&u===0&&f&3&&!w)s[a++]=this.readCorner2(h,f)&255,l-=2,u+=2,w=!0;else if(l===h+4&&u===2&&!(f&7)&&!v)s[a++]=this.readCorner3(h,f)&255,l-=2,u+=2,v=!0;else if(l===h-2&&u===0&&(f&7)===4&&!C)s[a++]=this.readCorner4(h,f)&255,l-=2,u+=2,C=!0;else{do l<h&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,h,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,h,f)&255),l+=2,u-=2;while(l<h&&u>=0);l+=3,u+=1}while(l<h||u<f);if(a!==this.version.getTotalCodewords())throw new k;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let h=0;return this.readModule(s-2,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s-2,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a,l,u)&&(h|=1),h<<=1,this.readModule(s,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s,a,l,u)&&(h|=1),h}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new E("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),f=a/u|0,m=l/h|0,w=f*u,v=m*h,C=new he(v,w);for(let P=0;P<f;++P){const B=P*u;for(let q=0;q<m;++q){const K=q*h;for(let Q=0;Q<u;++Q){const ne=P*(u+2)+1+Q,oe=B+Q;for(let pe=0;pe<h;++pe){const me=q*(h+2)+1+pe;if(s.get(me,ne)){const de=K+pe;C.set(de,oe)}}}}}return C}}class ma{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){const l=a.getECBlocks();let u=0;const h=l.getECBlocks();for(let Q of h)u+=Q.getCount();const f=new Array(u);let m=0;for(let Q of h)for(let ne=0;ne<Q.getCount();ne++){const oe=Q.getDataCodewords(),pe=l.getECCodewords()+oe;f[m++]=new ma(oe,new Uint8Array(pe))}const v=f[0].codewords.length-l.getECCodewords(),C=v-1;let P=0;for(let Q=0;Q<C;Q++)for(let ne=0;ne<m;ne++)f[ne].codewords[Q]=s[P++];const B=a.getVersionNumber()===24,q=B?8:m;for(let Q=0;Q<q;Q++)f[Q].codewords[v-1]=s[P++];const K=f[0].codewords.length;for(let Q=v;Q<K;Q++)for(let ne=0;ne<m;ne++){const oe=B?(ne+8)%m:ne,pe=B&&oe>7?Q-1:Q;f[oe].codewords[pe]=s[P++]}if(P!==s.length)throw new E;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cl{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new E(""+s);let a=0,l=this.bitOffset,u=this.byteOffset;const h=this.bytes;if(l>0){const f=8-l,m=s<f?s:f,w=f-m,v=255>>8-m<<w;a=(h[u]&v)>>w,s-=m,l+=m,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|h[u]&255,u++,s-=8;if(s>0){const f=8-s,m=255>>f<<f;a=a<<s|(h[u]&m)>>f,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(rn||(rn={}));class Wi{static decode(s){const a=new cl(s),l=new j,u=new j,h=new Array;let f=rn.ASCII_ENCODE;do if(f===rn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case rn.C40_ENCODE:this.decodeC40Segment(a,l);break;case rn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(a,l,h);break;default:throw new k}f=rn.ASCII_ENCODE}while(f!==rn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new Kn(s,l.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let h=s.readBits(8);if(h===0)throw new k;if(h<=128)return u&&(h+=128),a.append(String.fromCharCode(h-1)),rn.ASCII_ENCODE;if(h===129)return rn.PAD_ENCODE;if(h<=229){const f=h-130;f<10&&a.append("0"),a.append(""+f)}else switch(h){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(h!==254||s.available()!==0)throw new k;break}}while(s.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1;const u=[];let h=0;do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let m=0;m<3;m++){const w=u[m];switch(h){case 0:if(w<3)h=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),h=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),h=0;break;default:throw new k}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],h=0;do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let m=0;m<3;m++){const w=u[m];switch(h){case 0:if(w<3)h=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),h=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v),h=0}else throw new k;break;default:throw new k}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){const l=[];do{if(s.available()===8)return;const u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let h=0;h<3;h++){const f=l[h];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new k;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,h=Math.floor(u/1600);l[0]=h,u-=h*1600,h=Math.floor(u/40),l[1]=h,l[2]=u-h*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){const h=8-s.getBitOffset();h!==8&&s.readBits(h);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset();const h=this.unrandomize255State(s.readBits(8),u++);let f;if(h===0?f=s.available()/8|0:h<250?f=h:f=250*(h-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new k;const m=new Uint8Array(f);for(let w=0;w<f;w++){if(s.available()<8)throw new k;m[w]=this.unrandomize255State(s.readBits(8),u++)}l.push(m);try{a.append(X.decode(m,$.ISO88591))}catch(w){throw new An("Platform does not support required encoding: "+w.message)}}static unrandomize255State(s,a){const l=149*a%255+1,u=s-l;return u>=0?u:u+256}}Wi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wi.TEXT_SHIFT2_SET_CHARS=Wi.C40_SHIFT2_SET_CHARS,Wi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class h1{constructor(){this.rsDecoder=new Vn($e.DATA_MATRIX_FIELD_256)}decode(s){const a=new pa(s),l=a.getVersion(),u=a.readCodewords(),h=ma.getDataBlocks(u,l);let f=0;for(let v of h)f+=v.getNumDataCodewords();const m=new Uint8Array(f),w=h.length;for(let v=0;v<w;v++){const C=h[v],P=C.getCodewords(),B=C.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)m[q*w+v]=P[q]}return Wi.decode(m)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new I}for(let u=0;u<a;u++)s[u]=l[u]}}class Gt{constructor(s){this.image=s,this.rectangleDetector=new ur(this.image)}detect(){const s=this.rectangleDetector.detect();let a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new J;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],h=a[2],f=a[3];let m=this.transitionsBetween(l,f)+1,w=this.transitionsBetween(h,f)+1;(m&1)===1&&(m+=1),(w&1)===1&&(w+=1),4*m<7*w&&4*w<7*m&&(m=w=Math.max(m,w));let v=Gt.sampleGrid(this.image,l,u,h,f,m,w);return new qs(v,[l,u,h,f])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),h=(a.getY()-s.getY())/(l+1);return new Pe(s.getX()+u,s.getY()+h)}static moveAway(s,a,l){let u=s.getX(),h=s.getY();return u<a?u-=1:u+=1,h<l?h-=1:h+=1,new Pe(u,h)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],h=s[2],f=this.transitionsBetween(a,l),m=this.transitionsBetween(l,u),w=this.transitionsBetween(u,h),v=this.transitionsBetween(h,a),C=f,P=[h,a,l,u];return C>m&&(C=m,P[0]=a,P[1]=l,P[2]=u,P[3]=h),C>w&&(C=w,P[0]=l,P[1]=u,P[2]=h,P[3]=a),C>v&&(P[0]=u,P[1]=h,P[2]=a,P[3]=l),P}detectSolid2(s){let a=s[0],l=s[1],u=s[2],h=s[3],f=this.transitionsBetween(a,h),m=Gt.shiftPoint(l,u,(f+1)*4),w=Gt.shiftPoint(u,l,(f+1)*4),v=this.transitionsBetween(m,a),C=this.transitionsBetween(w,h);return v<C?(s[0]=a,s[1]=l,s[2]=u,s[3]=h):(s[0]=l,s[1]=u,s[2]=h,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],h=s[3],f=this.transitionsBetween(a,h),m=this.transitionsBetween(l,h),w=Gt.shiftPoint(a,l,(m+1)*4),v=Gt.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(w,h),m=this.transitionsBetween(v,h);let C=new Pe(h.getX()+(u.getX()-l.getX())/(f+1),h.getY()+(u.getY()-l.getY())/(f+1)),P=new Pe(h.getX()+(a.getX()-l.getX())/(m+1),h.getY()+(a.getY()-l.getY())/(m+1));if(!this.isValid(C))return this.isValid(P)?P:null;if(!this.isValid(P))return C;let B=this.transitionsBetween(w,C)+this.transitionsBetween(v,C),q=this.transitionsBetween(w,P)+this.transitionsBetween(v,P);return B>q?C:P}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],h=s[3],f=this.transitionsBetween(a,h)+1,m=this.transitionsBetween(u,h)+1,w=Gt.shiftPoint(a,l,m*4),v=Gt.shiftPoint(u,l,f*4);f=this.transitionsBetween(w,h)+1,m=this.transitionsBetween(v,h)+1,(f&1)===1&&(f+=1),(m&1)===1&&(m+=1);let C=(a.getX()+l.getX()+u.getX()+h.getX())/4,P=(a.getY()+l.getY()+u.getY()+h.getY())/4;a=Gt.moveAway(a,C,P),l=Gt.moveAway(l,C,P),u=Gt.moveAway(u,C,P),h=Gt.moveAway(h,C,P);let B,q;return w=Gt.shiftPoint(a,l,m*4),w=Gt.shiftPoint(w,h,f*4),B=Gt.shiftPoint(l,a,m*4),B=Gt.shiftPoint(B,u,f*4),v=Gt.shiftPoint(u,h,m*4),v=Gt.shiftPoint(v,l,f*4),q=Gt.shiftPoint(h,u,m*4),q=Gt.shiftPoint(q,a,f*4),[w,B,v,q]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,h,f,m){return Qn.getInstance().sampleGrid(s,f,m,.5,.5,f-.5,.5,f-.5,m-.5,.5,m-.5,a.getX(),a.getY(),h.getX(),h.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),h=Math.trunc(a.getX()),f=Math.trunc(a.getY()),m=Math.abs(f-u)>Math.abs(h-l);if(m){let Q=l;l=u,u=Q,Q=h,h=f,f=Q}let w=Math.abs(h-l),v=Math.abs(f-u),C=-w/2,P=u<f?1:-1,B=l<h?1:-1,q=0,K=this.image.get(m?u:l,m?l:u);for(let Q=l,ne=u;Q!==h;Q+=B){let oe=this.image.get(m?ne:Q,m?Q:ne);if(oe!==K&&(q++,K=oe),C+=v,C>0){if(ne===f)break;ne+=P,C-=w}}return q}}class Ei{constructor(){this.decoder=new h1}decode(s,a=null){let l,u;if(a!=null&&a.has(Z.PURE_BARCODE)){const v=Ei.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(v),u=Ei.NO_POINTS}else{const v=new Gt(s.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),u=v.getPoints()}const h=l.getRawBytes(),f=new Ke(l.getText(),h,8*h.length,u,Ee.DATA_MATRIX,b.currentTimeMillis()),m=l.getByteSegments();m!=null&&f.putMetadata(Et.BYTE_SEGMENTS,m);const w=l.getECLevel();return w!=null&&f.putMetadata(Et.ERROR_CORRECTION_LEVEL,w),f}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a==null||l==null)throw new J;const u=this.moduleSize(a,s);let h=a[1];const f=l[1];let m=a[0];const v=(l[0]-m+1)/u,C=(f-h+1)/u;if(v<=0||C<=0)throw new J;const P=u/2;h+=P,m+=P;const B=new he(v,C);for(let q=0;q<C;q++){const K=h+q*u;for(let Q=0;Q<v;Q++)s.get(m+Q*u,K)&&B.set(Q,q)}return B}static moduleSize(s,a){const l=a.getWidth();let u=s[0];const h=s[1];for(;u<l&&a.get(u,h);)u++;if(u===l)throw new J;const f=u-s[0];if(f===0)throw new J;return f}}Ei.NO_POINTS=[];class d1 extends De{constructor(s=500){super(new Ei,s)}}var Tr;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(Tr||(Tr={}));class nt{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,nt.FOR_BITS.set(l,this),nt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return nt.L;case"M":return nt.M;case"Q":return nt.Q;case"H":return nt.H;default:throw new x(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof nt))return!1;const a=s;return this.value===a.value}static forBits(s){if(s<0||s>=nt.FOR_BITS.size)throw new E;return nt.FOR_BITS.get(s)}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.L=new nt(Tr.L,"L",1),nt.M=new nt(Tr.M,"M",0),nt.Q=new nt(Tr.Q,"Q",3),nt.H=new nt(Tr.H,"H",2);class cn{constructor(s){this.errorCorrectionLevel=nt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return O.bitCount(s^a)}static decodeFormatInformation(s,a){const l=cn.doDecodeFormatInformation(s,a);return l!==null?l:cn.doDecodeFormatInformation(s^cn.FORMAT_INFO_MASK_QR,a^cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const h of cn.FORMAT_INFO_DECODE_LOOKUP){const f=h[0];if(f===s||f===a)return new cn(h[1]);let m=cn.numBitsDiffering(s,f);m<l&&(u=h[1],l=m),s!==a&&(m=cn.numBitsDiffering(a,f),m<l&&(u=h[1],l=m))}return l<=3?new cn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof cn))return!1;const a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}cn.FORMAT_INFO_MASK_QR=21522,cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class te{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const a=this.ecBlocks;for(const l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const h=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const m of f)u+=m.getCount()*(m.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new k;try{return this.getVersionForNumber((s-17)/4)}catch{throw new k}}static getVersionForNumber(s){if(s<1||s>40)throw new E;return _e.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<_e.VERSION_DECODE_INFO.length;u++){const h=_e.VERSION_DECODE_INFO[u];if(h===s)return _e.getVersionForNumber(u+7);const f=cn.numBitsDiffering(s,h);f<a&&(l=u+7,a=f)}return a<=3?_e.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),a=new he(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const h=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,h,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new te(7,new H(1,19)),new te(10,new H(1,16)),new te(13,new H(1,13)),new te(17,new H(1,9))),new _e(2,Int32Array.from([6,18]),new te(10,new H(1,34)),new te(16,new H(1,28)),new te(22,new H(1,22)),new te(28,new H(1,16))),new _e(3,Int32Array.from([6,22]),new te(15,new H(1,55)),new te(26,new H(1,44)),new te(18,new H(2,17)),new te(22,new H(2,13))),new _e(4,Int32Array.from([6,26]),new te(20,new H(1,80)),new te(18,new H(2,32)),new te(26,new H(2,24)),new te(16,new H(4,9))),new _e(5,Int32Array.from([6,30]),new te(26,new H(1,108)),new te(24,new H(2,43)),new te(18,new H(2,15),new H(2,16)),new te(22,new H(2,11),new H(2,12))),new _e(6,Int32Array.from([6,34]),new te(18,new H(2,68)),new te(16,new H(4,27)),new te(24,new H(4,19)),new te(28,new H(4,15))),new _e(7,Int32Array.from([6,22,38]),new te(20,new H(2,78)),new te(18,new H(4,31)),new te(18,new H(2,14),new H(4,15)),new te(26,new H(4,13),new H(1,14))),new _e(8,Int32Array.from([6,24,42]),new te(24,new H(2,97)),new te(22,new H(2,38),new H(2,39)),new te(22,new H(4,18),new H(2,19)),new te(26,new H(4,14),new H(2,15))),new _e(9,Int32Array.from([6,26,46]),new te(30,new H(2,116)),new te(22,new H(3,36),new H(2,37)),new te(20,new H(4,16),new H(4,17)),new te(24,new H(4,12),new H(4,13))),new _e(10,Int32Array.from([6,28,50]),new te(18,new H(2,68),new H(2,69)),new te(26,new H(4,43),new H(1,44)),new te(24,new H(6,19),new H(2,20)),new te(28,new H(6,15),new H(2,16))),new _e(11,Int32Array.from([6,30,54]),new te(20,new H(4,81)),new te(30,new H(1,50),new H(4,51)),new te(28,new H(4,22),new H(4,23)),new te(24,new H(3,12),new H(8,13))),new _e(12,Int32Array.from([6,32,58]),new te(24,new H(2,92),new H(2,93)),new te(22,new H(6,36),new H(2,37)),new te(26,new H(4,20),new H(6,21)),new te(28,new H(7,14),new H(4,15))),new _e(13,Int32Array.from([6,34,62]),new te(26,new H(4,107)),new te(22,new H(8,37),new H(1,38)),new te(24,new H(8,20),new H(4,21)),new te(22,new H(12,11),new H(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new te(30,new H(3,115),new H(1,116)),new te(24,new H(4,40),new H(5,41)),new te(20,new H(11,16),new H(5,17)),new te(24,new H(11,12),new H(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new te(22,new H(5,87),new H(1,88)),new te(24,new H(5,41),new H(5,42)),new te(30,new H(5,24),new H(7,25)),new te(24,new H(11,12),new H(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new te(24,new H(5,98),new H(1,99)),new te(28,new H(7,45),new H(3,46)),new te(24,new H(15,19),new H(2,20)),new te(30,new H(3,15),new H(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new te(28,new H(1,107),new H(5,108)),new te(28,new H(10,46),new H(1,47)),new te(28,new H(1,22),new H(15,23)),new te(28,new H(2,14),new H(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new te(30,new H(5,120),new H(1,121)),new te(26,new H(9,43),new H(4,44)),new te(28,new H(17,22),new H(1,23)),new te(28,new H(2,14),new H(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new te(28,new H(3,113),new H(4,114)),new te(26,new H(3,44),new H(11,45)),new te(26,new H(17,21),new H(4,22)),new te(26,new H(9,13),new H(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new te(28,new H(3,107),new H(5,108)),new te(26,new H(3,41),new H(13,42)),new te(30,new H(15,24),new H(5,25)),new te(28,new H(15,15),new H(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new te(28,new H(4,116),new H(4,117)),new te(26,new H(17,42)),new te(28,new H(17,22),new H(6,23)),new te(30,new H(19,16),new H(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new te(28,new H(2,111),new H(7,112)),new te(28,new H(17,46)),new te(30,new H(7,24),new H(16,25)),new te(24,new H(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new te(30,new H(4,121),new H(5,122)),new te(28,new H(4,47),new H(14,48)),new te(30,new H(11,24),new H(14,25)),new te(30,new H(16,15),new H(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new te(30,new H(6,117),new H(4,118)),new te(28,new H(6,45),new H(14,46)),new te(30,new H(11,24),new H(16,25)),new te(30,new H(30,16),new H(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new te(26,new H(8,106),new H(4,107)),new te(28,new H(8,47),new H(13,48)),new te(30,new H(7,24),new H(22,25)),new te(30,new H(22,15),new H(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new te(28,new H(10,114),new H(2,115)),new te(28,new H(19,46),new H(4,47)),new te(28,new H(28,22),new H(6,23)),new te(30,new H(33,16),new H(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new te(30,new H(8,122),new H(4,123)),new te(28,new H(22,45),new H(3,46)),new te(30,new H(8,23),new H(26,24)),new te(30,new H(12,15),new H(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new te(30,new H(3,117),new H(10,118)),new te(28,new H(3,45),new H(23,46)),new te(30,new H(4,24),new H(31,25)),new te(30,new H(11,15),new H(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new te(30,new H(7,116),new H(7,117)),new te(28,new H(21,45),new H(7,46)),new te(30,new H(1,23),new H(37,24)),new te(30,new H(19,15),new H(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new te(30,new H(5,115),new H(10,116)),new te(28,new H(19,47),new H(10,48)),new te(30,new H(15,24),new H(25,25)),new te(30,new H(23,15),new H(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new te(30,new H(13,115),new H(3,116)),new te(28,new H(2,46),new H(29,47)),new te(30,new H(42,24),new H(1,25)),new te(30,new H(23,15),new H(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new te(30,new H(17,115)),new te(28,new H(10,46),new H(23,47)),new te(30,new H(10,24),new H(35,25)),new te(30,new H(19,15),new H(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new te(30,new H(17,115),new H(1,116)),new te(28,new H(14,46),new H(21,47)),new te(30,new H(29,24),new H(19,25)),new te(30,new H(11,15),new H(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new te(30,new H(13,115),new H(6,116)),new te(28,new H(14,46),new H(23,47)),new te(30,new H(44,24),new H(7,25)),new te(30,new H(59,16),new H(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new te(30,new H(12,121),new H(7,122)),new te(28,new H(12,47),new H(26,48)),new te(30,new H(39,24),new H(14,25)),new te(30,new H(22,15),new H(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new te(30,new H(6,121),new H(14,122)),new te(28,new H(6,47),new H(34,48)),new te(30,new H(46,24),new H(10,25)),new te(30,new H(2,15),new H(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new te(30,new H(17,122),new H(4,123)),new te(28,new H(29,46),new H(14,47)),new te(30,new H(49,24),new H(10,25)),new te(30,new H(24,15),new H(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new te(30,new H(4,122),new H(18,123)),new te(28,new H(13,46),new H(32,47)),new te(30,new H(48,24),new H(14,25)),new te(30,new H(42,15),new H(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new te(30,new H(20,117),new H(4,118)),new te(28,new H(40,47),new H(7,48)),new te(30,new H(43,24),new H(22,25)),new te(30,new H(10,15),new H(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new te(30,new H(19,118),new H(6,119)),new te(28,new H(18,47),new H(31,48)),new te(30,new H(34,24),new H(34,25)),new te(30,new H(20,15),new H(61,16)))];var Kt;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(Kt||(Kt={}));class kn{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}kn.values=new Map([[Kt.DATA_MASK_000,new kn(Kt.DATA_MASK_000,(N,s)=>(N+s&1)===0)],[Kt.DATA_MASK_001,new kn(Kt.DATA_MASK_001,(N,s)=>(N&1)===0)],[Kt.DATA_MASK_010,new kn(Kt.DATA_MASK_010,(N,s)=>s%3===0)],[Kt.DATA_MASK_011,new kn(Kt.DATA_MASK_011,(N,s)=>(N+s)%3===0)],[Kt.DATA_MASK_100,new kn(Kt.DATA_MASK_100,(N,s)=>(Math.floor(N/2)+Math.floor(s/3)&1)===0)],[Kt.DATA_MASK_101,new kn(Kt.DATA_MASK_101,(N,s)=>N*s%6===0)],[Kt.DATA_MASK_110,new kn(Kt.DATA_MASK_110,(N,s)=>N*s%6<3)],[Kt.DATA_MASK_111,new kn(Kt.DATA_MASK_111,(N,s)=>(N+s+N*s%3&1)===0)]]);class ya{constructor(s){const a=s.getHeight();if(a<21||(a&3)!==1)throw new k;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let h=0;h<6;h++)s=this.copyBit(h,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let h=5;h>=0;h--)s=this.copyBit(8,h,s);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let h=a-1;h>=u;h--)l=this.copyBit(8,h,l);for(let h=a-8;h<a;h++)l=this.copyBit(h,8,l);if(this.parsedFormatInfo=cn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return _e.getVersionForNumber(a);let l=0;const u=s-11;for(let f=5;f>=0;f--)for(let m=s-9;m>=u;m--)l=this.copyBit(m,f,l);let h=_e.decodeVersionInformation(l);if(h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;l=0;for(let f=5;f>=0;f--)for(let m=s-9;m>=u;m--)l=this.copyBit(f,m,l);if(h=_e.decodeVersionInformation(l),h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;throw new k}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),a=this.readVersion(),l=kn.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const h=a.buildFunctionPattern();let f=!0;const m=new Uint8Array(a.getTotalCodewords());let w=0,v=0,C=0;for(let P=u-1;P>0;P-=2){P===6&&P--;for(let B=0;B<u;B++){const q=f?u-1-B:B;for(let K=0;K<2;K++)h.get(P-K,q)||(C++,v<<=1,this.bitMatrix.get(P-K,q)&&(v|=1),C===8&&(m[w++]=v,C=0,v=0))}f=!f}if(w!==a.getTotalCodewords())throw new k;return m}remask(){if(this.parsedFormatInfo===null)return;const s=kn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,h=s.getHeight();u<h;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class Fc{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new E;const u=a.getECBlocksForLevel(l);let h=0;const f=u.getECBlocks();for(const K of f)h+=K.getCount();const m=new Array(h);let w=0;for(const K of f)for(let Q=0;Q<K.getCount();Q++){const ne=K.getDataCodewords(),oe=u.getECCodewordsPerBlock()+ne;m[w++]=new Fc(ne,new Uint8Array(oe))}const v=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==v;)C--;C++;const P=v-u.getECCodewordsPerBlock();let B=0;for(let K=0;K<P;K++)for(let Q=0;Q<w;Q++)m[Q].codewords[K]=s[B++];for(let K=C;K<w;K++)m[K].codewords[P]=s[B++];const q=m[0].codewords.length;for(let K=P;K<q;K++)for(let Q=0;Q<w;Q++){const ne=Q<C?K:K+1;m[Q].codewords[ne]=s[B++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hr;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(hr||(hr={}));class Me{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,Me.FOR_BITS.set(u,this),Me.FOR_VALUE.set(s,this)}static forBits(s){const a=Me.FOR_BITS.get(s);if(a===void 0)throw new E;return a}getCharacterCountBits(s){const a=s.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Me))return!1;const a=s;return this.value===a.value}toString(){return this.stringValue}}Me.FOR_BITS=new Map,Me.FOR_VALUE=new Map,Me.TERMINATOR=new Me(hr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Me.NUMERIC=new Me(hr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Me.ALPHANUMERIC=new Me(hr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Me.STRUCTURED_APPEND=new Me(hr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Me.BYTE=new Me(hr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Me.ECI=new Me(hr.ECI,"ECI",Int32Array.from([0,0,0]),7),Me.KANJI=new Me(hr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Me.FNC1_FIRST_POSITION=new Me(hr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Me.FNC1_SECOND_POSITION=new Me(hr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Me.HANZI=new Me(hr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Lt{static decode(s,a,l,u){const h=new cl(s);let f=new j;const m=new Array;let w=-1,v=-1;try{let C=null,P=!1,B;do{if(h.available()<4)B=Me.TERMINATOR;else{const q=h.readBits(4);B=Me.forBits(q)}switch(B){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:P=!0;break;case Me.STRUCTURED_APPEND:if(h.available()<16)throw new k;w=h.readBits(8),v=h.readBits(8);break;case Me.ECI:const q=Lt.parseECIValue(h);if(C=L.getCharacterSetECIByValue(q),C===null)throw new k;break;case Me.HANZI:const K=h.readBits(4),Q=h.readBits(B.getCharacterCountBits(a));K===Lt.GB2312_SUBSET&&Lt.decodeHanziSegment(h,f,Q);break;default:const ne=h.readBits(B.getCharacterCountBits(a));switch(B){case Me.NUMERIC:Lt.decodeNumericSegment(h,f,ne);break;case Me.ALPHANUMERIC:Lt.decodeAlphanumericSegment(h,f,ne,P);break;case Me.BYTE:Lt.decodeByteSegment(h,f,ne,C,m,u);break;case Me.KANJI:Lt.decodeKanjiSegment(h,f,ne);break;default:throw new k}break}}while(B!==Me.TERMINATOR)}catch{throw new k}return new Kn(s,f.toString(),m.length===0?null:m,l===null?null:l.toString(),w,v)}static decodeHanziSegment(s,a,l){if(l*13>s.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const f=s.readBits(13);let m=f/96<<8&4294967295|f%96;m<959?m+=41377:m+=42657,u[h]=m>>8&255,u[h+1]=m&255,h+=2,l--}try{a.append(X.decode(u,$.GB2312))}catch(f){throw new k(f)}}static decodeKanjiSegment(s,a,l){if(l*13>s.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const f=s.readBits(13);let m=f/192<<8&4294967295|f%192;m<7936?m+=33088:m+=49472,u[h]=m>>8,u[h+1]=m,h+=2,l--}try{a.append(X.decode(u,$.SHIFT_JIS))}catch(f){throw new k(f)}}static decodeByteSegment(s,a,l,u,h,f){if(8*l>s.available())throw new k;const m=new Uint8Array(l);for(let v=0;v<l;v++)m[v]=s.readBits(8);let w;u===null?w=$.guessEncoding(m,f):w=u.getName();try{a.append(X.decode(m,w))}catch(v){throw new k(v)}h.push(m)}static toAlphaNumericChar(s){if(s>=Lt.ALPHANUMERIC_CHARS.length)throw new k;return Lt.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,a,l,u){const h=a.length();for(;l>1;){if(s.available()<11)throw new k;const f=s.readBits(11);a.append(Lt.toAlphaNumericChar(Math.floor(f/45))),a.append(Lt.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(s.available()<6)throw new k;a.append(Lt.toAlphaNumericChar(s.readBits(6)))}if(u)for(let f=h;f<a.length();f++)a.charAt(f)==="%"&&(f<a.length()-1&&a.charAt(f+1)==="%"?a.deleteCharAt(f+1):a.setCharAt(f,""))}static decodeNumericSegment(s,a,l){for(;l>=3;){if(s.available()<10)throw new k;const u=s.readBits(10);if(u>=1e3)throw new k;a.append(Lt.toAlphaNumericChar(Math.floor(u/100))),a.append(Lt.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Lt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(s.available()<7)throw new k;const u=s.readBits(7);if(u>=100)throw new k;a.append(Lt.toAlphaNumericChar(Math.floor(u/10))),a.append(Lt.toAlphaNumericChar(u%10))}else if(l===1){if(s.available()<4)throw new k;const u=s.readBits(4);if(u>=10)throw new k;a.append(Lt.toAlphaNumericChar(u))}}static parseECIValue(s){const a=s.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=s.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=s.readBits(16);return(a&31)<<16&4294967295|l}throw new k}}Lt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Lt.GB2312_SUBSET=1;class Wh{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const a=s[0];s[0]=s[2],s[2]=a}}class f1{constructor(){this.rsDecoder=new Vn($e.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(he.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){const l=new ya(s);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(h){u=h}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const h=this.decodeBitMatrixParser(l,a);return h.setOther(new Wh(!0)),h}catch(h){throw u!==null?u:h}}decodeBitMatrixParser(s,a){const l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),h=s.readCodewords(),f=Fc.getDataBlocks(h,l,u);let m=0;for(const C of f)m+=C.getNumDataCodewords();const w=new Uint8Array(m);let v=0;for(const C of f){const P=C.getCodewords(),B=C.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)w[v++]=P[q]}return Lt.decode(w,l,u,a)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new I}for(let u=0;u<a;u++)s[u]=l[u]}}class vs extends Pe{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=(this.getX()+a)/2,h=(this.getY()+s)/2,f=(this.estimatedModuleSize+l)/2;return new vs(u,h,f)}}class Ur{constructor(s,a,l,u,h,f,m){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=h,this.moduleSize=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,a=this.height,l=this.width,u=s+l,h=this.startY+a/2,f=new Int32Array(3),m=this.image;for(let w=0;w<a;w++){const v=h+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=s;for(;C<u&&!m.get(C,v);)C++;let P=0;for(;C<u;){if(m.get(C,v))if(P===1)f[1]++;else if(P===2){if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,v,C);if(B!==null)return B}f[0]=f[2],f[1]=1,f[2]=0,P=1}else f[++P]++;else P===1&&P++,f[P]++;C++}if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,v,u);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){const h=this.image,f=h.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let w=s;for(;w>=0&&h.get(a,w)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&!h.get(a,w)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=s+1;w<f&&h.get(a,w)&&m[1]<=l;)m[1]++,w++;if(w===f||m[1]>l)return NaN;for(;w<f&&!h.get(a,w)&&m[2]<=l;)m[2]++,w++;if(m[2]>l)return NaN;const v=m[0]+m[1]+m[2];return 5*Math.abs(v-u)>=2*u?NaN:this.foundPatternCross(m)?Ur.centerFromEnd(m,w):NaN}handlePossibleCenter(s,a,l){const u=s[0]+s[1]+s[2],h=Ur.centerFromEnd(s,l),f=this.crossCheckVertical(a,h,2*s[1],u);if(!isNaN(f)){const m=(s[0]+s[1]+s[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(m,f,h))return v.combineEstimate(f,h,m);const w=new vs(h,f,m);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class ul extends Pe{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=this.count+1,h=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,m=(this.count*this.estimatedModuleSize+l)/u;return new ul(h,f,m,u)}}class Gh{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class un{constructor(s,a){this.image=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const a=s!=null&&s.get(Z.TRY_HARDER)!==void 0,l=s!=null&&s.get(Z.PURE_BARCODE)!==void 0,u=this.image,h=u.getHeight(),f=u.getWidth();let m=Math.floor(3*h/(4*un.MAX_MODULES));(m<un.MIN_SKIP||a)&&(m=un.MIN_SKIP);let w=!1;const v=new Int32Array(5);for(let P=m-1;P<h&&!w;P+=m){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let B=0;for(let q=0;q<f;q++)if(u.get(q,P))(B&1)===1&&B++,v[B]++;else if(B&1)v[B]++;else if(B===4)if(un.foundPatternCross(v)){if(this.handlePossibleCenter(v,P,q,l)===!0)if(m=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>v[2]&&(P+=Q-v[2]-m,q=f-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,B=3;continue}B=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,B=3;else v[++B]++;un.foundPatternCross(v)&&this.handlePossibleCenter(v,P,f,l)===!0&&(m=v[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Pe.orderBestPatterns(C),new Gh(C)}static centerFromEnd(s,a){return a-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let a=0;for(let h=0;h<5;h++){const f=s[h];if(f===0)return!1;a+=f}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-s[0])<u&&Math.abs(l-s[1])<u&&Math.abs(3*l-s[2])<3*u&&Math.abs(l-s[3])<u&&Math.abs(l-s[4])<u}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,a,l,u){const h=this.getCrossCheckStateCount();let f=0;const m=this.image;for(;s>=f&&a>=f&&m.get(a-f,s-f);)h[2]++,f++;if(s<f||a<f)return!1;for(;s>=f&&a>=f&&!m.get(a-f,s-f)&&h[1]<=l;)h[1]++,f++;if(s<f||a<f||h[1]>l)return!1;for(;s>=f&&a>=f&&m.get(a-f,s-f)&&h[0]<=l;)h[0]++,f++;if(h[0]>l)return!1;const w=m.getHeight(),v=m.getWidth();for(f=1;s+f<w&&a+f<v&&m.get(a+f,s+f);)h[2]++,f++;if(s+f>=w||a+f>=v)return!1;for(;s+f<w&&a+f<v&&!m.get(a+f,s+f)&&h[3]<l;)h[3]++,f++;if(s+f>=w||a+f>=v||h[3]>=l)return!1;for(;s+f<w&&a+f<v&&m.get(a+f,s+f)&&h[4]<l;)h[4]++,f++;if(h[4]>=l)return!1;const C=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(C-u)<2*u&&un.foundPatternCross(h)}crossCheckVertical(s,a,l,u){const h=this.image,f=h.getHeight(),m=this.getCrossCheckStateCount();let w=s;for(;w>=0&&h.get(a,w);)m[2]++,w--;if(w<0)return NaN;for(;w>=0&&!h.get(a,w)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&h.get(a,w)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=s+1;w<f&&h.get(a,w);)m[2]++,w++;if(w===f)return NaN;for(;w<f&&!h.get(a,w)&&m[3]<l;)m[3]++,w++;if(w===f||m[3]>=l)return NaN;for(;w<f&&h.get(a,w)&&m[4]<l;)m[4]++,w++;if(m[4]>=l)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-u)>=2*u?NaN:un.foundPatternCross(m)?un.centerFromEnd(m,w):NaN}crossCheckHorizontal(s,a,l,u){const h=this.image,f=h.getWidth(),m=this.getCrossCheckStateCount();let w=s;for(;w>=0&&h.get(w,a);)m[2]++,w--;if(w<0)return NaN;for(;w>=0&&!h.get(w,a)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&h.get(w,a)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=s+1;w<f&&h.get(w,a);)m[2]++,w++;if(w===f)return NaN;for(;w<f&&!h.get(w,a)&&m[3]<l;)m[3]++,w++;if(w===f||m[3]>=l)return NaN;for(;w<f&&h.get(w,a)&&m[4]<l;)m[4]++,w++;if(m[4]>=l)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-u)>=u?NaN:un.foundPatternCross(m)?un.centerFromEnd(m,w):NaN}handlePossibleCenter(s,a,l,u){const h=s[0]+s[1]+s[2]+s[3]+s[4];let f=un.centerFromEnd(s,l),m=this.crossCheckVertical(a,Math.floor(f),s[2],h);if(!isNaN(m)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(m),s[2],h),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(m),Math.floor(f),s[2],h)))){const w=h/7;let v=!1;const C=this.possibleCenters;for(let P=0,B=C.length;P<B;P++){const q=C[P];if(q.aboutEquals(w,m,f)){C[P]=q.combineEstimate(m,f,w),v=!0;break}}if(!v){const P=new ul(f,m,w);C.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=un.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,a=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=un.CENTER_QUORUM&&(s++,a+=f.getEstimatedModuleSize());if(s<3)return!1;const u=a/l;let h=0;for(const f of this.possibleCenters)h+=Math.abs(f.getEstimatedModuleSize()-u);return h<=.05*a}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new J;const a=this.possibleCenters;let l;if(s>3){let u=0,h=0;for(const w of this.possibleCenters){const v=w.getEstimatedModuleSize();u+=v,h+=v*v}l=u/s;let f=Math.sqrt(h/s-l*l);a.sort((w,v)=>{const C=Math.abs(v.getEstimatedModuleSize()-l),P=Math.abs(w.getEstimatedModuleSize()-l);return C<P?-1:C>P?1:0});const m=Math.max(.2*l,f);for(let w=0;w<a.length&&a.length>3;w++){const v=a[w];Math.abs(v.getEstimatedModuleSize()-l)>m&&(a.splice(w,1),w--)}}if(a.length>3){let u=0;for(const h of a)u+=h.getEstimatedModuleSize();l=u/a.length,a.sort((h,f)=>{if(f.getCount()===h.getCount()){const m=Math.abs(f.getEstimatedModuleSize()-l),w=Math.abs(h.getEstimatedModuleSize()-l);return m<w?1:m>w?-1:0}else return f.getCount()-h.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}un.CENTER_QUORUM=2,un.MIN_SKIP=3,un.MAX_MODULES=57;class li{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(Z.NEED_RESULT_POINT_CALLBACK);const l=new un(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),h=this.calculateModuleSize(a,l,u);if(h<1)throw new J("No pattern found in proccess finder.");const f=li.computeDimension(a,l,u,h),m=_e.getProvisionalVersionForDimension(f),w=m.getDimensionForVersion()-7;let v=null;if(m.getAlignmentPatternCenters().length>0){const q=l.getX()-a.getX()+u.getX(),K=l.getY()-a.getY()+u.getY(),Q=1-3/w,ne=Math.floor(a.getX()+Q*(q-a.getX())),oe=Math.floor(a.getY()+Q*(K-a.getY()));for(let pe=4;pe<=16;pe<<=1)try{v=this.findAlignmentInRegion(h,ne,oe,pe);break}catch(me){if(!(me instanceof J))throw me}}const C=li.createTransform(a,l,u,v,f),P=li.sampleGrid(this.image,C,f);let B;return v===null?B=[u,a,l]:B=[u,a,l,v],new qs(P,B)}static createTransform(s,a,l,u,h){const f=h-3.5;let m,w,v,C;return u!==null?(m=u.getX(),w=u.getY(),v=f-3,C=v):(m=a.getX()-s.getX()+l.getX(),w=a.getY()-s.getY()+l.getY(),v=f,C=f),gt.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,v,C,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),m,w,l.getX(),l.getY())}static sampleGrid(s,a,l){return Qn.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){const h=Le.round(Pe.distance(s,a)/u),f=Le.round(Pe.distance(s,l)/u);let m=Math.floor((h+f)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new J("Dimensions could be not found.")}return m}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let h=this.sizeOfBlackWhiteBlackRun(s,a,l,u),f=1,m=s-(l-s);m<0?(f=s/(s-m),m=0):m>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(m-s),m=this.image.getWidth()-1);let w=Math.floor(a-(u-a)*f);return f=1,w<0?(f=a/(a-w),w=0):w>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),m=Math.floor(s+(m-s)*f),h+=this.sizeOfBlackWhiteBlackRun(s,a,m,w),h-1}sizeOfBlackWhiteBlackRun(s,a,l,u){const h=Math.abs(u-a)>Math.abs(l-s);if(h){let q=s;s=a,a=q,q=l,l=u,u=q}const f=Math.abs(l-s),m=Math.abs(u-a);let w=-f/2;const v=s<l?1:-1,C=a<u?1:-1;let P=0;const B=l+v;for(let q=s,K=a;q!==B;q+=v){const Q=h?K:q,ne=h?q:K;if(P===1===this.image.get(Q,ne)){if(P===2)return Le.distance(q,K,s,a);P++}if(w+=m,w>0){if(K===u)break;K+=C,w-=f}}return P===2?Le.distance(l+v,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){const h=Math.floor(u*s),f=Math.max(0,a-h),m=Math.min(this.image.getWidth()-1,a+h);if(m-f<s*3)throw new J("Alignment top exceeds estimated module size.");const w=Math.max(0,l-h),v=Math.min(this.image.getHeight()-1,l+h);if(v-w<s*3)throw new J("Alignment bottom exceeds estimated module size.");return new Ur(this.image,f,w,m-f,v-w,s,this.resultPointCallback).find()}}class Gi{constructor(){this.decoder=new f1}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(Z.PURE_BARCODE)!==void 0){const w=Gi.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),u=Gi.NO_POINTS}else{const w=new li(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),u=w.getPoints()}l.getOther()instanceof Wh&&l.getOther().applyMirroredCorrection(u);const h=new Ke(l.getText(),l.getRawBytes(),void 0,u,Ee.QR_CODE,void 0),f=l.getByteSegments();f!==null&&h.putMetadata(Et.BYTE_SEGMENTS,f);const m=l.getECLevel();return m!==null&&h.putMetadata(Et.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(h.putMetadata(Et.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),h.putMetadata(Et.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),h}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new J;const u=this.moduleSize(a,s);let h=a[1],f=l[1],m=a[0],w=l[0];if(m>=w||h>=f)throw new J;if(f-h!==w-m&&(w=m+(f-h),w>=s.getWidth()))throw new J;const v=Math.round((w-m+1)/u),C=Math.round((f-h+1)/u);if(v<=0||C<=0)throw new J;if(C!==v)throw new J;const P=Math.floor(u/2);h+=P,m+=P;const B=m+Math.floor((v-1)*u)-w;if(B>0){if(B>P)throw new J;m-=B}const q=h+Math.floor((C-1)*u)-f;if(q>0){if(q>P)throw new J;h-=q}const K=new he(v,C);for(let Q=0;Q<C;Q++){const ne=h+Math.floor(Q*u);for(let oe=0;oe<v;oe++)s.get(m+Math.floor(oe*u),ne)&&K.set(oe,Q)}return K}static moduleSize(s,a){const l=a.getHeight(),u=a.getWidth();let h=s[0],f=s[1],m=!0,w=0;for(;h<u&&f<l;){if(m!==a.get(h,f)){if(++w===5)break;m=!m}h++,f++}if(h===u||f===l)throw new J;return(h-s[0])/7}}Gi.NO_POINTS=new Array;class Ue{PDF417Common(){}static getBitCountSum(s){return Le.sum(s)}static toIntArray(s){if(s==null||!s.length)return Ue.EMPTY_INT_ARRAY;const a=new Int32Array(s.length);let l=0;for(const u of s)a[l++]=u;return a}static getCodeword(s){const a=S.binarySearch(Ue.SYMBOL_TABLE,s&262143);return a<0?-1:(Ue.CODEWORD_TABLE[a]-1)%Ue.NUMBER_OF_CODEWORDS}}Ue.NUMBER_OF_CODEWORDS=929,Ue.MAX_CODEWORDS_IN_BARCODE=Ue.NUMBER_OF_CODEWORDS-1,Ue.MIN_ROWS_IN_BARCODE=3,Ue.MAX_ROWS_IN_BARCODE=90,Ue.MODULES_IN_CODEWORD=17,Ue.MODULES_IN_STOP_PATTERN=18,Ue.BARS_IN_MODULE=8,Ue.EMPTY_INT_ARRAY=new Int32Array([]),Ue.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ue.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class g1{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class je{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),h=je.detect(l,u);return h.length||(u=u.clone(),u.rotate180(),h=je.detect(l,u)),new g1(u,h)}static detect(s,a){const l=new Array;let u=0,h=0,f=!1;for(;u<a.getHeight();){const m=je.findVertices(a,u,h);if(m[0]==null&&m[3]==null){if(!f)break;f=!1,h=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=je.ROW_STEP;continue}if(f=!0,l.push(m),!s)break;m[2]!=null?(h=Math.trunc(m[2].getX()),u=Math.trunc(m[2].getY())):(h=Math.trunc(m[4].getX()),u=Math.trunc(m[4].getY()))}return l}static findVertices(s,a,l){const u=s.getHeight(),h=s.getWidth(),f=new Array(8);return je.copyToResult(f,je.findRowsWithPattern(s,u,h,a,l,je.START_PATTERN),je.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),je.copyToResult(f,je.findRowsWithPattern(s,u,h,a,l,je.STOP_PATTERN),je.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,h,f){const m=new Array(4);let w=!1;const v=new Int32Array(f.length);for(;u<a;u+=je.ROW_STEP){let P=je.findGuardPattern(s,h,u,l,!1,f,v);if(P!=null){for(;u>0;){const B=je.findGuardPattern(s,h,--u,l,!1,f,v);if(B!=null)P=B;else{u++;break}}m[0]=new Pe(P[0],u),m[1]=new Pe(P[1],u),w=!0;break}}let C=u+1;if(w){let P=0,B=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<a;C++){const q=je.findGuardPattern(s,B[0],C,l,!1,f,v);if(q!=null&&Math.abs(B[0]-q[0])<je.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<je.MAX_PATTERN_DRIFT)B=q,P=0;else{if(P>je.SKIPPED_ROW_COUNT_MAX)break;P++}}C-=P+1,m[2]=new Pe(B[0],C),m[3]=new Pe(B[1],C)}return C-u<je.BARCODE_MIN_HEIGHT&&S.fill(m,null),m}static findGuardPattern(s,a,l,u,h,f,m){S.fillWithin(m,0,m.length,0);let w=a,v=0;for(;s.get(w,l)&&w>0&&v++<je.MAX_PIXEL_DRIFT;)w--;let C=w,P=0,B=f.length;for(let q=h;C<u;C++)if(s.get(C,l)!==q)m[P]++;else{if(P===B-1){if(je.patternMatchVariance(m,f,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return new Int32Array([w,C]);w+=m[0]+m[1],b.arraycopy(m,2,m,0,P-1),m[P-1]=0,m[P]=0,P--}else P++;m[P]=1,q=!q}return P===B-1&&je.patternMatchVariance(m,f,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE?new Int32Array([w,C-1]):null}static patternMatchVariance(s,a,l){let u=s.length,h=0,f=0;for(let v=0;v<u;v++)h+=s[v],f+=a[v];if(h<f)return 1/0;let m=h/f;l*=m;let w=0;for(let v=0;v<u;v++){let C=s[v],P=a[v]*m,B=C>P?C-P:P-C;if(B>l)return 1/0;w+=B}return w/h}}je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),je.MAX_AVG_VARIANCE=.42,je.MAX_INDIVIDUAL_VARIANCE=.8,je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),je.MAX_PIXEL_DRIFT=3,je.MAX_PATTERN_DRIFT=5,je.SKIPPED_ROW_COUNT_MAX=25,je.ROW_STEP=5,je.BARCODE_MIN_HEIGHT=10;class Tn{constructor(s,a){if(a.length===0)throw new E;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),b.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let h of this.coefficients)u=this.field.add(u,h);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),h=l.length-a.length;b.arraycopy(l,0,u,0,h);for(let f=h;f<l.length;f++)u[f]=this.field.add(a[f-h],l[f]);return new Tn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Tn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Tn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,h=u.length,f=new Int32Array(l+h-1);for(let m=0;m<l;m++){let w=a[m];for(let v=0;v<h;v++)f[m+v]=this.field.add(f[m+v],this.field.multiply(w,u[v]))}return new Tn(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Tn(this.field,a)}multiplyScalar(s){if(s===0)return new Tn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new Tn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new E;if(a===0)return new Tn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let h=0;h<l;h++)u[h]=this.field.multiply(this.coefficients[h],a);return new Tn(this.field,u)}toString(){let s=new j;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class p1{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}inverse(s){if(s===0)throw new lr;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Zs extends p1{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Tn(this,new Int32Array([0])),this.one=new Tn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new E;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new Tn(this,l)}}Zs.PDF417_GF=new Zs(Ue.NUMBER_OF_CODEWORDS,3);class wa{constructor(){this.field=Zs.PDF417_GF}decode(s,a,l){let u=new Tn(this.field,s),h=new Int32Array(a),f=!1;for(let K=a;K>0;K--){let Q=u.evaluateAt(this.field.exp(K));h[a-K]=Q,Q!==0&&(f=!0)}if(!f)return 0;let m=this.field.getOne();if(l!=null)for(const K of l){let Q=this.field.exp(s.length-1-K),ne=new Tn(this.field,new Int32Array([this.field.subtract(0,Q),1]));m=m.multiply(ne)}let w=new Tn(this.field,h),v=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),C=v[0],P=v[1],B=this.findErrorLocations(C),q=this.findErrorMagnitudes(P,C,B);for(let K=0;K<B.length;K++){let Q=s.length-1-this.field.log(B[K]);if(Q<0)throw I.getChecksumInstance();s[Q]=this.field.subtract(s[Q],q[K])}return B.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let B=s;s=a,a=B}let u=s,h=a,f=this.field.getZero(),m=this.field.getOne();for(;h.getDegree()>=Math.round(l/2);){let B=u,q=f;if(u=h,f=m,u.isZero())throw I.getChecksumInstance();h=B;let K=this.field.getZero(),Q=u.getCoefficient(u.getDegree()),ne=this.field.inverse(Q);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){let oe=h.getDegree()-u.getDegree(),pe=this.field.multiply(h.getCoefficient(h.getDegree()),ne);K=K.add(this.field.buildMonomial(oe,pe)),h=h.subtract(u.multiplyByMonomial(oe,pe))}m=K.multiply(f).subtract(q).negative()}let w=m.getCoefficient(0);if(w===0)throw I.getChecksumInstance();let v=this.field.inverse(w),C=m.multiply(v),P=h.multiply(v);return[C,P]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let h=1;h<this.field.getSize()&&u<a;h++)s.evaluateAt(h)===0&&(l[u]=this.field.inverse(h),u++);if(u!==a)throw I.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),h=new Int32Array(u);for(let v=1;v<=u;v++)h[u-v]=this.field.multiply(v,a.getCoefficient(v));let f=new Tn(this.field,h),m=l.length,w=new Int32Array(m);for(let v=0;v<m;v++){let C=this.field.inverse(l[v]),P=this.field.subtract(0,s.evaluateAt(C)),B=this.field.inverse(f.evaluateAt(C));w[v]=this.field.multiply(P,B)}return w}}class qi{constructor(s,a,l,u,h){s instanceof qi?this.constructor_2(s):this.constructor_1(s,a,l,u,h)}constructor_1(s,a,l,u,h){const f=a==null||l==null,m=u==null||h==null;if(f&&m)throw new J;f?(a=new Pe(0,u.getY()),l=new Pe(0,h.getY())):m&&(u=new Pe(s.getWidth()-1,a.getY()),h=new Pe(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=h,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),h.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),h.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new qi(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,h=this.bottomLeft,f=this.topRight,m=this.bottomRight;if(s>0){let w=l?this.topLeft:this.topRight,v=Math.trunc(w.getY()-s);v<0&&(v=0);let C=new Pe(w.getX(),v);l?u=C:f=C}if(a>0){let w=l?this.bottomLeft:this.bottomRight,v=Math.trunc(w.getY()+a);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let C=new Pe(w.getX(),v);l?h=C:m=C}return new qi(this.image,u,h,f,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class xa{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class _i{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(f,m,w,v,C,P){if(f==="%%")return"%";if(a[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let B=C?parseInt(C.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(f);break;case"p":q=parseFloat(a[l]).toPrecision(f);break;case"e":q=parseFloat(a[l]).toExponential(f);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(f)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let K=parseInt(w),Q=w&&w[0]+""=="0"?"0":" ";for(;q.length<K;)q=m!==void 0?q+Q:Q+q;return q}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,u)}format(s,...a){this.buffer+=_i.form(s,a)}toString(){return this.buffer}}class Js{constructor(s){this.boundingBox=new qi(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let a=this.getCodeword(s);if(a!=null)return a;for(let l=1;l<Js.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(s)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(s)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,a){this.codewords[this.imageRowToCodewordIndex(s)]=a}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new _i;let a=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",a++);continue}s.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return s.toString()}}Js.MAX_NEARBY_DISTANCE=5;class Es{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(const[l,u]of this.values.entries()){const h={getKey:()=>l,getValue:()=>u};h.getValue()>s?(s=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===s&&a.push(h.getKey())}return Ue.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class Ft extends Js{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=-1,v=1,C=0;for(let P=f;P<m;P++){if(a[P]==null)continue;let B=a[P],q=B.getRowNumber()-w;if(q===0)C++;else if(q===1)v=Math.max(v,C),C=1,w=B.getRowNumber();else if(q<0||B.getRowNumber()>=s.getRowCount()||q>P)a[P]=null;else{let K;v>2?K=(v-2)*q:K=q;let Q=K>=P;for(let ne=1;ne<=K&&!Q;ne++)Q=a[P-ne]!=null;Q?a[P]=null:(w=B.getRowNumber(),C=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.getCodewords(),w=-1;for(let v=h;v<f;v++){if(m[v]==null)continue;let C=m[v];C.setRowNumberAsRowIndicatorColumn();let P=C.getRowNumber()-w;P===0||(P===1?w=C.getRowNumber():C.getRowNumber()>=s.getRowCount()?m[v]=null:w=C.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new Es,l=new Es,u=new Es,h=new Es;for(let m of s){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let w=m.getValue()%30,v=m.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(w*3+1);break;case 1:h.setValue(w/3),u.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||h.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ue.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ue.MAX_ROWS_IN_BARCODE)return null;let f=new xa(a.getValue()[0],l.getValue()[0],u.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let h=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:h*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(h/3)!==a.getErrorCorrectionLevel()||h%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:h+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class va{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Ue.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let h=this.detectionResultColumns[u].getCodewords()[l];h!=null&&(h.setRowNumber(s[l].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let f=this.barcodeColumnCount+1;f>0&&h<this.ADJUST_ROW_NUMBER_SKIP;f--){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(h=va.adjustRowNumberIfValid(u,h,m),m.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let f=1;f<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;f++){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(h=va.adjustRowNumberIfValid(u,h,m),m.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],h=this.detectionResultColumns[s-1].getCodewords(),f=h;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let m=new Array(14);m[2]=h[a],m[3]=f[a],a>0&&(m[0]=l[a-1],m[4]=h[a-1],m[5]=f[a-1]),a>1&&(m[8]=l[a-2],m[10]=h[a-2],m[11]=f[a-2]),a<l.length-1&&(m[1]=l[a+1],m[6]=h[a+1],m[7]=f[a+1]),a<l.length-2&&(m[9]=l[a+2],m[12]=h[a+2],m[13]=f[a+2]);for(let w of m)if(va.adjustRowNumber(u,w))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new _i;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let h=this.detectionResultColumns[u].getCodewords()[l];if(h==null){a.format("    |   ");continue}a.format(" %3d|%3d",h.getRowNumber(),h.getValue())}a.format("%n")}return a.toString()}}class Ea{constructor(s,a,l,u){this.rowNumber=Ea.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ea.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ea.BARCODE_ROW_UNKNOWN=-1;class jn{static initialize(){for(let s=0;s<Ue.SYMBOL_TABLE.length;s++){let a=Ue.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<Ue.BARS_IN_MODULE;u++){let h=0;for(;(a&1)===l;)h+=1,a>>=1;l=a&1,jn.RATIOS_TABLE[s]||(jn.RATIOS_TABLE[s]=new Array(Ue.BARS_IN_MODULE)),jn.RATIOS_TABLE[s][Ue.BARS_IN_MODULE-u-1]=Math.fround(h/Ue.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=jn.getDecodedCodewordValue(jn.sampleBitCounts(s));return a!==-1?a:jn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=Le.sum(s),l=new Int32Array(Ue.BARS_IN_MODULE),u=0,h=0;for(let f=0;f<Ue.MODULES_IN_CODEWORD;f++){let m=a/(2*Ue.MODULES_IN_CODEWORD)+f*a/Ue.MODULES_IN_CODEWORD;h+s[u]<=m&&(h+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=jn.getBitValue(s);return Ue.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=Le.sum(s),l=new Array(Ue.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(s[f]/a);let u=cr.MAX_VALUE,h=-1;this.bSymbolTableReady||jn.initialize();for(let f=0;f<jn.RATIOS_TABLE.length;f++){let m=0,w=jn.RATIOS_TABLE[f];for(let v=0;v<Ue.BARS_IN_MODULE;v++){let C=Math.fround(w[v]-l[v]);if(m+=Math.fround(C*C),m>=u)break}m<u&&(u=m,h=Ue.SYMBOL_TABLE[f])}return h}}jn.bSymbolTableReady=!1,jn.RATIOS_TABLE=new Array(Ue.SYMBOL_TABLE.length).map(N=>new Array(Ue.BARS_IN_MODULE));class Bc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Vc{static parseLong(s,a=void 0){return parseInt(s,a)}}class _a extends p{}_a.kind="NullPointerException";class qh{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new _a;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new F;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class Ai extends p{}class $h extends qh{constructor(s=32){if(super(),this.count=0,s<0)throw new E("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new Ai;l=O.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new F;this.ensureCapacity(this.count+l),b.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var wt;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wt||(wt={}));function eo(){if(typeof window<"u")return window.BigInt||null;if(typeof Hc<"u")return Hc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Aa;function ci(N){if(typeof Aa>"u"&&(Aa=eo()),Aa===null)throw new Error("BigInt is not supported!");return Aa(N)}function hl(){let N=[];N[0]=ci(1);let s=ci(900);N[1]=s;for(let a=2;a<16;a++)N[a]=N[a-1]*s;return N}class ie{static decode(s,a){let l=new j(""),u=L.ISO8859_1;l.enableDecoding(u);let h=1,f=s[h++],m=new Bc;for(;h<s[0];){switch(f){case ie.TEXT_COMPACTION_MODE_LATCH:h=ie.textCompaction(s,h,l);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:h=ie.byteCompaction(f,s,u,h,l);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:h=ie.numericCompaction(s,h,l);break;case ie.ECI_CHARSET:L.getCharacterSetECIByValue(s[h++]);break;case ie.ECI_GENERAL_PURPOSE:h+=2;break;case ie.ECI_USER_DEFINED:h++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ie.decodeMacroBlock(s,h,m);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new k;default:h--,h=ie.textCompaction(s,h,l);break}if(h<s.length)f=s[h++];else throw k.getFormatInstance()}if(l.length()===0)throw k.getFormatInstance();let w=new Kn(null,l.toString(),null,a);return w.setOther(m),w}static decodeMacroBlock(s,a,l){if(a+ie.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw k.getFormatInstance();let u=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ie.NUMBER_OF_SEQUENCE_CODEWORDS;m++,a++)u[m]=s[a];l.setSegmentIndex(O.parseInt(ie.decodeBase900toBase10(u,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new j;a=ie.textCompaction(s,a,h),l.setFileId(h.toString());let f=-1;for(s[a]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new j;a=ie.textCompaction(s,a+1,m),l.setFileName(m.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new j;a=ie.textCompaction(s,a+1,w),l.setSender(w.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new j;a=ie.textCompaction(s,a+1,v),l.setAddressee(v.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new j;a=ie.numericCompaction(s,a+1,C),l.setSegmentCount(O.parseInt(C.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new j;a=ie.numericCompaction(s,a+1,P),l.setTimestamp(Vc.parseLong(P.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new j;a=ie.numericCompaction(s,a+1,B),l.setChecksum(O.parseInt(B.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new j;a=ie.numericCompaction(s,a+1,q),l.setFileSize(Vc.parseLong(q.toString()));break;default:throw k.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(f!==-1){let m=a-f;l.isLastSegment()&&m--,l.setOptionalData(S.copyOfRange(s,f,f+m))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),h=new Int32Array((s[0]-a)*2),f=0,m=!1;for(;a<s[0]&&!m;){let w=s[a++];if(w<ie.TEXT_COMPACTION_MODE_LATCH)u[f]=w/30,u[f+1]=w%30,f+=2;else switch(w){case ie.TEXT_COMPACTION_MODE_LATCH:u[f++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,m=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=s[a++],h[f]=w,f++;break}}return ie.decodeTextCompaction(u,h,f,l),a}static decodeTextCompaction(s,a,l,u){let h=wt.ALPHA,f=wt.ALPHA,m=0;for(;m<l;){let w=s[m],v="";switch(h){case wt.ALPHA:if(w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case ie.LL:h=wt.LOWER;break;case ie.ML:h=wt.MIXED;break;case ie.PS:f=h,h=wt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break;case wt.LOWER:if(w<26)v=String.fromCharCode(97+w);else switch(w){case 26:v=" ";break;case ie.AS:f=h,h=wt.ALPHA_SHIFT;break;case ie.ML:h=wt.MIXED;break;case ie.PS:f=h,h=wt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break;case wt.MIXED:if(w<ie.PL)v=ie.MIXED_CHARS[w];else switch(w){case ie.PL:h=wt.PUNCT;break;case 26:v=" ";break;case ie.LL:h=wt.LOWER;break;case ie.AL:h=wt.ALPHA;break;case ie.PS:f=h,h=wt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break;case wt.PUNCT:if(w<ie.PAL)v=ie.PUNCT_CHARS[w];else switch(w){case ie.PAL:h=wt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(h=f,w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(h=f,w<ie.PAL)v=ie.PUNCT_CHARS[w];else switch(w){case ie.PAL:h=wt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:h=wt.ALPHA;break}break}v!==""&&u.append(v),m++}}static byteCompaction(s,a,l,u,h){let f=new $h,m=0,w=0,v=!1;switch(s){case ie.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),P=a[u++];for(;u<a[0]&&!v;)switch(C[m++]=P,w=900*w+P,P=a[u++],P){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:u--,v=!0;break;default:if(m%5===0&&m>0){for(let B=0;B<6;++B)f.write(Number(ci(w)>>ci(8*(5-B))));w=0,m=0}break}u===a[0]&&P<ie.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=P);for(let B=0;B<m;B++)f.write(C[B]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!v;){let B=a[u++];if(B<ie.TEXT_COMPACTION_MODE_LATCH)m++,w=900*w+B;else switch(B){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:u--,v=!0;break}if(m%5===0&&m>0){for(let q=0;q<6;++q)f.write(Number(ci(w)>>ci(8*(5-q))));w=0,m=0}}break}return h.append(X.decode(f.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,h=!1,f=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!h;){let m=s[a++];if(a===s[0]&&(h=!0),m<ie.TEXT_COMPACTION_MODE_LATCH)f[u]=m,u++;else switch(m){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,h=!0;break}(u%ie.MAX_NUMERIC_CODEWORDS===0||m===ie.NUMERIC_COMPACTION_MODE_LATCH||h)&&u>0&&(l.append(ie.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=ci(0);for(let h=0;h<a;h++)l+=ie.EXP900[a-h-1]*ci(s[h]);let u=l.toString();if(u.charAt(0)!=="1")throw new k;return u.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=eo()?hl():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class qe{constructor(){}static decode(s,a,l,u,h,f,m){let w=new qi(s,a,l,u,h),v=null,C=null,P;for(let K=!0;;K=!1){if(a!=null&&(v=qe.getRowIndicatorColumn(s,w,a,!0,f,m)),u!=null&&(C=qe.getRowIndicatorColumn(s,w,u,!1,f,m)),P=qe.merge(v,C),P==null)throw J.getNotFoundInstance();let Q=P.getBoundingBox();if(K&&Q!=null&&(Q.getMinY()<w.getMinY()||Q.getMaxY()>w.getMaxY()))w=Q;else break}P.setBoundingBox(w);let B=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,v),P.setDetectionResultColumn(B,C);let q=v!=null;for(let K=1;K<=B;K++){let Q=q?K:B-K;if(P.getDetectionResultColumn(Q)!==void 0)continue;let ne;Q===0||Q===B?ne=new Ft(w,Q===0):ne=new Js(w),P.setDetectionResultColumn(Q,ne);let oe=-1,pe=oe;for(let me=w.getMinY();me<=w.getMaxY();me++){if(oe=qe.getStartColumn(P,Q,me,q),oe<0||oe>w.getMaxX()){if(pe===-1)continue;oe=pe}let de=qe.detectCodeword(s,w.getMinX(),w.getMaxX(),q,oe,me,f,m);de!=null&&(ne.setCodeword(me,de),pe=oe,f=Math.min(f,de.getWidth()),m=Math.max(m,de.getWidth()))}}return qe.createDecoderResult(P)}static merge(s,a){if(s==null&&a==null)return null;let l=qe.getBarcodeMetadata(s,a);if(l==null)return null;let u=qi.merge(qe.adjustBoundingBox(s),qe.adjustBoundingBox(a));return new va(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=qe.getMax(a),u=0;for(let m of a)if(u+=l-m,m>0)break;let h=s.getCodewords();for(let m=0;u>0&&h[m]==null;m++)u--;let f=0;for(let m=a.length-1;m>=0&&(f+=l-a[m],!(a[m]>0));m--);for(let m=h.length-1;f>0&&h[m]==null;m--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,h,f){let m=new Ft(a,u);for(let w=0;w<2;w++){let v=w===0?1:-1,C=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=a.getMaxY()&&P>=a.getMinY();P+=v){let B=qe.detectCodeword(s,0,s.getWidth(),u,C,P,h,f);B!=null&&(m.setCodeword(P,B),u?C=B.getStartX():C=B.getEndX())}}return m}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),h=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-qe.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(h<1||h>Ue.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();l.setValue(h)}else u[0]!==h&&l.setValue(h)}static createDecoderResult(s){let a=qe.createBarcodeMatrix(s);qe.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),h=[],f=new Array;for(let w=0;w<s.getBarcodeRowCount();w++)for(let v=0;v<s.getBarcodeColumnCount();v++){let C=a[w][v+1].getValue(),P=w*s.getBarcodeColumnCount()+v;C.length===0?l.push(P):C.length===1?u[P]=C[0]:(f.push(P),h.push(C))}let m=new Array(h.length);for(let w=0;w<m.length;w++)m[w]=h[w];return qe.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,Ue.toIntArray(l),Ue.toIntArray(f),m)}static createDecoderResultFromAmbiguousValues(s,a,l,u,h){let f=new Int32Array(u.length),m=100;for(;m-- >0;){for(let w=0;w<f.length;w++)a[u[w]]=h[w][f[w]];try{return qe.decodeCodewords(a,s,l)}catch(w){if(!(w instanceof I))throw w}if(f.length===0)throw I.getChecksumInstance();for(let w=0;w<f.length;w++)if(f[w]<h[w].length-1){f[w]++;break}else if(f[w]=0,w===f.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let h=0;h<a[u].length;h++)a[u][h]=new Es;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let h of u.getCodewords())if(h!=null){let f=h.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(h.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let h=u?1:-1,f=null;if(qe.isValidBarcodeColumn(s,a-h)&&(f=s.getDetectionResultColumn(a-h).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(qe.isValidBarcodeColumn(s,a-h)&&(f=s.getDetectionResultColumn(a-h).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let m=0;for(;qe.isValidBarcodeColumn(s,a-h);){a-=h;for(let w of s.getDetectionResultColumn(a).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+h*m*(w.getEndX()-w.getStartX());m++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,h,f,m,w){h=qe.adjustCodewordStartColumn(s,a,l,u,h,f);let v=qe.getModuleBitCount(s,a,l,u,h,f);if(v==null)return null;let C,P=Le.sum(v);if(u)C=h+P;else{for(let K=0;K<v.length/2;K++){let Q=v[K];v[K]=v[v.length-1-K],v[v.length-1-K]=Q}C=h,h=C-P}if(!qe.checkCodewordSkew(P,m,w))return null;let B=jn.getDecodedValue(v),q=Ue.getCodeword(B);return q===-1?null:new Ea(h,C,qe.getCodewordBucketNumber(B),q)}static getModuleBitCount(s,a,l,u,h,f){let m=h,w=new Int32Array(8),v=0,C=u?1:-1,P=u;for(;(u?m<l:m>=a)&&v<w.length;)s.get(m,f)===P?(w[v]++,m+=C):(v++,P=!P);return v===w.length||m===(u?l:a)&&v===w.length-1?w:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,h,f){let m=h,w=u?-1:1;for(let v=0;v<2;v++){for(;(u?m>=a:m<l)&&u===s.get(m,f);){if(Math.abs(h-m)>qe.CODEWORD_SKEW_SIZE)return h;m+=w}w=-w,u=!u}return m}static checkCodewordSkew(s,a,l){return a-qe.CODEWORD_SKEW_SIZE<=s&&s<=l+qe.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw k.getFormatInstance();let u=1<<a+1,h=qe.correctErrors(s,l,u);qe.verifyCodewordCount(s,u);let f=ie.decode(s,""+a);return f.setErrorsCorrected(h),f.setErasures(l.length),f}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+qe.MAX_ERRORS||l<0||l>qe.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return qe.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw k.getFormatInstance();let l=s[0];if(l>s.length)throw k.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw k.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return qe.getCodewordBucketNumber(qe.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new _i;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let h=s[l][u];h.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}a.format("%n")}return a.toString()}}qe.CODEWORD_SKEW_SIZE=2,qe.MAX_ERRORS=3,qe.MAX_EC_CODEWORDS=512,qe.errorCorrection=new wa;class Sn{decode(s,a=null){let l=Sn.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw J.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return Sn.decode(s,a,!0)}catch(l){throw l instanceof k||l instanceof I?J.getNotFoundInstance():l}}static decode(s,a,l){const u=new Array,h=je.detectMultiple(s,a,l);for(const f of h.getPoints()){const m=qe.decode(h.getBits(),f[4],f[5],f[6],f[7],Sn.getMinCodewordWidth(f),Sn.getMaxCodewordWidth(f)),w=new Ke(m.getText(),m.getRawBytes(),void 0,f,Ee.PDF_417);w.putMetadata(Et.ERROR_CORRECTION_LEVEL,m.getECLevel());const v=m.getOther();v!=null&&w.putMetadata(Et.PDF417_EXTRA_METADATA,v),u.push(w)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?O.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(s[0],s[4]),Sn.getMaxWidth(s[6],s[2])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(s[1],s[5]),Sn.getMaxWidth(s[7],s[3])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Sn.getMinWidth(s[0],s[4]),Sn.getMinWidth(s[6],s[2])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(s[1],s[5]),Sn.getMinWidth(s[7],s[3])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ca extends p{}Ca.kind="ReaderException";class to{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const a=!r(s)&&s.get(Z.TRY_HARDER)===!0,l=r(s)?null:s.get(Z.POSSIBLE_FORMATS),u=new Array;if(!r(l)){const h=l.some(f=>f===Ee.UPC_A||f===Ee.UPC_E||f===Ee.EAN_13||f===Ee.EAN_8||f===Ee.CODABAR||f===Ee.CODE_39||f===Ee.CODE_93||f===Ee.CODE_128||f===Ee.ITF||f===Ee.RSS_14||f===Ee.RSS_EXPANDED);h&&!a&&u.push(new Hi(s,this.verbose)),l.includes(Ee.QR_CODE)&&u.push(new Gi),l.includes(Ee.DATA_MATRIX)&&u.push(new Ei),l.includes(Ee.AZTEC)&&u.push(new Xs),l.includes(Ee.PDF_417)&&u.push(new Sn),h&&a&&u.push(new Hi(s,this.verbose))}u.length===0&&(a||u.push(new Hi(s,this.verbose)),u.push(new Gi),u.push(new Ei),u.push(new Xs),u.push(new Sn),a&&u.push(new Hi(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Ca("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof Ca)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class Xh extends De{constructor(s=null,a=500){const l=new to;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Kh extends De{constructor(s=500){super(new Sn,s)}}class Uc extends De{constructor(s=500){super(new Gi,s)}}var Ia;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ia||(Ia={}));var sn=Ia;class no{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Wt(s,Int32Array.from([1])))}buildGenerator(s){const a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1];const u=this.field;for(let h=a.length;h<=s;h++){const f=l.multiply(new Wt(u,Int32Array.from([1,u.exp(h-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[s]}encode(s,a){if(a===0)throw new E("No error correction bytes");const l=s.length-a;if(l<=0)throw new E("No data bytes provided");const u=this.buildGenerator(a),h=new Int32Array(l);b.arraycopy(s,0,h,0,l);let f=new Wt(this.field,h);f=f.multiplyByMonomial(a,1);const w=f.divide(u)[1].getCoefficients(),v=a-w.length;for(let C=0;C<v;C++)s[l+C]=0;b.arraycopy(w,0,s,l+v,w.length)}}class Bt{constructor(){}static applyMaskPenaltyRule1(s){return Bt.applyMaskPenaltyRule1Internal(s,!0)+Bt.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let f=0;f<h-1;f++){const m=l[f];for(let w=0;w<u-1;w++){const v=m[w];v===m[w+1]&&v===l[f+1][w]&&v===l[f+1][w+1]&&a++}}return Bt.N2*a}static applyMaskPenaltyRule3(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let f=0;f<h;f++)for(let m=0;m<u;m++){const w=l[f];m+6<u&&w[m]===1&&w[m+1]===0&&w[m+2]===1&&w[m+3]===1&&w[m+4]===1&&w[m+5]===0&&w[m+6]===1&&(Bt.isWhiteHorizontal(w,m-4,m)||Bt.isWhiteHorizontal(w,m+7,m+11))&&a++,f+6<h&&l[f][m]===1&&l[f+1][m]===0&&l[f+2][m]===1&&l[f+3][m]===1&&l[f+4][m]===1&&l[f+5][m]===0&&l[f+6][m]===1&&(Bt.isWhiteVertical(l,m,f-4,f)||Bt.isWhiteVertical(l,m,f+7,f+11))&&a++}return a*Bt.N3}static isWhiteHorizontal(s,a,l){a=Math.max(a,0),l=Math.min(l,s.length);for(let u=a;u<l;u++)if(s[u]===1)return!1;return!0}static isWhiteVertical(s,a,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let h=l;h<u;h++)if(s[h][a]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let w=0;w<h;w++){const v=l[w];for(let C=0;C<u;C++)v[C]===1&&a++}const f=s.getHeight()*s.getWidth();return Math.floor(Math.abs(a*2-f)*10/f)*Bt.N4}static getDataMaskBit(s,a,l){let u,h;switch(s){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:h=l*a,u=(h&1)+h%3;break;case 6:h=l*a,u=(h&1)+h%3&1;break;case 7:h=l*a,u=h%3+(l+a&1)&1;break;default:throw new E("Invalid mask pattern: "+s)}return u===0}static applyMaskPenaltyRule1Internal(s,a){let l=0;const u=a?s.getHeight():s.getWidth(),h=a?s.getWidth():s.getHeight(),f=s.getArray();for(let m=0;m<u;m++){let w=0,v=-1;for(let C=0;C<h;C++){const P=a?f[m][C]:f[C][m];P===v?w++:(w>=5&&(l+=Bt.N1+(w-5)),w=1,v=P)}w>=5&&(l+=Bt.N1+(w-5))}return l}}Bt.N1=3,Bt.N2=3,Bt.N3=40,Bt.N4=10;class Ta{constructor(s,a){this.width=s,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(const a of this.bytes)S.fill(a,s)}equals(s){if(!(s instanceof Ta))return!1;const a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const h=this.bytes[l],f=a.bytes[l];for(let m=0,w=this.width;m<w;++m)if(h[m]!==f[m])return!1}return!0}toString(){const s=new j;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let h=0,f=this.width;h<f;++h)switch(u[h]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class dr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new j;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<dr.NUM_MASK_PATTERNS}}dr.NUM_MASK_PATTERNS=8;class xt extends p{}xt.kind="WriterException";class Fe{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,h){Fe.clearMatrix(h),Fe.embedBasicPatterns(l,h),Fe.embedTypeInfo(a,u,h),Fe.maybeEmbedVersionInfo(l,h),Fe.embedDataBits(s,u,h)}static embedBasicPatterns(s,a){Fe.embedPositionDetectionPatternsAndSeparators(a),Fe.embedDarkDotAtLeftBottomCorner(a),Fe.maybeEmbedPositionAdjustmentPatterns(s,a),Fe.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){const u=new U;Fe.makeTypeInfoBits(s,a,u);for(let h=0,f=u.getSize();h<f;++h){const m=u.get(u.getSize()-1-h),w=Fe.TYPE_INFO_COORDINATES[h],v=w[0],C=w[1];if(l.setBoolean(v,C,m),h<8){const P=l.getWidth()-h-1;l.setBoolean(P,8,m)}else{const B=l.getHeight()-7+(h-8);l.setBoolean(8,B,m)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;const l=new U;Fe.makeVersionInfoBits(s,l);let u=6*3-1;for(let h=0;h<6;++h)for(let f=0;f<3;++f){const m=l.get(u);u--,a.setBoolean(h,a.getHeight()-11+f,m),a.setBoolean(a.getHeight()-11+f,h,m)}}static embedDataBits(s,a,l){let u=0,h=-1,f=l.getWidth()-1,m=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);m>=0&&m<l.getHeight();){for(let w=0;w<2;++w){const v=f-w;if(!Fe.isEmpty(l.get(v,m)))continue;let C;u<s.getSize()?(C=s.get(u),++u):C=!1,a!==255&&Bt.getDataMaskBit(a,v,m)&&(C=!C),l.setBoolean(v,m,C)}m+=h}h=-h,m+=h,f-=2}if(u!==s.getSize())throw new xt("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-O.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new E("0 polynomial");const l=Fe.findMSBSet(a);for(s<<=l-1;Fe.findMSBSet(s)>=l;)s^=a<<Fe.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!dr.isValidMaskPattern(a))throw new xt("Invalid mask pattern");const u=s.getBits()<<3|a;l.appendBits(u,5);const h=Fe.calculateBCHCode(u,Fe.TYPE_INFO_POLY);l.appendBits(h,10);const f=new U;if(f.appendBits(Fe.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new xt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);const l=Fe.calculateBCHCode(s.getVersionNumber(),Fe.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new xt("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){const l=(a+1)%2;Fe.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),Fe.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new xt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!Fe.isEmpty(l.get(s+u,a)))throw new xt;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!Fe.isEmpty(l.get(s,a+u)))throw new xt;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){const h=Fe.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(s+f,a+u,h[f])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){const h=Fe.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(s+f,a+u,h[f])}}static embedPositionDetectionPatternsAndSeparators(s){const a=Fe.POSITION_DETECTION_PATTERN[0].length;Fe.embedPositionDetectionPattern(0,0,s),Fe.embedPositionDetectionPattern(s.getWidth()-a,0,s),Fe.embedPositionDetectionPattern(0,s.getWidth()-a,s);const l=8;Fe.embedHorizontalSeparationPattern(0,l-1,s),Fe.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),Fe.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const u=7;Fe.embedVerticalSeparationPattern(u,0,s),Fe.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),Fe.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,u=Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let h=0,f=u.length;h!==f;h++){const m=u[h];if(m>=0)for(let w=0;w!==f;w++){const v=u[w];v>=0&&Fe.isEmpty(a.get(v,m))&&Fe.embedPositionAdjustmentPattern(v-2,m-2,a)}}}}Fe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Fe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Fe.VERSION_INFO_POLY=7973,Fe.TYPE_INFO_POLY=1335,Fe.TYPE_INFO_MASK_PATTERN=21522;class Yh{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ct{constructor(){}static calculateMaskPenalty(s){return Bt.applyMaskPenaltyRule1(s)+Bt.applyMaskPenaltyRule2(s)+Bt.applyMaskPenaltyRule3(s)+Bt.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=Ct.DEFAULT_BYTE_MODE_ENCODING;const h=l!==null&&l.get(sn.CHARACTER_SET)!==void 0;h&&(u=l.get(sn.CHARACTER_SET).toString());const f=this.chooseMode(s,u),m=new U;if(f===Me.BYTE&&(h||Ct.DEFAULT_BYTE_MODE_ENCODING!==u)){const me=L.getCharacterSetECIByName(u);me!==void 0&&this.appendECI(me,m)}this.appendModeInfo(f,m);const w=new U;this.appendBytes(s,f,w,u);let v;if(l!==null&&l.get(sn.QR_VERSION)!==void 0){const me=Number.parseInt(l.get(sn.QR_VERSION).toString(),10);v=_e.getVersionForNumber(me);const de=this.calculateBitsNeeded(f,m,w,v);if(!this.willFit(de,v,a))throw new xt("Data too big for requested version")}else v=this.recommendVersion(a,f,m,w);const C=new U;C.appendBitArray(m);const P=f===Me.BYTE?w.getSizeInBytes():s.length;this.appendLengthInfo(P,v,f,C),C.appendBitArray(w);const B=v.getECBlocksForLevel(a),q=v.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,C);const K=this.interleaveWithECBytes(C,v.getTotalCodewords(),q,B.getNumBlocks()),Q=new dr;Q.setECLevel(a),Q.setMode(f),Q.setVersion(v);const ne=v.getDimensionForVersion(),oe=new Ta(ne,ne),pe=this.chooseMaskPattern(K,a,v,oe);return Q.setMaskPattern(pe),Fe.buildMatrix(K,a,v,pe,oe),Q.setMatrix(oe),Q}static recommendVersion(s,a,l,u){const h=this.calculateBitsNeeded(a,l,u,_e.getVersionForNumber(1)),f=this.chooseVersion(h,s),m=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(m,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<Ct.ALPHANUMERIC_TABLE.length?Ct.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(L.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return Me.KANJI;let l=!1,u=!1;for(let h=0,f=s.length;h<f;++h){const m=s.charAt(h);if(Ct.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)u=!0;else return Me.BYTE}return u?Me.ALPHANUMERIC:l?Me.NUMERIC:Me.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=X.encode(s,L.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const h=a[u]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let h=Number.MAX_SAFE_INTEGER,f=-1;for(let m=0;m<dr.NUM_MASK_PATTERNS;m++){Fe.buildMatrix(s,a,l,m,u);let w=this.calculateMaskPenalty(u);w<h&&(h=w,f=m)}return f}static chooseVersion(s,a){for(let l=1;l<=40;l++){const u=_e.getVersionForNumber(l);if(Ct.willFit(s,u,a))return u}throw new xt("Data too big")}static willFit(s,a,l){const u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),m=u-f,w=(s+7)/8;return m>=w}static terminateBits(s,a){const l=s*8;if(a.getSize()>l)throw new xt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);const h=s-a.getSizeInBytes();for(let f=0;f<h;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,h,f){if(u>=l)throw new xt("Block ID too large");const m=s%l,w=l-m,v=Math.floor(s/l),C=v+1,P=Math.floor(a/l),B=P+1,q=v-P,K=C-B;if(q!==K)throw new xt("EC bytes mismatch");if(l!==w+m)throw new xt("RS blocks mismatch");if(s!==(P+q)*w+(B+K)*m)throw new xt("Total bytes mismatch");u<w?(h[0]=P,f[0]=q):(h[0]=B,f[0]=K)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new xt("Number of bits and data bytes does not match");let h=0,f=0,m=0;const w=new Array;for(let C=0;C<u;++C){const P=new Int32Array(1),B=new Int32Array(1);Ct.getNumDataBytesAndNumECBytesForBlockID(a,l,u,C,P,B);const q=P[0],K=new Uint8Array(q);s.toBytes(8*h,K,0,q);const Q=Ct.generateECBytes(K,B[0]);w.push(new Yh(K,Q)),f=Math.max(f,q),m=Math.max(m,Q.length),h+=P[0]}if(l!==h)throw new xt("Data bytes does not match offset");const v=new U;for(let C=0;C<f;++C)for(const P of w){const B=P.getDataBytes();C<B.length&&v.appendBits(B[C],8)}for(let C=0;C<m;++C)for(const P of w){const B=P.getErrorCorrectionBytes();C<B.length&&v.appendBits(B[C],8)}if(a!==v.getSizeInBytes())throw new xt("Interleaving error: "+a+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(s,a){const l=s.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=s[f]&255;new no($e.QR_CODE_FIELD_256).encode(u,a);const h=new Uint8Array(a);for(let f=0;f<a;f++)h[f]=u[l+f];return h}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){const h=l.getCharacterCountBits(a);if(s>=1<<h)throw new xt(s+" is bigger than "+((1<<h)-1));u.appendBits(s,h)}static appendBytes(s,a,l,u){switch(a){case Me.NUMERIC:Ct.appendNumericBytes(s,l);break;case Me.ALPHANUMERIC:Ct.appendAlphanumericBytes(s,l);break;case Me.BYTE:Ct.append8BitBytes(s,l,u);break;case Me.KANJI:Ct.appendKanjiBytes(s,l);break;default:throw new xt("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const a=Ct.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const h=Ct.getDigit(s.charAt(u));if(u+2<l){const f=Ct.getDigit(s.charAt(u+1)),m=Ct.getDigit(s.charAt(u+2));a.appendBits(h*100+f*10+m,10),u+=3}else if(u+1<l){const f=Ct.getDigit(s.charAt(u+1));a.appendBits(h*10+f,7),u+=2}else a.appendBits(h,4),u++}}static appendAlphanumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const h=Ct.getAlphanumericCode(s.charCodeAt(u));if(h===-1)throw new xt;if(u+1<l){const f=Ct.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new xt;a.appendBits(h*45+f,11),u+=2}else a.appendBits(h,6),u++}}static append8BitBytes(s,a,l){let u;try{u=X.encode(s,l)}catch(h){throw new xt(h)}for(let h=0,f=u.length;h!==f;h++){const m=u[h];a.appendBits(m,8)}}static appendKanjiBytes(s,a){let l;try{l=X.encode(s,L.SJIS)}catch(h){throw new xt(h)}const u=l.length;for(let h=0;h<u;h+=2){const f=l[h]&255,m=l[h+1]&255,w=f<<8&4294967295|m;let v=-1;if(w>=33088&&w<=40956?v=w-33088:w>=57408&&w<=60351&&(v=w-49472),v===-1)throw new xt("Invalid byte sequence");const C=(v>>8)*192+(v&255);a.appendBits(C,13)}}static appendECI(s,a){a.appendBits(Me.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}Ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ct.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class ui{write(s,a,l,u=null){if(s.length===0)throw new E("Found empty contents");if(a<0||l<0)throw new E("Requested dimensions are too small: "+a+"x"+l);let h=nt.L,f=ui.QUIET_ZONE_SIZE;u!==null&&(u.get(sn.ERROR_CORRECTION)!==void 0&&(h=nt.fromString(u.get(sn.ERROR_CORRECTION).toString())),u.get(sn.MARGIN)!==void 0&&(f=Number.parseInt(u.get(sn.MARGIN).toString(),10)));const m=Ct.encode(s,h,u);return this.renderResult(m,a,l,f)}writeToDom(s,a,l,u,h=null){typeof s=="string"&&(s=document.querySelector(s));const f=this.write(a,l,u,h);s&&s.appendChild(f)}renderResult(s,a,l,u){const h=s.getMatrix();if(h===null)throw new An;const f=h.getWidth(),m=h.getHeight(),w=f+u*2,v=m+u*2,C=Math.max(a,w),P=Math.max(l,v),B=Math.min(Math.floor(C/w),Math.floor(P/v)),q=Math.floor((C-f*B)/2),K=Math.floor((P-m*B)/2),Q=this.createSVGElement(C,P);for(let ne=0,oe=K;ne<m;ne++,oe+=B)for(let pe=0,me=q;pe<f;pe++,me+=B)if(h.get(pe,ne)===1){const de=this.createSvgRectElement(me,oe,B,B);Q.appendChild(de)}return Q}createSVGElement(s,a){const l=document.createElementNS(ui.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(s,a,l,u){const h=document.createElementNS(ui.SVG_NS,"rect");return h.setAttributeNS(null,"x",s.toString()),h.setAttributeNS(null,"y",a.toString()),h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",u.toString()),h.setAttributeNS(null,"fill","#000000"),h}}ui.QUIET_ZONE_SIZE=4,ui.SVG_NS="http://www.w3.org/2000/svg";class mn{encode(s,a,l,u,h){if(s.length===0)throw new E("Found empty contents");if(a!==Ee.QR_CODE)throw new E("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new E(`Requested dimensions are too small: ${l}x${u}`);let f=nt.L,m=mn.QUIET_ZONE_SIZE;h!==null&&(h.get(sn.ERROR_CORRECTION)!==void 0&&(f=nt.fromString(h.get(sn.ERROR_CORRECTION).toString())),h.get(sn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(sn.MARGIN).toString(),10)));const w=Ct.encode(s,f,h);return mn.renderResult(w,l,u,m)}static renderResult(s,a,l,u){const h=s.getMatrix();if(h===null)throw new An;const f=h.getWidth(),m=h.getHeight(),w=f+u*2,v=m+u*2,C=Math.max(a,w),P=Math.max(l,v),B=Math.min(Math.floor(C/w),Math.floor(P/v)),q=Math.floor((C-f*B)/2),K=Math.floor((P-m*B)/2),Q=new he(C,P);for(let ne=0,oe=K;ne<m;ne++,oe+=B)for(let pe=0,me=q;pe<f;pe++,me+=B)h.get(pe,ne)===1&&Q.setRegion(me,oe,B,B);return Q}}mn.QUIET_ZONE_SIZE=4;class Qh{encode(s,a,l,u,h){let f;switch(a){case Ee.QR_CODE:f=new mn;break;default:throw new E("No encoder available for format "+a)}return f.encode(s,a,l,u,h)}}class jr extends re{constructor(s,a,l,u,h,f,m,w){if(super(f,m),this.yuvData=s,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=h,u+f>a||h+m>l)throw new E("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(f,m)}getRow(s,a){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return b.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=s*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return b.arraycopy(this.yuvData,h,u,0,l),u;for(let f=0;f<a;f++){const m=f*s;b.arraycopy(this.yuvData,h,u,m,s),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+a,l,u,!1)}renderThumbnail(){const s=this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*a),u=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let f=0;f<a;f++){const m=f*s;for(let w=0;w<s;w++){const v=u[h+w*jr.THUMBNAIL_SCALE_FACTOR]&255;l[m+w]=4278190080|v*65793}h+=this.dataWidth*jr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,a){const l=this.yuvData;for(let u=0,h=this.top*this.dataWidth+this.left;u<a;u++,h+=this.dataWidth){const f=h+s/2;for(let m=h,w=h+s-1;m<f;m++,w--){const v=l[m];l[m]=l[w],l[w]=v}}}invert(){return new fe(this)}}jr.THUMBNAIL_SCALE_FACTOR=2;class $i extends re{constructor(s,a,l,u,h,f,m){if(super(a,l),this.dataWidth=u,this.dataHeight=h,this.left=f,this.top=m,s.BYTES_PER_ELEMENT===4){const w=a*l,v=new Uint8ClampedArray(w);for(let C=0;C<w;C++){const P=s[C],B=P>>16&255,q=P>>7&510,K=P&255;v[C]=(B+q+K)/4&255}this.luminances=v}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),h===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return b.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=s*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return b.arraycopy(this.luminances,h,u,0,l),u;for(let f=0;f<a;f++){const m=f*s;b.arraycopy(this.luminances,h,u,m,s),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new $i(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new fe(this)}}class y extends L{static forName(s){return this.getCharacterSetECIByName(s)}}class A{}A.ISO_8859_1=L.ISO8859_1;class T{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class V{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class ee{constructor(s){this.previous=s}getPrevious(){return this.previous}}class se extends ee{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new se(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new se(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+O.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class ve extends se{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new ve(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function _t(N,s,a){return new ve(N,s,a)}function Yt(N,s,a){return new se(N,s,a)}const at=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vt=0,hn=1,bn=2,Sr=3,fr=4,jc=new se(null,0,0),m1=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function i3(N){for(let s of N)S.fill(s,-1);return N[Vt][fr]=0,N[hn][fr]=0,N[hn][Vt]=28,N[Sr][fr]=0,N[bn][fr]=0,N[bn][Vt]=15,N}const xw=i3(S.createInt32Array(6,6));class Xi{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let f=m1[this.mode][s];u=Yt(u,f&65535,f>>16),l+=f>>16}let h=s===bn?4:5;return u=Yt(u,a,h),new Xi(u,s,0,l+h)}shiftAndAppend(s,a){let l=this.token,u=this.mode===bn?4:5;return l=Yt(l,xw[this.mode][s],u),l=Yt(l,a,5),new Xi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===fr||this.mode===bn){let m=m1[l][Vt];a=Yt(a,m&65535,m>>16),u+=m>>16,l=Vt}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Xi(a,l,this.binaryShiftByteCount+1,u+h);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=_t(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Xi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(m1[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=Xi.calculateBinaryShiftCost(s)-Xi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new U;for(const u of a)u.appendTo(l,s);return l}toString(){return $.format("%s bits=%d bytes=%d",at[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Xi.INITIAL_STATE=new Xi(jc,Vt,0,0);function s3(N){const s=$.getCharCode(" "),a=$.getCharCode("."),l=$.getCharCode(",");N[Vt][s]=1;const u=$.getCharCode("Z"),h=$.getCharCode("A");for(let B=h;B<=u;B++)N[Vt][B]=B-h+2;N[hn][s]=1;const f=$.getCharCode("z"),m=$.getCharCode("a");for(let B=m;B<=f;B++)N[hn][B]=B-m+2;N[bn][s]=1;const w=$.getCharCode("9"),v=$.getCharCode("0");for(let B=v;B<=w;B++)N[bn][B]=B-v+2;N[bn][l]=12,N[bn][a]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<C.length;B++)N[Sr][$.getCharCode(C[B])]=B;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<P.length;B++)$.getCharCode(P[B])>0&&(N[fr][$.getCharCode(P[B])]=B);return N}const y1=s3(S.createInt32Array(5,256));class zc{constructor(s){this.text=s}encode(){const s=$.getCharCode(" "),a=$.getCharCode(`
`);let l=V.singletonList(Xi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let f,m=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case $.getCharCode("\r"):f=m===a?2:0;break;case $.getCharCode("."):f=m===s?3:0;break;case $.getCharCode(","):f=m===s?4:0;break;case $.getCharCode(":"):f=m===s?5:0;break;default:f=0}f>0?(l=zc.updateStateListForPair(l,h,f),h++):l=this.updateStateListForChar(l,h)}return V.min(l,(h,f)=>h.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){const l=[];for(let u of s)this.updateStateForChar(u,a,l);return zc.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,h=y1[s.getMode()][u]>0,f=null;for(let m=0;m<=fr;m++){let w=y1[m][u];if(w>0){if(f==null&&(f=s.endBinaryShift(a)),!h||m===s.getMode()||m===bn){const v=f.latchAndAppend(m,w);l.push(v)}if(!h&&xw[s.getMode()][m]>=0){const v=f.shiftAndAppend(m,w);l.push(v)}}}if(s.getBinaryShiftByteCount()>0||y1[s.getMode()][u]===0){let m=s.addBinaryShiftChar(a);l.push(m)}}static updateStateListForPair(s,a,l){const u=[];for(let h of s)this.updateStateForPair(h,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let h=s.endBinaryShift(a);if(u.push(h.latchAndAppend(fr,l)),s.getMode()!==fr&&u.push(h.shiftAndAppend(fr,l)),l===3||l===4){let f=h.latchAndAppend(bn,16-l).latchAndAppend(bn,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(const l of s){let u=!0;for(const h of a){if(h.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(h)&&(a=a.filter(f=>f!==h))}u&&a.push(l)}return a}}class ht{constructor(){}static encodeBytes(s){return ht.encode(s,ht.DEFAULT_EC_PERCENT,ht.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new zc(s).encode(),h=O.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+h,m,w,v,C,P;if(l!==ht.DEFAULT_AZTEC_LAYERS){if(m=l<0,w=Math.abs(l),w>(m?ht.MAX_NB_BITS_COMPACT:ht.MAX_NB_BITS))throw new E($.format("Illegal value %s for layers",l));v=ht.totalBitsInLayer(w,m),C=ht.WORD_SIZE[w];let de=v-v%C;if(P=ht.stuffBits(u,C),P.getSize()+h>de)throw new E("Data to large for user specified layer");if(m&&P.getSize()>C*64)throw new E("Data to large for user specified layer")}else{C=0,P=null;for(let de=0;;de++){if(de>ht.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(m=de<=3,w=m?de+1:de,v=ht.totalBitsInLayer(w,m),f>v)continue;(P==null||C!==ht.WORD_SIZE[w])&&(C=ht.WORD_SIZE[w],P=ht.stuffBits(u,C));let rt=v-v%C;if(!(m&&P.getSize()>C*64)&&P.getSize()+h<=rt)break}}let B=ht.generateCheckWords(P,v,C),q=P.getSize()/C,K=ht.generateModeMessage(m,w,q),Q=(m?11:14)+w*4,ne=new Int32Array(Q),oe;if(m){oe=Q;for(let de=0;de<ne.length;de++)ne[de]=de}else{oe=Q+1+2*O.truncDivision(O.truncDivision(Q,2)-1,15);let de=O.truncDivision(Q,2),rt=O.truncDivision(oe,2);for(let Xe=0;Xe<de;Xe++){let br=Xe+O.truncDivision(Xe,15);ne[de-Xe-1]=rt-br-1,ne[de+Xe]=rt+br+1}}let pe=new he(oe);for(let de=0,rt=0;de<w;de++){let Xe=(w-de)*4+(m?9:12);for(let br=0;br<Xe;br++){let Ci=br*2;for(let Rr=0;Rr<2;Rr++)B.get(rt+Ci+Rr)&&pe.set(ne[de*2+Rr],ne[de*2+br]),B.get(rt+Xe*2+Ci+Rr)&&pe.set(ne[de*2+br],ne[Q-1-de*2-Rr]),B.get(rt+Xe*4+Ci+Rr)&&pe.set(ne[Q-1-de*2-Rr],ne[Q-1-de*2-br]),B.get(rt+Xe*6+Ci+Rr)&&pe.set(ne[Q-1-de*2-br],ne[de*2+Rr])}rt+=Xe*8}if(ht.drawModeMessage(pe,m,oe,K),m)ht.drawBullsEye(pe,O.truncDivision(oe,2),5);else{ht.drawBullsEye(pe,O.truncDivision(oe,2),7);for(let de=0,rt=0;de<O.truncDivision(Q,2)-1;de+=15,rt+=16)for(let Xe=O.truncDivision(oe,2)&1;Xe<oe;Xe+=2)pe.set(O.truncDivision(oe,2)-rt,Xe),pe.set(O.truncDivision(oe,2)+rt,Xe),pe.set(Xe,O.truncDivision(oe,2)-rt),pe.set(Xe,O.truncDivision(oe,2)+rt)}let me=new T;return me.setCompact(m),me.setSize(oe),me.setLayers(w),me.setCodeWords(q),me.setMatrix(pe),me}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let h=a-u;h<=a+u;h++)s.set(h,a-u),s.set(h,a+u),s.set(a-u,h),s.set(a+u,h);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new U;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=ht.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=ht.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let h=O.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let m=h-3+f;u.get(f)&&s.set(m,h-5),u.get(f+7)&&s.set(h+5,m),u.get(20-f)&&s.set(m,h+5),u.get(27-f)&&s.set(h-5,m)}else for(let f=0;f<10;f++){let m=h-5+f+O.truncDivision(f,5);u.get(f)&&s.set(m,h-7),u.get(f+10)&&s.set(h+7,m),u.get(29-f)&&s.set(m,h+7),u.get(39-f)&&s.set(h-7,m)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,h=new no(ht.getGF(l)),f=O.truncDivision(a,l),m=ht.bitsToWords(s,l,f);h.encode(m,f-u);let w=a%l,v=new U;v.appendBits(0,w);for(const C of Array.from(m))v.appendBits(C,l);return v}static bitsToWords(s,a,l){let u=new Int32Array(l),h,f;for(h=0,f=s.getSize()/a;h<f;h++){let m=0;for(let w=0;w<a;w++)m|=s.get(h*a+w)?1<<a-w-1:0;u[h]=m}return u}static getGF(s){switch(s){case 4:return $e.AZTEC_PARAM;case 6:return $e.AZTEC_DATA_6;case 8:return $e.AZTEC_DATA_8;case 10:return $e.AZTEC_DATA_10;case 12:return $e.AZTEC_DATA_12;default:throw new E("Unsupported word size "+s)}}static stuffBits(s,a){let l=new U,u=s.getSize(),h=(1<<a)-2;for(let f=0;f<u;f+=a){let m=0;for(let w=0;w<a;w++)(f+w>=u||s.get(f+w))&&(m|=1<<a-1-w);(m&h)===h?(l.appendBits(m&h,a),f--):m&h?l.appendBits(m,a):(l.appendBits(m|1,a),f--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}ht.DEFAULT_EC_PERCENT=33,ht.DEFAULT_AZTEC_LAYERS=0,ht.MAX_NB_BITS=32,ht.MAX_NB_BITS_COMPACT=4,ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Zh{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,h){let f=A.ISO_8859_1,m=ht.DEFAULT_EC_PERCENT,w=ht.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(sn.CHARACTER_SET)&&(f=y.forName(h.get(sn.CHARACTER_SET).toString())),h.has(sn.ERROR_CORRECTION)&&(m=O.parseInt(h.get(sn.ERROR_CORRECTION).toString())),h.has(sn.AZTEC_LAYERS)&&(w=O.parseInt(h.get(sn.AZTEC_LAYERS).toString()))),Zh.encodeLayers(s,a,l,u,f,m,w)}static encodeLayers(s,a,l,u,h,f,m){if(a!==Ee.AZTEC)throw new E("Can only encode AZTEC, but got "+a);let w=ht.encode($.getBytes(s,h),f,m);return Zh.renderResult(w,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new An;let h=u.getWidth(),f=u.getHeight(),m=Math.max(a,h),w=Math.max(l,f),v=Math.min(m/h,w/f),C=(m-h*v)/2,P=(w-f*v)/2,B=new he(m,w);for(let q=0,K=P;q<f;q++,K+=v)for(let Q=0,ne=C;Q<h;Q++,ne+=v)u.get(Q,q)&&B.setRegion(ne,K,v,v);return B}}n.AbstractExpandedDecoder=Qs,n.ArgumentException=x,n.ArithmeticException=lr,n.AztecCode=T,n.AztecCodeReader=Xs,n.AztecCodeWriter=Zh,n.AztecDecoder=ft,n.AztecDetector=$s,n.AztecDetectorResult=xi,n.AztecEncoder=ht,n.AztecHighLevelEncoder=zc,n.AztecPoint=Mt,n.BarcodeFormat=Ee,n.Binarizer=D,n.BinaryBitmap=_,n.BitArray=U,n.BitMatrix=he,n.BitSource=cl,n.BrowserAztecCodeReader=ji,n.BrowserBarcodeReader=u1,n.BrowserCodeReader=De,n.BrowserDatamatrixCodeReader=d1,n.BrowserMultiFormatReader=Xh,n.BrowserPDF417Reader=Kh,n.BrowserQRCodeReader=Uc,n.BrowserQRCodeSvgWriter=ui,n.CharacterSetECI=L,n.ChecksumException=I,n.Code128Reader=xe,n.Code39Reader=St,n.DataMatrixDecodedBitStreamParser=Wi,n.DataMatrixReader=Ei,n.DecodeHintType=Z,n.DecoderResult=Kn,n.DefaultGridSampler=kt,n.DetectorResult=qs,n.EAN13Reader=nn,n.EncodeHintType=sn,n.Exception=p,n.FormatException=k,n.GenericGF=$e,n.GenericGFPoly=Wt,n.GlobalHistogramBinarizer=Ie,n.GridSampler=ms,n.GridSamplerInstance=Qn,n.HTMLCanvasElementLuminanceSource=Te,n.HybridBinarizer=ye,n.ITFReader=Je,n.IllegalArgumentException=E,n.IllegalStateException=An,n.InvertedLuminanceSource=fe,n.LuminanceSource=re,n.MathUtils=Le,n.MultiFormatOneDReader=Hi,n.MultiFormatReader=to,n.MultiFormatWriter=Qh,n.NotFoundException=J,n.OneDReader=Nt,n.PDF417DecodedBitStreamParser=ie,n.PDF417DecoderErrorCorrection=wa,n.PDF417Reader=Sn,n.PDF417ResultMetadata=Bc,n.PerspectiveTransform=gt,n.PlanarYUVLuminanceSource=jr,n.QRCodeByteMatrix=Ta,n.QRCodeDataMask=kn,n.QRCodeDecodedBitStreamParser=Lt,n.QRCodeDecoderErrorCorrectionLevel=nt,n.QRCodeDecoderFormatInformation=cn,n.QRCodeEncoder=Ct,n.QRCodeEncoderQRCode=dr,n.QRCodeMaskUtil=Bt,n.QRCodeMatrixUtil=Fe,n.QRCodeMode=Me,n.QRCodeReader=Gi,n.QRCodeVersion=_e,n.QRCodeWriter=mn,n.RGBLuminanceSource=$i,n.RSS14Reader=yt,n.RSSExpandedReader=ce,n.ReaderException=Ca,n.ReedSolomonDecoder=Vn,n.ReedSolomonEncoder=no,n.ReedSolomonException=Yn,n.Result=Ke,n.ResultMetadataType=Et,n.ResultPoint=Pe,n.StringUtils=$,n.UnsupportedOperationException=G,n.VideoInputDevice=Se,n.WhiteRectangleDetector=ur,n.WriterException=xt,n.ZXingArrays=S,n.ZXingCharset=y,n.ZXingInteger=O,n.ZXingStandardCharsets=A,n.ZXingStringBuilder=j,n.ZXingStringEncoding=X,n.ZXingSystem=b,n.createAbstractExpandedDecoder=Hh,Object.defineProperty(n,"__esModule",{value:!0})})})(em,em.exports);var zt=em.exports;const gF=tm(zt),pF=uE({__proto__:null,default:gF},[zt]);var Kv=function(){function t(e,n,r){if(this.formatMap=new Map([[Ne.QR_CODE,zt.BarcodeFormat.QR_CODE],[Ne.AZTEC,zt.BarcodeFormat.AZTEC],[Ne.CODABAR,zt.BarcodeFormat.CODABAR],[Ne.CODE_39,zt.BarcodeFormat.CODE_39],[Ne.CODE_93,zt.BarcodeFormat.CODE_93],[Ne.CODE_128,zt.BarcodeFormat.CODE_128],[Ne.DATA_MATRIX,zt.BarcodeFormat.DATA_MATRIX],[Ne.MAXICODE,zt.BarcodeFormat.MAXICODE],[Ne.ITF,zt.BarcodeFormat.ITF],[Ne.EAN_13,zt.BarcodeFormat.EAN_13],[Ne.EAN_8,zt.BarcodeFormat.EAN_8],[Ne.PDF_417,zt.BarcodeFormat.PDF_417],[Ne.RSS_14,zt.BarcodeFormat.RSS_14],[Ne.RSS_EXPANDED,zt.BarcodeFormat.RSS_EXPANDED],[Ne.UPC_A,zt.BarcodeFormat.UPC_A],[Ne.UPC_E,zt.BarcodeFormat.UPC_E],[Ne.UPC_EAN_EXTENSION,zt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!pF)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(zt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(zt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new zt.MultiFormatReader(this.verbose,this.hints),r=new zt.HTMLCanvasElementLuminanceSource(e),i=new zt.BinaryBitmap(new zt.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:t3.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),mF=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(x){try{p(r.next(x))}catch(E){c(E)}}function g(x){try{p(r.throw(x))}catch(E){c(E)}}function p(x){x.done?o(x.value):i(x.value).then(d,g)}p((r=r.apply(t,e||[])).next())})},yF=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(x){return g([p,x])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(x){p=[6,x],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Yv=function(){function t(e,n,r){if(this.formatMap=new Map([[Ne.QR_CODE,"qr_code"],[Ne.AZTEC,"aztec"],[Ne.CODABAR,"codabar"],[Ne.CODE_39,"code_39"],[Ne.CODE_93,"code_93"],[Ne.CODE_128,"code_128"],[Ne.DATA_MATRIX,"data_matrix"],[Ne.ITF,"itf"],[Ne.EAN_13,"ean_13"],[Ne.EAN_8,"ean_8"],[Ne.PDF_417,"pdf417"],[Ne.UPC_A,"upc_a"],[Ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return mF(this,void 0,void 0,function(){var n,r;return yF(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:t3.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],d=c.boundingBox.width*c.boundingBox.height;d>r&&(r=d,n=c)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Qv=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(x){try{p(r.next(x))}catch(E){c(E)}}function g(x){try{p(r.throw(x))}catch(E){c(E)}}function p(x){x.done?o(x.value):i(x.value).then(d,g)}p((r=r.apply(t,e||[])).next())})},Zv=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(x){return g([p,x])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(x){p=[6,x],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},wF=function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Yv.isSupported()?(this.primaryDecoder=new Yv(e,r,i),this.secondaryDecoder=new Kv(e,r,i)):this.primaryDecoder=new Kv(e,r,i)}return t.prototype.decodeAsync=function(e){return Qv(this,void 0,void 0,function(){var n;return Zv(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Qv(this,void 0,void 0,function(){var n,r;return Zv(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),ww=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),a0=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(x){try{p(r.next(x))}catch(E){c(E)}}function g(x){try{p(r.throw(x))}catch(E){c(E)}}function p(x){x.done?o(x.value):i(x.value).then(d,g)}p((r=r.apply(t,e||[])).next())})},l0=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(x){return g([p,x])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(x){p=[6,x],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},r3=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),xF=function(t){ww(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(r3),vF=function(t){ww(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(xF),EF=function(t){ww(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(r3),_F=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new vF(this.track)},t.prototype.torchFeature=function(){return new EF(this.track)},t}(),AF=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return a0(this,void 0,void 0,function(){var o,c;return l0(this,function(d){switch(d.label){case 0:return o=new t(e,n,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:d.sent(),d.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return a0(this,void 0,void 0,function(){return l0(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(d){e.mediaStream.removeTrack(d),d.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new _F(this.getFirstTrackOrFail())},t}(),CF=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return a0(this,void 0,void 0,function(){return l0(this,function(i){return[2,AF.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return a0(this,void 0,void 0,function(){var n,r;return l0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t}(),Jv=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(x){try{p(r.next(x))}catch(E){c(E)}}function g(x){try{p(r.throw(x))}catch(E){c(E)}}function p(x){x.done?o(x.value):i(x.value).then(d,g)}p((r=r.apply(t,e||[])).next())})},eE=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(x){return g([p,x])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(x){p=[6,x],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},IF=function(){function t(){}return t.failIfNotSupported=function(){return Jv(this,void 0,void 0,function(){return eE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Jv(this,void 0,void 0,function(){return eE(this,function(n){return[2,CF.create(e)]})})},t}(),TF=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(x){try{p(r.next(x))}catch(E){c(E)}}function g(x){try{p(r.throw(x))}catch(E){c(E)}}function p(x){x.done?o(x.value):i(x.value).then(d,g)}p((r=r.apply(t,e||[])).next())})},SF=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(x){return g([p,x])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(x){p=[6,x],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},bF=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=kl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=kl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return TF(this,void 0,void 0,function(){var e,n,r,i,o,c,d;return SF(this,function(g){switch(g.label){case 0:return e=function(p){for(var x=p.getVideoTracks(),E=0,_=x;E<_.length;E++){var I=_[E];I.enabled=!1,I.stop(),p.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,c=r;o<c.length;o++)d=c[o],d.kind==="videoinput"&&i.push({id:d.deviceId,label:d.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var c=[],d=0,g=o;d<g.length;d++){var p=g[d];p.kind==="video"&&c.push({id:p.id,label:p.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},t}(),an;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(an||(an={}));var RF=function(){function t(){this.state=an.NOT_STARTED,this.onGoingTransactionNewState=an.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===an.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=an.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===an.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=an.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==an.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case an.UNKNOWN:throw"Transition from unknown is not allowed";case an.NOT_STARTED:this.failIfNewStateIs(e,[an.PAUSED]);break;case an.SCANNING:break;case an.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),NF=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===an.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==an.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===an.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===an.PAUSED},t}(),PF=function(){function t(){}return t.create=function(){return new NF(new RF)},t}(),OF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wr=function(t){OF(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(hF),DF=function(){function t(e,n){this.logger=n,this.fps=Wr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Wr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?n3.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Cs(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),kF=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new fF(this.verbose),this.qrcode=new wF(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=PF.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var d=DF.create(n,this.logger);this.clearElement();var g=!1;d.videoConstraints&&(d.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=g,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Wr.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var E=this,_=this.stateManagerProxy.startTransition(an.SCANNING);return new Promise(function(I,D){var b=p?d.videoConstraints:E.createVideoConstraints(e);if(!b){_.cancel(),D("videoConstraints should be defined");return}var F={};(!p||d.aspectRatio)&&(F.aspectRatio=d.aspectRatio);var R={onRenderSurfaceReady:function(S,O){E.setupUi(S,O,d),E.isScanning=!0,E.foreverScan(d,r,c)}};IF.failIfNotSupported().then(function(S){S.create(b).then(function(O){return O.render(o.element,F,R).then(function(U){E.renderedCamera=U,_.execute(),I(null)}).catch(function(U){_.cancel(),D(U)})}).catch(function(O){_.cancel(),D(kl.errorGettingUserMedia(O))})}).catch(function(S){_.cancel(),D(kl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(an.PAUSED),this.showPausedState(),(Cs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(an.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(an.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(Wr.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var d=c.width,g=c.height,p=document.getElementById(r.elementId),x=p.clientWidth?p.clientWidth:Wr.DEFAULT_WIDTH,E=Math.max(p.clientHeight?p.clientHeight:g,Wr.FILE_SCAN_MIN_HEIGHT),_=r.computeCanvasDrawConfig(d,g,x,E);if(n){var I=r.createCanvasElement(x,E,"qr-canvas-visible");I.style.display="inline-block",p.appendChild(I);var D=I.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=x,D.canvas.height=E,D.drawImage(c,0,0,d,g,_.x,_.y,_.width,_.height)}var b=Wr.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(c.width,_.width),R=Math.max(c.height,_.height),S=F+2*b,O=R+2*b,U=r.createCanvasElement(S,O);p.appendChild(U);var Y=U.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=S,Y.canvas.height=O,Y.drawImage(c,0,0,d,g,b,b,F,R);try{r.qrcode.decodeRobustlyAsync(U).then(function(Z){i(Xv.createFromQrcodeResult(Z))}).catch(o)}catch(Z){o("QR code parse error, error = ".concat(Z))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return bF.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!n3.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ne.QR_CODE,Ne.AZTEC,Ne.CODABAR,Ne.CODE_39,Ne.CODE_93,Ne.CODE_128,Ne.DATA_MATRIX,Ne.MAXICODE,Ne.ITF,Ne.EAN_13,Ne.EAN_8,Ne.PDF_417,Ne.RSS_14,Ne.RSS_EXPANDED,Ne.UPC_A,Ne.UPC_E,Ne.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];uF(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Cs(e))return!0;if(!Cs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Cs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Cs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,n,o),d=function(p){if(p<Wr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Wr.MIN_QR_BOX_SIZE,"px.")},g=function(p){return p>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};d(c.width),d(c.height),c.width=g(c.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=Cs(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=n,d={x:0,y:0,width:e,height:n},g=c?this.getShadedRegionBounds(e,n,o):d,p=this.createCanvasElement(g.width,g.height),x={willReadFrequently:!0},E=p.getContext("2d",x);E.canvas.width=g.width,E.canvas.height=g.height,this.element.append(p),c&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=E,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=kl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,Xv.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=kl.codeParseError(i);return n(o,dF.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,d=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,p=this.qrRegion.height*d,x=this.qrRegion.x*c,E=this.qrRegion.y*d;this.context.drawImage(o,x,E,g,p,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){_()})):_()}).catch(function(I){i.logger.logError("Error happend while scanning context",I),_()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(D){if(D in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},d=Object.keys(e);if(d.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(d.length," keys");var g=Object.keys(e)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var p=e.facingMode;if(typeof p=="string"){if(c(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(c(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof p;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var _=typeof E;throw"Invalid type of 'deviceId' = ".concat(_)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,c=(i-n)/2;return{x:o,y:c,width:e,height:n}}else{var d=e,g=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(d,"X").concat(g)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Wr.BORDER_SHADER_MATCH_COLOR:Wr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Cs(r)?"qr-canvas":r,c},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(n-i.width)/2,d=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Wr.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,p=40;this.insertShaderBorders(o,p,g,-g,null,0,!0),this.insertShaderBorders(o,p,g,-g,null,0,!1),this.insertShaderBorders(o,p,g,null,-g,0,!0),this.insertShaderBorders(o,p,g,null,-g,0,!1),this.insertShaderBorders(o,g,p+g,-g,null,-g,!0),this.insertShaderBorders(o,g,p+g,null,-g,-g,!0),this.insertShaderBorders(o,g,p+g,-g,null,-g,!1),this.insertShaderBorders(o,g,p+g,null,-g,-g,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,c,d){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=Wr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),d?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),e.appendChild(g)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),tE;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(tE||(tE={}));const MF=()=>{const[t,e]=W.useState(!1),[n,r]=W.useState(null),[i,o]=W.useState(!1),[c,d]=W.useState(null),g=W.useRef(null),p=W.useRef(null),x=W.useRef(null),E=()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{d(null)},3e3)},_=async b=>{if(!(t||!i)){console.log("QR Code scanned:",b),e(!0),o(!1);try{const F=b.split(":");if(F.length<3||F[0]!=="LOYALTY")throw new Error("Invalid QR code format - must be LOYALTY:email:uid");const R=F[1];if(!R)throw new Error("No email found in QR code");console.log("Processing scan for user:",{email:R});const S=WO(xo,"users"),O=e5(S,t5("email","==",R)),U=await Yx(O);if(U.empty)throw new Error("No user found for this email");const Y=U.docs[0],Z=xl(xo,"users",Y.id),k=Y.data();console.log("Current user data:",{name:k.name,email:k.email,currentPurchases:k.purchases||0}),await u5(xo,async $=>{const j=await $.get(Z);if(!j.exists())throw new Error("User not found");const he=j.data(),J=he.purchases||0,Ie=J+1,ye=Ie>=5;console.log("Updating user rewards:",{currentPurchases:J,newPurchases:Ie,isRewardReady:ye,userEmail:he.email}),$.update(Z,{purchases:Ie,isRewardReady:ye,lastScanAt:new Date})}),r(R);const L=(await Yx(O)).docs[0].data(),G=(L==null?void 0:L.purchases)||0;let X=`Loyalty point added! Total purchases: ${G}`;if(G>=5)X+=" - Reward ready! 🎉";else{const $=5-G;X+=` - ${$} more to earn reward`}yr({title:"Success",description:X})}catch(F){console.error("Error processing QR scan:",F);let R="Failed to process loyalty point";F instanceof Error&&(R=F.message),d(R),yr({title:"Error",description:R,variant:"destructive"})}setTimeout(()=>{e(!1),r(null),o(!0)},3e3)}},I=b=>{if(console.log("QR Scanner Error:",b),!(b&&typeof b=="object"&&"name"in b&&b.name==="NotFoundException")&&!(b&&typeof b=="object"&&"message"in b&&typeof b.message=="string"&&(b.message.includes("not found")||b.message.includes("No MultiFormat Readers")||b.message.includes("NotFoundException")))&&!c){const F=b instanceof Error?b.message:"Scanning error occurred";d(F),E()}};W.useEffect(()=>{if(!g.current)return;const b=new kF(g.current.id);return p.current=b,(async()=>{try{o(!0),await b.start({facingMode:"environment"},{fps:10,qrbox:250,disableFlip:!1},_,I)}catch(R){console.error("Failed to start QR scanner:",R),d("Failed to start camera. Please check permissions."),E()}})(),()=>{x.current&&clearTimeout(x.current),b.stop().catch(()=>{}),b.clear()}},[]);const D=()=>{e(!1),r(null),d(null),o(!0)};return z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[z.jsxs("div",{className:"absolute inset-0 opacity-10",children:[z.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),z.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),z.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[z.jsxs("div",{className:"p-6 flex items-center",children:[z.jsx(Hs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:z.jsx(b0,{className:"w-6 h-6"})}),z.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]}),z.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:z.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[z.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),c&&z.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-700 rounded-lg text-red-300 text-sm",children:c}),z.jsxs("div",{className:"relative",children:[z.jsx("div",{id:"qr-reader",ref:g,style:{width:300,height:300},className:"border-2 border-red-500/30 rounded-lg overflow-hidden"}),i&&!t&&z.jsx("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full animate-pulse",children:"Scanning..."}),t&&z.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),n&&z.jsx("div",{className:"mt-4 p-3 bg-green-900/50 border border-green-700 rounded-lg text-green-400 font-semibold",children:z.jsxs("div",{className:"text-center",children:[z.jsx("div",{className:"text-lg mb-1",children:"✅ Scan Successful!"}),z.jsx("div",{className:"text-sm text-green-300",children:"Loyalty point added for user"}),z.jsx("div",{className:"text-xs text-green-400 mt-1 font-mono",children:n})]})}),z.jsxs("div",{className:"mt-6 flex gap-3",children:[z.jsx(us,{onClick:D,disabled:!t&&!c,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"}),t&&z.jsx(us,{onClick:()=>{e(!1),r(null),o(!0)},children:"Ready for Next Scan"})]}),!i&&!t&&!c&&z.jsx("div",{className:"mt-4 text-yellow-400 text-sm",children:"Scanner is starting..."})]})})]})]})},LF=new n7,FF=()=>z.jsx(i7,{client:LF,children:z.jsx(DM,{children:z.jsxs(rL,{children:[z.jsx(Pk,{}),z.jsx(o9,{}),z.jsx(J7,{basename:"/vaporwave-loyalty-club",children:z.jsxs(q7,{children:[z.jsx(lo,{path:"/",element:z.jsx(sL,{})}),z.jsx(lo,{path:"/register",element:z.jsx(lL,{})}),z.jsx(lo,{path:"/login",element:z.jsx(cL,{})}),z.jsx(lo,{path:"/dashboard",element:z.jsx(aF,{})}),z.jsx(lo,{path:"/rewards",element:z.jsx(lF,{})}),z.jsx(lo,{path:"/scan",element:z.jsx(MF,{})}),z.jsx(lo,{path:"*",element:z.jsx(cF,{})})]})})]})})});CA(document.getElementById("root")).render(z.jsx(FF,{}));
